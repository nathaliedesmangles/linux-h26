var relearn_searchindex = [
  {
    "breadcrumb": "",
    "content": "Administration Linux (Mint) Bienvenue dans le site de rÃ©fÃ©rence du cours.\nFacultatif : Ci-dessous, le cahier pour prendre des notes pendant le cours et les laboratoires, ainsi que le livre de rÃ©fÃ©rence (25$).\nInfo 1. Manuel de cours\n2. Livre de rÃ©fÃ©rence :\n5$ de rabais avec le coupon PEGECMO2026\nObjectifs Ce cours de 15 semaines vise Ã  vous rendre autonome sur le terminal Linux.\nPlan BLOC 1 : Fondations et installation (Semaines 1 Ã  4)\nObjectif : MaÃ®triser lâ€™installation, la virtualisation et la ligne de commande.\nBLOC 2 : Administration systÃ¨me et sÃ©curitÃ© (Semaines 5 Ã  8)\nObjectif : GÃ©rer les utilisateurs, sÃ©curiser les fichiers et contrÃ´ler les programmes.\nBLOC 3 : Redirections et filtres, disques, rÃ©seau et services (Semaines 9 Ã  11)\nObjectif : GÃ©rer les services et le stockage physique, se connecter la machine au rÃ©seau.\nBLOC 4 : Automatisation et scripting (Semaines 12 Ã  15)\nObjectif : Automatiser les tÃ¢ches dâ€™administration via des scripts Bash.",
    "description": "Administration Linux (Mint) Bienvenue dans le site de rÃ©fÃ©rence du cours.\nFacultatif : Ci-dessous, le cahier pour prendre des notes pendant le cours et les laboratoires, ainsi que le livre de rÃ©fÃ©rence (25$).\nInfo 1. Manuel de cours\n2. Livre de rÃ©fÃ©rence :\n5$ de rabais avec le coupon PEGECMO2026\nObjectifs Ce cours de 15 semaines vise Ã  vous rendre autonome sur le terminal Linux.",
    "tags": [],
    "title": "Accueil du cours",
    "uri": "/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "Pour valider vos acquis, vous devez soumettre des preuves de votre travail pour tous les exercices effectuÃ©s, quâ€™ils soient faits en classe ou durant les laboratoires.\nWarning Bien que les exercices (prÃ©cÃ©dÃ©s de ğŸŸ¢) et les laboratoires ne soient pas sommativement notÃ©s, ils servent dâ€™entraÃ®nement intensif pour rÃ©ussir les Ã©valuations sommatives (examens).\nSi vous ne les faites pas pendant les sÃ©ances dÃ©diÃ©es ou si vous ne les remettez pas, cela sera considÃ©rÃ© comme une absence au cours et/ou laboratoire.\nFormat des preuves (Captures dâ€™Ã©cran) Toutes les remises se font sous forme de captures dâ€™Ã©cran insÃ©rÃ©es dans un document. Chaque capture doit respecter strictement les rÃ¨gles suivantes :\n1. Pendant lâ€™exercice Pour chaque Ã©tape importante, votre capture dâ€™Ã©cran doit montrer trois Ã©lÃ©ments indissociables :\nVotre identifiant : Le prompt du terminal doit Ãªtre visible (ex: etudiant@linux-mint:~$). La commande : Ce que vous avez tapÃ©. Le rÃ©sultat : Ce que le systÃ¨me a rÃ©pondu. 2. Ã€ la fin de chaque exercice (Obligatoire) Une fois lâ€™exercice terminÃ©, vous devez impÃ©rativement lancer la commande suivante et en faire une capture dâ€™Ã©cran :\nhistory Vous devez capturer toutes les commandes tapÃ©es pour rÃ©aliser lâ€™exercice. Si la liste est longue, faites plusieurs captures.\nPolitique du â€œDroit Ã  lâ€™erreurâ€ Details Je ne sanctionne pas les erreurs de parcours.\nDans votre capture de la commande history, je mâ€™attends Ã  voir des commandes ratÃ©es, des fautes de frappe et des essais infructueux. Câ€™est normal, câ€™est comme Ã§a quâ€™on apprend.\nTant que la derniÃ¨re commande de la sÃ©quence est bonne et que le rÃ©sultat est atteint, vous aurez tous vos points. Il nâ€™y a aucune pÃ©nalitÃ© pour avoir Ã©chouÃ© 10 fois avant de rÃ©ussir. Exemple de remise valide Voici Ã  quoi doit ressembler une preuve valide pour lâ€™exercice â€œCrÃ©er un dossierâ€ :\nÃ‰tape 1 : La rÃ©alisation (Capture dâ€™Ã©cran montrant) :\netudiant@mint:~$ mkdir mon_dossier etudiant@mint:~$ ls -l drwxr-xr-x 2 etudiant etudiant 4096 jan 04 10:00 mon_dossier Ã‰tape 2 : La vÃ©rification (History) (Capture dâ€™Ã©cran finale) :\netudiant@mint:~$ history 41 mkdi mon_dossier \u003c-- Erreur (pas grave !) 42 mkdir mon_dossier \u003c-- RÃ©ussite 43 ls -l 44 history Details Une remise sans la capture de la commande history sera considÃ©rÃ©e comme incomplÃ¨te.",
    "description": "Pour valider vos acquis, vous devez soumettre des preuves de votre travail pour tous les exercices effectuÃ©s, quâ€™ils soient faits en classe ou durant les laboratoires.\nWarning Bien que les exercices (prÃ©cÃ©dÃ©s de ğŸŸ¢) et les laboratoires ne soient pas sommativement notÃ©s, ils servent dâ€™entraÃ®nement intensif pour rÃ©ussir les Ã©valuations sommatives (examens).\nSi vous ne les faites pas pendant les sÃ©ances dÃ©diÃ©es ou si vous ne les remettez pas, cela sera considÃ©rÃ© comme une absence au cours et/ou laboratoire.",
    "tags": [],
    "title": "Protocole de remise des exos et labos",
    "uri": "/remises/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "BasÃ©es sur la PIÃ‰A RÃ‰USSITE = SAVOIRS + SAVOIR FAIRE + SAVOIR ÃŠTRE ğŸ›‘ ATTITUDE \u0026 PRÃ‰SENCE\nCellulaire interdit = Attention exigÃ©e. Absence ou inattention = Aucune aide individuelle supplÃ©mentaire de ma part. Vous devrez vous dÃ©brouiller par vous-mÃªmes. Retard en classe = AccÃ¨s refusÃ© possible. ğŸ›‘ COMMUNICATION\nPas dâ€™Ã©crit = Pas dâ€™entente. (Ne comptez pas sur ma mÃ©moire pour vos justificatifs, envoyez un message sur ColNet). Contestation de note : Vous avez 5 jours aprÃ¨s la remise de la note. AprÃ¨s, le dossier est clos. Pas de nÃ©gociation en fin de session. ğŸ›‘ Ã‰VALUATIONS\nTravaux en retard : -10% / jour. Max 4 jours. AprÃ¨s = 0. Examens : Aucun retard permis si une personne a dÃ©jÃ  quittÃ© la salle. Plagiat/Triche/IA : Note 0 + Rapport. Je peux exiger une validation orale pour vÃ©rifier vos connaissances. FranÃ§ais : Jusquâ€™Ã  -10% pour les fautes. Mise au point importante sur lâ€™encadrement : Je tiens Ã  clarifier mon rÃ´le et le vÃ´tre pour Ã©viter toute frustration future :\nLâ€™aide â€œÃ  la carteâ€ nâ€™existe pas : Le plan de cours est clair : une absence non motivÃ©e (physique ou mentale/cellulaire) vous prive dâ€™aide supplÃ©mentaire. Je suis lÃ  pour soutenir ceux qui participent activement, pas pour rÃ©pÃ©ter le cours en classe, ni en privÃ© Ã  ceux qui ont choisi de ne pas Ã©couter.\nVos notes, votre responsabilitÃ© :\nVÃ©rifiez vos fichiers avant de remettre (pas de â€œoops, mauvais fichierâ€ acceptÃ©). VÃ©rifiez vos notes dÃ¨s rÃ©ception. Ne venez pas me voir Ã  la semaine 15 pour contester une note de la semaine 3. IntÃ©gritÃ© : Si jâ€™ai un doute sur qui a Ã©crit votre code ou votre travail, jâ€™appliquerai la clause de vÃ©rification orale. Si vous ne pouvez pas expliquer ce que vous avez remis, la note sera ajustÃ©e en consÃ©quence. En assistant au cours, vous acceptez de respecter les rÃ¨glements, le cas Ã©chÃ©ant, dâ€™en payer les consÃ©quences (prescrites par la PIEA)",
    "description": "BasÃ©es sur la PIÃ‰A RÃ‰USSITE = SAVOIRS + SAVOIR FAIRE + SAVOIR ÃŠTRE ğŸ›‘ ATTITUDE \u0026 PRÃ‰SENCE",
    "tags": [],
    "title": "RÃ¨gles de survie au cours",
    "uri": "/regles/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "Objectif global Ã€ la fin de ce bloc, vous devez avoir un environnement Linux fonctionnel, comprendre oÃ¹ il se trouve dans le systÃ¨me et savoir Ã©diter des fichiers de configuration. Contenu des semaines 1 Ã  4 Semaine 1 : Introduction et installation Semaine 2 : Arborescence du systÃ¨me (/, /home) et navigation (cd, ls). Semaine 3 : Gestion des paquets (apt) et Ã©dition de texte (VI/VIM). Semaine 4 : Expansion dâ€™accolades et Examen #1 (20%)",
    "description": "Objectif global Ã€ la fin de ce bloc, vous devez avoir un environnement Linux fonctionnel, comprendre oÃ¹ il se trouve dans le systÃ¨me et savoir Ã©diter des fichiers de configuration. Contenu des semaines 1 Ã  4 Semaine 1 : Introduction et installation Semaine 2 : Arborescence du systÃ¨me (/, /home) et navigation (cd, ls). Semaine 3 : Gestion des paquets (apt) et Ã©dition de texte (VI/VIM). Semaine 4 : Expansion dâ€™accolades et Examen #1 (20%)",
    "tags": [],
    "title": "Fondations \u0026 installation",
    "uri": "/bloc-1/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Fondations \u0026 installation",
    "content": "Objectif de la semaine Avoir une machine Linux fonctionnelle et comprendre pourquoi on lâ€™utilise. ThÃ©orie Quâ€™est-ce que Linux ? Ce nâ€™est pas juste â€œun autre Windowsâ€. Câ€™est lâ€™OS qui fait tourner Internet, le Cloud, Android et les supercalculateurs. Votre routeur Wi-Fi, câ€™est Linux. Si vous voulez travailler en TI, vous ne pouvez pas Ã©viter ce pingouin.\nEn date de dÃ©cembre 2025, â€œ96,3 % du top 1 million des serveurs web tournent sous Linux.\nPhilosophie Open Source : Windows/macOS : Code fermÃ© (propriÃ©taire). Vous louez le logiciel, vous ne pouvez pas voir comment il est fait. Linux : Code ouvert. Câ€™est comme une recette de cuisine publique : tout le monde peut la copier, la modifier et la redistribuer . Analogie : Windows, câ€™est un restaurant (on mange, on paie, on ne va pas en cuisine). Linux, câ€™est un â€œPotluckâ€ communautaire (on apporte, on modifie, on partage). Architecture : Le moteur et la carrosserie Il faut distinguer le Noyau du SystÃ¨me dâ€™exploitation .\nLe Kernel (Noyau) : Câ€™est le chef dâ€™orchestre. Il parle directement au matÃ©riel (CPU, RAM, Disque). Câ€™est le â€œmoteurâ€. Le Shell (Coquille) : Lâ€™interface textuelle qui permet Ã  lâ€™humain de parler au Noyau. Câ€™est le â€œvolantâ€. La Distribution (Distro) : Câ€™est le package complet (Moteur + Volant + SiÃ¨ges en cuir + Climatisation). Ubuntu (Grand public), RedHat (Entreprise), Kali (SÃ©curitÃ©), Mint (Notre choix: stable avec une interface proche de Windows pour dÃ©buter). La virtualisation (cours 420-ZE5-MO) Pourquoi on nâ€™installe pas Linux directement sur vos portables aujourdâ€™hui ? Pour Ã©viter la catastrophe.\nConcept : Un ordinateur â€œfantÃ´meâ€ qui tourne Ã  lâ€™intÃ©rieur de votre vrai ordinateur . Vocabulaire technique : HÃ´te (Host) : Votre machine physique (Windows/Mac). InvitÃ© (Guest) : La machine virtuelle (Linux Mint). Hyperviseur : Le logiciel qui fait le pont (VirtualBox). Avantage majeur : Le â€œSandboxâ€ (Bac Ã  sable). Si vous brisez Linux, vous supprimez juste un fichier. Votre Windows reste intact. Exercice (en classe) Exercice 1 Utiliser le fichier exo-semaine1.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nAudit RAM : Avant de crÃ©er la VM, on doit savoir ce quâ€™on peut se permettre. Consignes :\nOuvrez votre Gestionnaire des tÃ¢ches (Ctrl+Shift+Esc) ou Moniteur dâ€™activitÃ© (Mac). Onglet Performance \u003e MÃ©moire. RÃ©pondez Ã  ces 2 questions sur une feuille/Note : Combien de RAM Totale avez-vous ? (ex: 16 Go) Combien de RAM est Disponible maintenant ? (ex: 9 Go) DÃ©cision : Si vous avez \u003e 8 Go de libre : Donnez 4096 Mo (4 Go) Ã  la VM. Si vous avez \u003c 4 Go de libre : Donnez 2048 Mo (2 Go) Ã  la VM (Minimum vital). PrÃ©paration au laboratoire (30 min) Warning Vous devez avoir terminÃ© cette Ã©tape avant de quitter. Si ce nâ€™est pas fait, vous nâ€™aurez pas le temps de terminer le laboratoire (sÃ©ance #2). TÃ©lÃ©charger le fichier ISO de Linux Mint (Ã‰dition Cinnamon)\nLien \u003e Ã‰dition Cinnamon Choisir un Miroir canadien de prÃ©fÃ©rence. Vous obtiendrez le fichier linuxmint-22.2-cinnamon-64bit.iso. CrÃ©ation dâ€™une clÃ© bootable Linux Mint (Ã€ FAIRE)\nUtiliser le fichier Creation-cle-bootable.pdf TÃ©lÃ©charger le fichier pdf\nCrÃ©er la clÃ© USB bootable avec Rufus en sÃ©lectionnant lâ€™ISO de Mint et votre clÃ© USB (attention, toutes les donnÃ©es seront effacÃ©es). DÃ©brancher tous les autres disques durs internes (Windows inclus) pour ne laisser que le SSD externe branchÃ© Ã  lâ€™ordinateur. Cette vidÃ©o vous montre comment crÃ©er une clÃ© USB bootable avec Rufus : VidÃ©o: Installation de Linux Mint 22\nInstallation\nDÃ©marrer sur la clÃ© USB en utilisant le menu de dÃ©marrage (touche F12, F10, DEL, ou ESC au dÃ©marrage) et choisir la clÃ© dâ€™installation. Lancer lâ€™installateur depuis le bureau de Linux Mint. Choisir le type dâ€™installation : Pour un contrÃ´le total, optez pour lâ€™installation personnalisÃ©e (â€œSomething Elseâ€). Partitionner le SSD externe : CrÃ©ez au moins une partition racine (/) sur le SSD. Installer le chargeur dâ€™amorÃ§age (GRUB) : Câ€™est crucial : dans la section â€œPÃ©riphÃ©rique oÃ¹ installer le programme de dÃ©marrageâ€, sÃ©lectionnez votre SSD externe (ex: /dev/sda, pas une partition comme /dev/sda1) et non votre disque interne. Suivre les Ã©tapes (fuseau horaire, utilisateur, mot de passe). Voici une dÃ©monstration de lâ€™installation de Linux Mint sur un disque externe : Video: Comment installer facilement Linux Mint\nPremier dÃ©marrage\nRedÃ©marrer le PC et retirer la clÃ© USB dâ€™installation. AccÃ©der au menu de dÃ©marrage (F12, etc.) et sÃ©lectionner le SSD externe pour dÃ©marrer sur votre nouvelle installation de Linux Mint. Cette vidÃ©o explique comment dÃ©marrer votre ordinateur sur le disque dur externe : Video: Installer Linux sur disque dur externe\nRÃ©fÃ©rences ZE5 et Mint\nUtiliser le fichier ZE5: ProceÌdure-installation-Linux-Mint.pdf TÃ©lÃ©charger le fichier pdf\nMint: Guide dâ€™installation\nğŸ’¡ Astuces de la semaine Le piÃ¨ge classique : Si votre souris reste â€œcapturÃ©eâ€ Ã  lâ€™intÃ©rieur de la fenÃªtre virtuelle et que vous ne pouvez plus cliquer sur votre Windows, ne paniquez pas ! Appuyez sur la touche CTRL de DROITE de votre clavier. Câ€™est la touche de libÃ©ration (Host Key).\nLABORATOIRE Objectif Installation de Linux sur votre SSD. Assurez-vous dâ€™avoir installer les â€œGuest Additionsâ€ Installation dâ€™un hyperviseur (VirtualBox) sur votre SSD. CrÃ©ation dâ€™une VM Linux (Mint). Utiliser le fichier labo1.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nÃ‰tape 1 : Installer Linux Mint sur votre SSD (30 min) Installer VirtualBox : Installation standard (â€œSuivant, Suivant, Terminerâ€). ProblÃ¨me frÃ©quent : Si VirtualBox refuse de se lancer ou affiche une erreur VTX/AMD-V, vous devez redÃ©marrer et activer la Virtualisation dans son BIOS. Ã‰tape 2 : Construction de la machine (30 min) Dans VirtualBox, cliquez sur Nouvelle :\nNom : NomPrenom_Linux Type : Linux Version : Ubuntu (64-bit) (Mint est basÃ© sur Ubuntu). RAM : Selon le Micro-Exo (2048 Mo ou 4096 Mo). Disque Dur : CrÃ©er un disque virtuel maintenant -\u003e VDI -\u003e Dynamiquement allouÃ© -\u003e 30 Go (Important : Ne mettez pas 10 Go, câ€™est trop peu pour la session). Ã‰tape 3 : Installation de lâ€™OS (45 min) Montage de lâ€™ISO : ParamÃ¨tres de la VM -\u003e Stockage -\u003e Vide (sous ContrÃ´leur IDE) -\u003e Petit disque bleu Ã  droite -\u003e Choisir le fichier de disque -\u003e SÃ©lectionner lâ€™ISO de Mint. DÃ©marrage : Cliquez sur DÃ©marrer. Lancer lâ€™installateur : Double-cliquez sur â€œInstall Linux Mintâ€ sur le bureau virtuel. La frayeur du dÃ©butant : Ã€ lâ€™Ã©tape â€œType dâ€™installationâ€, choisir : Effacer le disque et installer Linux Mint. Rassurer la classe : â€œCeci efface le disque VIRTUEL de 30 Go crÃ©Ã© tantÃ´t. Ã‡a ne touche PAS Ã  votre Windows.â€ CrÃ©ation compte : Nom : etudiant (pour faciliter la correction). Mot de passe : 420 ou cmomo (standardiser pour le labo). Nom de lâ€™ordinateur : station-linux. Ã‰tape 4 : Post-installation \u0026 â€œGuest Additionsâ€ (15 min) Une fois lâ€™installation finie et redÃ©marrÃ©e :\nProblÃ¨me : Lâ€™Ã©cran est tout petit (800x600). Solution : Dans le menu de la fenÃªtre VirtualBox (en haut) -\u003e PÃ©riphÃ©riques -\u003e InsÃ©rer lâ€™image CD des additions invitÃ©. Linux va demander de lancer le logiciel -\u003e â€œLancerâ€ -\u003e Mot de passe -\u003e EntrÃ©e. Une fois fini, RedÃ©marrer la VM. Test final : Agrandissez la fenÃªtre, Linux doit sâ€™adapter en plein Ã©cran. Checklist de fin de cours (Pour pouvoir partir) Details Vous devez montrer votre Ã©cran pour savoir si vous pouvez partir :\nVM dÃ©marrÃ©e. Session ouverte (Login rÃ©ussi). RÃ©solution dâ€™Ã©cran dynamique (Plein Ã©cran fonctionnel). Connexion Internet fonctionnelle (Ouvrir Firefox dans la VM et aller sur Google). Livrable (Preuve de travail Ã  dÃ©poser sur Moodle) :\nUne capture dâ€™Ã©cran de votre Linux Mint en plein Ã©cran, Avec le terminal ouvert montrant votre nom dâ€™utilisateur, la date (commande date), et Le gestionnaire de mises Ã  jour vert (Ã  jour).",
    "description": "Objectif de la semaine Avoir une machine Linux fonctionnelle et comprendre pourquoi on lâ€™utilise. ThÃ©orie Quâ€™est-ce que Linux ? Ce nâ€™est pas juste â€œun autre Windowsâ€. Câ€™est lâ€™OS qui fait tourner Internet, le Cloud, Android et les supercalculateurs. Votre routeur Wi-Fi, câ€™est Linux. Si vous voulez travailler en TI, vous ne pouvez pas Ã©viter ce pingouin.",
    "tags": [],
    "title": "Introduction et installation",
    "uri": "/bloc-1/semaine-1/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "Objectif global Ce bloc est crucial car il touche Ã  la sÃ©curitÃ© et Ã  la gestion multi-utilisateurs.\nÃ€ la fin de ce bloc, vous devez savoir gÃ©rer les comptes utilisateurs, sÃ©curiser lâ€™accÃ¨s aux fichiers via les permissions et contrÃ´ler les programmes en cours dâ€™exÃ©cution.\nContenu des semaines 5 Ã  8 Semaine 5 : Gestion des utilisateurs (useradd, /etc/passwd) Semaine 6 : Permissions \u0026 droits (chmod, chown, notation octale) Semaine 7 : Gestion des processus (ps, kill) et surveillance (top). Semaine 8 : RÃ©vision \u0026 Test #2 (25%)",
    "description": "Objectif global Ce bloc est crucial car il touche Ã  la sÃ©curitÃ© et Ã  la gestion multi-utilisateurs.\nÃ€ la fin de ce bloc, vous devez savoir gÃ©rer les comptes utilisateurs, sÃ©curiser lâ€™accÃ¨s aux fichiers via les permissions et contrÃ´ler les programmes en cours dâ€™exÃ©cution.\nContenu des semaines 5 Ã  8 Semaine 5 : Gestion des utilisateurs (useradd, /etc/passwd) Semaine 6 : Permissions \u0026 droits (chmod, chown, notation octale) Semaine 7 : Gestion des processus (ps, kill) et surveillance (top). Semaine 8 : RÃ©vision \u0026 Test #2 (25%)",
    "tags": [],
    "title": "Administration systÃ¨me \u0026 sÃ©curitÃ©",
    "uri": "/bloc-2/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Fondations \u0026 installation",
    "content": "Objectif de la semaine Connaitre et comprendre la structure des fichiers sous Linux Se dÃ©placer dans le systÃ¨me et manipuler des fichiers sans souris. Warning Câ€™est le cours le plus important pour arriver Ã  sâ€™orienter dans lâ€™architecture de Linux.\nFichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine2.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Windows vs Linux Sous Windows, vous avez des lecteurs physiques : C:\\ (Disque systÃ¨me), D:\\ (USB), Z:\\ (RÃ©seau). Sous Linux, tout est un fichier et tout commence au mÃªme endroit .\nLa Racine (/) : Câ€™est le point de dÃ©part unique. Il nâ€™y a pas de â€œC:â€. Tout ce qui est branchÃ© Ã  lâ€™ordinateur (disque dur, clÃ© USB, DVD) apparaÃ®t comme un dossier quelque part sous la racine. La distinction majuscule/minuscule (Case Sensitivity) : Windows : Dossier = dossier. Linux : Dossier, dossier et DOSSIER sont trois dossiers diffÃ©rents. Les incontournables du systÃ¨me de fichiers Pas besoin de tout connaÃ®tre, mais vous devez reconnaÃ®tre ceux-ci :\n/ (Slash) : La Racine (The Root). Le dÃ©but de tout. /home : Vos documents. Câ€™est lâ€™Ã©quivalent de C:\\Users. Câ€™est le seul endroit oÃ¹ vous avez le droit dâ€™Ã©crire par dÃ©faut. /root : Le dossier personnel de lâ€™administrateur suprÃªme. (Ne pas confondre avec /). /etc : Etcetera. Contient les fichiers de configuration systÃ¨me. /bin \u0026 /usr/bin : Binaries. Contient les programmes (les commandes comme ls, cp). /var : Variable. Ce qui change souvent (Logs, site web, bases de donnÃ©es). Chemins absolus vs relatifs Warning Câ€™est la cause #1 des erreurs au dÃ©but ET AUSSI aussi dans les cours de programmation.\nChemin absolu (Lâ€™adresse postale complÃ¨te) :\nCommence toujours par /. Fonctionne peu importe oÃ¹ vous Ãªtes. Ex: /home/etudiant/Documents/devoir.txt Chemin relatif (Les indications locales) :\nNe commence jamais par /. DÃ©pend de votre position actuelle. Ex: Si je suis dÃ©jÃ  dans /home/etudiant, je tape juste Documents/devoir.txt. Les raccourcis magiques :\n. (Un point) = Ici (Dossier courant). .. (Deux points) = Le dossier parent (Remonter dâ€™un cran). ~ (Tilde) = Ma maison (/home/etudiant). Lâ€™anatomie dâ€™un prompt typique etudiant@linux-mint:~/Documents$\netudiant : QUI je suis ? (Mon identitÃ©). @linux-mint : OÃ™ je suis ? (Sur quelle machine ? Important quand on fera du SSH). ~/Documents : DANS QUEL DOSSIER je suis ? (Mon emplacement). $ : QUEL POUVOIR jâ€™ai ? $ = Utilisateur normal (Pistolet Ã  eau). # = Root / Superutilisateur (Bazooka). Si vous voyez Ã§a, faites gaffe. La syntaxe dâ€™une commande Une commande suit presque toujours cette logique :\nCOMMANDE + OPTIONS + CIBLE Exemple : ls -l /etc\nQuoi faire ? ls (Lister). Comment ? -l (Format long/dÃ©tails). OÃ¹ ? /etc (Dans le dossier de config). ğŸŸ¢ Exercice 1 (en classe) Ã€ rÃ©aliser individuellement. Vous devez trouver les rÃ©ponses en explorant.\nAllez dans le dossier /etc. Combien y a-t-il de fichiers (approximativement) ? (ls est votre ami). Trouvez le fichier nommÃ© passwd dans /etc. Copiez-le dans votre dossier personnel (~). Renommez votre copie utilisateurs_backup.txt. CrÃ©ez un dossier Confidentiel dans votre home. DÃ©placez utilisateurs_backup.txt Ã  lâ€™intÃ©rieur de Confidentiel. Revenez Ã  votre point de dÃ©part (~) et supprimez le dossier Confidentiel et son contenu en une seule commande. Aide intÃ©grÃ©e Commandes : man, apropos, history\nBesoin Commande Explication Lire la documentation man commande Manuel officiel Quitter q TrÃ¨s important Chercher une commande apropos mot Recherche par mot-clÃ© Voir lâ€™historique history Toutes les commandes rÃ©centes Commande man\nLa commande man affiche les pages de manuel des commandes. On lâ€™utilise pour comprendre comment une commande fonctionne grÃ¢ce Ã  son manuel. man ls man cp man chmod Les sections importantes :\nSection Ce quâ€™elle contient NAME Nom + courte description SYNOPSIS Format gÃ©nÃ©ral de la commande (arguments, options) DESCRIPTION DÃ©tails sur le fonctionnement OPTIONS Toutes les options disponibles EXAMPLES Exemples (si la page en contient) Commande apropos\nOn lâ€™utilise quand on ne connaÃ®t pas la commande mais quâ€™on connaÃ®t lâ€™action souhaitÃ©e. Elle permet de trouver la bonne commande quand on ne la connaÃ®t pas. Elle renvoie une liste de commandes dont la description contient le mot recherchÃ©. apropos directory apropos remove apropos copy ğŸŸ¢ Exercice 2 (en classe) Quelle est la diffÃ©rence entre man et apropos ? Que reprÃ©sente la section SYNOPSIS dans une page man ? Comment chercher une chaÃ®ne de texte Ã  lâ€™intÃ©rieur dâ€™un manuel ? (indice : /texte) Quelle touche du clavier permet de quitter le manuel ? Quel symbole indique quâ€™un argument est optionnel dans le SYNOPSIS ? (rÃ©ponse : [ ]) ğŸ’¡ Astuces de la semaine Lâ€™autocomplÃ©tion (Tab) Ne tapez jamais les noms de fichiers en entier ! Tapez les 3 premiÃ¨res lettres (ex: cd Doc) et appuyez sur la touche TAB. Linux finira le mot pour vous (cd Documents/). Si Ã§a ne marche pas, appuyez 2 fois sur TAB : Linux vous montrera les choix possibles.\nHistorique (FlÃ¨ches) Vous avez fait une faute de frappe dans une longue commande ? Appuyez sur la FlÃ¨che du Haut pour rappeler la derniÃ¨re commande et corrigez-la.\nLABORATOIRE Objectif DÃ©velopper la â€œmÃ©moire musculaireâ€ des commandes de base. Utiliser le fichier labo2.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nExercice #1 : Trouver la bonne commande Ã€ lâ€™aide de apropos, trouve une commande qui permet :\nDâ€™afficher lâ€™heure. De changer les permissions. Dâ€™arrÃªter le systÃ¨me. De rechercher du texte dans un fichier. De compter les lignes dâ€™un fichier. Ã‰cris la commande trouvÃ©e + sa courte description.\nExercice #2 : Lire un manuel Avec man, trouve dans la commande :\nDans man ls :\nQuelle option permet dâ€™afficher les fichiers cachÃ©s ? Quelle option donne un listing dÃ©taillÃ© ? Dans man cp :\nQuelle est la syntaxe (ligne complÃ¨te du SYNOPSIS) ? Quelle option permet de demander une confirmation avant dâ€™Ã©craser un fichier ? Dans man rm :\nQuelle option permet une suppression interactive ? Quelle option force la suppression sans confirmation ? Dans man mkdir :\nLe SYNOPSIS indique mkdir [OPTION]... DIRECTORY.... * Que signifie ... ? * Peut-on crÃ©er plusieurs rÃ©pertoires Ã  la fois ? Trouve comment crÃ©er un rÃ©pertoire avec ses sous-rÃ©pertoires automatiquement (option recursive). Avec uniquement apropos, trouve dans la commande qui permet de trouver :\nLâ€™espace disque libre. Lâ€™utilisation du CPU. Lâ€™informations sur les partitions. Puis utilise man pour trouver une option utile pour chacune des commandes trouvÃ©es.\nExercice #3 : Exploration et manipulation Ã‰tape 0 : Ouvrir le Terminal (10 min) Raccourci clavier (souvent Ctrl+Alt+T) ou via le menu. Analyser le prompt : etudiant@station-linux:~$ Qui ? etudiant OÃ¹ ? ~ (Dans mon home). Ã‰tape 1 : Exploration (30 min) Commandes : pwd, ls, cd\nOÃ¹ suis-je ? Tapez pwd (Print Working Directory). Confirmez que vous Ãªtes dans /home/etudiant. Quâ€™est-ce quâ€™il y a ici ? Tapez ls. Voir lâ€™invisible : Tapez ls -a. Remarquez les fichiers commenÃ§ant par un point (ex: .bashrc). Ce sont les fichiers cachÃ©s. Aller ailleurs : Allez Ã  la racine : cd / VÃ©rifiez avec pwd. Listez le contenu : ls. Voyez-vous les dossiers bin, etc, home ? Le ping-pong : Revenez chez vous avec le raccourci rapide : cd (sans argument) ou cd ~. Remontez dâ€™un niveau : cd .. (Vous Ãªtes maintenant dans /home). Ã‰tape 2 : Manipulation (45 min) Commandes : mkdir, touch, cp, mv, rm*\nCrÃ©er une structure :\nCrÃ©ez un dossier Labo2 : mkdir Labo2 Entrez dedans : cd Labo2 CrÃ©ez une structure complexe en une ligne : mkdir -p Projet/Images/Icones CrÃ©er des fichiers :\nCrÃ©ez un fichier vide : touch mon_fichier.txt Copier (cp) :\nCopiez le fichier dans le dossier Projet : cp mon_fichier.txt Projet/ VÃ©rifiez : ls Projet/ DÃ©placer et Renommer (mv) :\nNote : Linux nâ€™a pas de commande â€œrenommerâ€. On â€œdÃ©placeâ€ un fichier vers un nouveau nom. Renommez le fichier original : mv mon_fichier.txt fichier_final.txt DÃ©placez-le dans Images : mv fichier_final.txt Projet/Images/ Supprimer (rm) - ATTENTION :\nEssayez de supprimer le dossier Projet : rm Projet -\u003e Erreur ! Câ€™est un dossier. Supprimez le dossier et tout son contenu : rm -r Projet (Recursive). Rappel : Il nâ€™y a pas de corbeille en ligne de commande. Câ€™est dÃ©finitif. CorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectif de la semaine Connaitre et comprendre la structure des fichiers sous Linux Se dÃ©placer dans le systÃ¨me et manipuler des fichiers sans souris. Warning Câ€™est le cours le plus important pour arriver Ã  sâ€™orienter dans lâ€™architecture de Linux.\nFichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine2.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx",
    "tags": [],
    "title": "Arborescence et navigation",
    "uri": "/bloc-1/semaine-2/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Fondations \u0026 installation",
    "content": "Objectif de la semaine Comprendre les dÃ©pÃ´ts, mises Ã  jour (apt update/upgrade) et installation (apt install vim/htop). ÃŠtre capable de modifier un fichier de configuration sur un serveur distant sans souris. Utiliser le fichier exo-semaine3.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Gestion des paquets 1. La fin des fichiers .exe (Les dÃ©pÃ´ts) Sous Windows, quand vous voulez un logiciel, vous ouvrez le navigateur, vous cherchez un site (parfois douteux), vous tÃ©lÃ©chargez un .exe et vous cliquez sur â€œSuivant, Suivant, Suivantâ€.\nSous Linux, cette mÃ©thode est archaÃ¯que. Nous utilisons des Gestionnaires de paquets connectÃ©s Ã  des dÃ©pÃ´ts (repositories). Câ€™est une immense bibliothÃ¨que centralisÃ©e, validÃ©e et sÃ©curisÃ©e par les crÃ©ateurs de votre distribution. Linux Mint utilise APT (Advanced Package Tool), lâ€™ancÃªtre de lâ€™App Store.\n2. APT : Le standard Debian/Mint Sur Linux Mint, le chef dâ€™orchestre sâ€™appelle APT. Voici les commandes que vous taperez tous les jours. Notez lâ€™utilisation de sudo, la commande magique qui dit â€œJe suis lâ€™administrateurâ€. Sans elle, vous nâ€™avez pas le droit dâ€™installer des logiciels.\nAnalogie : Le menu du restaurant Beaucoup de dÃ©butants confondent update et upgrade. Imaginez que vous Ãªtes au restaurant :\nsudo apt update : Vous demandez la carte du jour. â€œQuâ€™est-ce quâ€™il y a de nouveau ?â€ (Cela ne vous donne rien Ã  manger, cela met juste Ã  jour votre connaissance des plats disponibles). sudo apt upgrade : Vous commandez les plats amÃ©liorÃ©s. â€œRemplacez mes vieux plats par les nouvelles versions de la carte.â€ (Câ€™est lÃ  que lâ€™installation rÃ©elle se fait). Commandes essentielles : # 1. ACTUALISER (Toujours faire ceci en premier !) # TÃ©lÃ©charge la liste des derniÃ¨res versions disponibles. sudo apt update # 2. INSTALLER # TÃ©lÃ©charge et installe le logiciel (ex: l'Ã©diteur vim ou nano) et ses dÃ©pendances. sudo apt install vim # ou sudo apt install nano # 3. SUPPRIMER # DÃ©sinstalle le logiciel. sudo apt remove nano Details Culture gÃ©nÃ©rale : Le gestionnaire de paquet DNF\nLinux est une grande famille. Mint et Ubuntu utilisent APT. Mais dans le monde professionnel, vous croiserez souvent la famille Red Hat (Fedora, RHEL, AlmaLinux) qui utilise DNF. Câ€™est une abrÃ©viation de â€œDandified YUMâ€ et câ€™est le successeur moderne de lâ€™ancienne commande yum. Câ€™est exactement la mÃªme logique quâ€™avec APT. Seul le mot change :\nAction Mint / Ubuntu Red Hat / Fedora Mettre Ã  jour la liste apt update dnf check-update Installer apt install dnf install ğŸŸ¢ Exercice 1 (en classe) Pour pratiquer lâ€™installation de logiciels, nous allons installer un petit programme inutile mais indispensable pour impressionner vos amis : cmatrix.\nÃ‰tape 1 : Le constat dâ€™Ã©chec Essayez de lancer le programme. Comme il nâ€™est pas encore installÃ©, Linux va vous signaler une erreur.\netudiant@linux:~$ cmatrix La commande Â« cmatrix Â» est introuvable. Ã‰tape 2 : Lâ€™installation Nous allons rÃ©cupÃ©rer le paquet depuis les dÃ©pÃ´ts officiels.\n# 1. On met Ã  jour le catalogue (RÃ©flexe !) sudo apt update # 2. On installe le paquet sudo apt install cmatrix Si le systÃ¨me vous demande confirmation [O/n], appuyez sur O (Oui) ou EntrÃ©e.\nÃ‰tape 3 : Le rÃ©sultat Maintenant, lancez la commande :\ncmatrix Votre terminal devrait se transformer en pluie de code numÃ©rique vert ! Appuyez sur F11 pour passer en plein Ã©cran.\nDetails Comment sortir ?\nVous Ãªtes coincÃ© dans la Matrice ? Pour quitter la plupart des programmes en terminal qui tournent en boucle, appuyez sur la touche q (Quit) ou utilisez la combinaison Ctrl + C.\nÃ‰tape 4 : Le nettoyage Lâ€™exercice est fini. DÃ©sinstallons le programme pour laisser la machine propre.\nsudo apt remove cmatrix Pourquoi un Ã©diteur texte ? Â« Imaginez : Le serveur de lâ€™entreprise a plantÃ©. Vous Ãªtes connectÃ© Ã  distance (SSH). Pas de souris. Pas de Word. Juste un Ã©cran noir. Comment vous rÃ©parez le fichier de config ? Â»\nSur Linux, la configuration ne se fait pas avec des cases Ã  cocher, mais en Ã©crivant du texte dans des fichiers .conf .\nGUI (Gedit, VS Code) : Confortable, mais inutile si vous nâ€™avez pas dâ€™interface graphique (99% des serveurs). Nano : Facile, les raccourcis sont Ã©crits en bas (^O, ^X). IdÃ©al pour dÃ©buter, mais limitÃ©. VI / VIM1: Il a fait ses preuves depuis plusieurs dÃ©cennies (1976 / 1991). InconvÃ©nient : Contre-intuitif au dÃ©but. Avantage : InstallÃ© par dÃ©faut sur TOUS les systÃ¨mes Unix/Linux du monde (mÃªme les routeurs). Si vous connaissez VI, vous pouvez tout rÃ©parer . 1. Le concept des â€œModesâ€ Câ€™est lÃ  que tout le monde bloque. VI est un Ã©diteur modal.\nOn trouve plusieurs modes :\nMode Commande (Normal) : Câ€™est le mode par dÃ©faut au dÃ©marrage. Les touches ne servent pas Ã  Ã©crire, mais Ã  agir. Par exemple, si vous tapez â€œjâ€, Ã§a ne sâ€™Ã©crit pas, Ã§a descend le curseur. Câ€™est dans ce mode quâ€™on peut: Supprimer, copier, couper, coller, sauvegarder. DÃ©placer le curseur (haut, bas, droite et gauche, avec quantificateurs). Rechercher des caractÃ¨res. Mode Insertion : Câ€™est le mode â€œNotepadâ€. Il permet dâ€™ajouter/insÃ©rer des caractÃ¨res. Dâ€™Ã©crire donc. Mode ligne de commande : Câ€™est le mode qui permet : ExÃ©cuter une commande externe. Remplacer une commande. Quitter, enregistrer, fermer le terminal. Details Pour passer de Commande Ã  Insertion, on tape i. Pour revenir, on tape toujours Esc (Ã‰chappement).\nConseil : Si vous Ãªtes perdu, utilisez la touche Esc jusquâ€™Ã  ce que Ã§a bip.\nLes commandes VIM Ã  connaitre Mode Insertion (Ã‰crire) Pour sortir de ce mode, appuyez sur ESC.\nTouche Action Position du curseur aprÃ¨s action i InsÃ©rer Avant le curseur a Ajouter AprÃ¨s le curseur I InsÃ©rer au dÃ©but Au tout dÃ©but de la ligne A Ajouter Ã  la fin Ã€ la toute fin de la ligne o Ouvrir (dessous) Sur une nouvelle ligne aprÃ¨s le curseur O Ouvrir (dessus) Sur une nouvelle ligne avant le curseur ESC Revenir au Mode Commande (Ã  faire si vous Ãªtes perdu) Mouvements (DÃ©placements) Touche DÃ©placement h Un caractÃ¨re Ã  gauche l (Lettre L) Un caractÃ¨re Ã  droite j Une ligne en bas k Une ligne en haut 0 (ZÃ©ro) Revient au dÃ©but de la ligne $ Va Ã  la fin de la ligne w Va au dÃ©but du mot suivant (word) e Va Ã  la fin du mot courant (end) b Va au dÃ©but du mot prÃ©cÃ©dent (back) gg Aller au tout dÃ©but du document (1Ã¨re ligne) G Aller Ã  la derniÃ¨re ligne du document G$ Aller Ã  la fin de la derniÃ¨re ligne :numÃ©ro (ex. :100) Aller Ã  une ligne prÃ©cise Details Une virgule (,) sera considÃ©rÃ©e comme un mot.\nQuantificateurs La plupart des commandes de mouvement ou dâ€™Ã©dition peuvent Ãªtre prÃ©cÃ©dÃ©es dâ€™un chiffre.\nCommande Action 2w Avancer de 2 mots 5j Descendre de 5 lignes 10dd Effacer 10 lignes Effacer et couper Note : Dans VI, â€œEffacerâ€ met le texte en mÃ©moire (comme â€œCouperâ€).\nCommande Action x Efface le caractÃ¨re sous le curseur dw Efface le mot sous le curseur de Efface jusquâ€™Ã  la fin du mot d$ Efface jusquâ€™Ã  la fin de la ligne dd Efface toute la ligne actuelle d2w Efface les 2 prochains mots 2dd Efface les 2 prochaines lignes Annuler et rÃ©tablir Touche Action u Annule la derniÃ¨re commande (undo) U Annule tous les changements sur la ligne courante CTRL + R RÃ©tablit lâ€™annulation (redo) Copier et coller Commande Action yy Copie la ligne courante (yank) Y Copie la ligne courante (Similaire Ã  yy) y$ Copie jusquâ€™Ã  la fin de la ligne p Colle le contenu aprÃ¨s le curseur (paste) P Colle le contenu avant le curseur r Remplace le caractÃ¨re sous le curseur (un seul) v0$y Copie la ligne (enchaÃ®nement : mode visuel, dÃ©but, fin, yank) Rechercher Commande Action / Recherche une occurrence vers le bas (ex: /mot) n Va Ã  lâ€™occurrence suivante N Va Ã  lâ€™occurrence prÃ©cÃ©dente % Va Ã  la parenthÃ¨se ou lâ€™accolade correspondante ( { [ ] } ) Gestion du fichier Commande Action :w Enregistre le fichier (write) :w nom Enregistre sous un nouveau nom (â€œEnregistrer sousâ€¦â€) :q Quitte (si aucune modification nâ€™a Ã©tÃ© faite) :q! Quitte sans enregistrer (Force la fermeture) :wq ou :x Enregistre et Quitte Remplacer (Search \u0026 Replace) Commande PortÃ©e Action :s/aa/bb Ligne courante Remplace la premiÃ¨re occurrence de â€œaaâ€ par â€œbbâ€ :s/aa/bb/g Ligne courante Remplace toutes les occurrences (global) :25,30s/aa/bb/g Lignes 25 Ã  30 Remplace dans la plage de lignes spÃ©cifiÃ©e :%s/aa/bb/g Fichier entier Remplace partout dans le fichier :%s/aa/bb/gc Fichier entier Remplace partout avec confirmation Ã  chaque fois Divers et commandes Shell Commande Action :set nu Affiche les numÃ©ros de ligne :set nonu Masque les numÃ©ros de ligne :set number Affiche les numÃ©ros de ligne (identique Ã  :set nu) :! cmd ExÃ©cute une commande shell temporairement (ex: :! ls) :r! cmd InsÃ¨re le rÃ©sultat dâ€™une commande shell dans le fichier (ex: :r! date) Details On ne veut pas Ãªtre des experts aujourdâ€™hui, on veut juste survivre. Voici les commandes vitales :\nEntrer : vi nom_fichier Ã‰crire : i (Insert) Sortir du mode Ã©criture : Esc (Toujours faire Ã§a aprÃ¨s avoir Ã©crit). Sauvegarder SANS Quitter : :w Sauvegarder et Quitter : :wq (Write Quit) ou ZZ. Quitter SANS sauvegarder : :q! (Le point dâ€™exclamation force la sortie). Supprimer une ligne : dd (En mode commande). DÃ©placement : h (haut), j (bas), k (droite), l(gauche), ou les flÃ¨ches. Quantificateurs : avec la plupart des commandes de mouvement ou dâ€™Ã©dition. Details Tutoriel directement sur VIM Pour acceder au tutoriel en franÃ§ais, dans le Terminal, tapez la commande:\netudiant@linux:~$ vimtutor fr VidÃ©o YouTube: Apprendre tout sur Vim ğŸŸ¢ Exercice 2 (en classe) Lancer vim Tapez i Tapez Bonjour Tapez Esc Tapez :wq ğŸŸ¢ Exercice 3 (en classe) Sans votre VM, pour chaque action, dites quelle(s) touche(s) du clavier vous utiliseriez:\nJe suis en mode Commande. Je veux Ã©crire â€˜Bonjourâ€™. Que fais-je ? Jâ€™ai fini dâ€™Ã©crire. Que fais-je ? Je veux supprimer ces 3 lignes rapidement. Que fais-je ? Jâ€™ai tout brisÃ©, je veux sortir sans rien casser. Que fais-je ? LABORATOIRE Objectif : Installer des programmes, crÃ©er et modifier des fichiers avec VI et Nano.\nUtiliser le fichier labo3.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nExercice 1 - Gestionnaire de paquets (30 min) Utilisez les commandes apt search (pour chercher) et apt show (pour vÃ©rifier) afin dâ€™identifier le nom exact des paquets correspondant aux descriptions suivantes. Ensuite, installez-les (install) et testez-les.\nDescription de lâ€™outil Indice de recherche Nom du paquet (Ã€ complÃ©ter) Commande pour tester Affiche une locomotive quand on se trompe en tapant ls. locomotive .................... sl Affiche le logo Linux Mint et les infos PC en couleur. system info .................... neofetch CrÃ©e des banniÃ¨res en texte gÃ©ant (ASCII art). large characters .................... figlet \"Mon Nom\" Un navigateur internet sans souris (mode texte). text mode web .................... links2 www.google.com Transforme le terminal en Ã©cran de hacker de cinÃ©ma. melodrama .................... hollywood Exercice 2 - Ã‰diteurs de texte (65 min) Ã‰tape 0 : Lâ€™Ã©chauffement avec Nano (10 min) Juste pour savoir que Ã§a existe.\nOuvrez le terminal. Tapez nano test_nano.txt. Ã‰crivez : â€œCeci est mon premier fichier.â€ Regardez en bas de lâ€™Ã©cran pour trouver comment quitter (^X signifie Ctrl+X). Sauvegardez en confirmant avec O (Oui) ou Y (Yes) et EntrÃ©e. Ã‰tape 1 : Le baptÃªme du feu VIM (15 min) On passe aux choses sÃ©rieuses.\nCrÃ©ation : vi cv.txt Insertion : Appuyez sur i. (Le mot -- INSERT -- apparaÃ®t en bas). Ã‰crivez votre Nom, PrÃ©nom et â€œTechnicien Informatiqueâ€. Appuyez sur Esc. (Le mot -- INSERT -- disparaÃ®t). Modification : Utilisez les flÃ¨ches (ou h j k l) pour aller sur la ligne â€œTechnicienâ€. Appuyez sur dd. La ligne disparaÃ®t ! (Câ€™est normal). Appuyez sur u (Undo). La ligne revient !. Sauvegarde : Tapez :wq et EntrÃ©e. Vous revenez au terminal. VÃ©rifiez que le fichier existe avec ls et lisez-le avec cat cv.txt. Ã‰tape 2 : Lâ€™admin systÃ¨me junior (25 min) Simulation dâ€™une tÃ¢che rÃ©elle.\nOn va copier un fichier systÃ¨me pour sâ€™entraÃ®ner sans risques. cp /etc/fstab ~/mon_fstab Ouvrez votre copie : vi mon_fstab. Mission de nettoyage : Supprimez toutes les lignes de commentaires (celles qui commencent par #) en utilisant dd. Ajoutez une nouvelle ligne Ã  la fin : // Disque de sauvegarde. Pour aller Ã  la fin du fichier rapidement : Tapez G (Majuscule G) en mode commande. Pour aller au dÃ©but : Tapez gg. Sauvegardez et quittez. Ã‰tape 3 : Le dÃ©fi (15 min) CrÃ©ez un fichier secret.txt avec VI. Il doit contenir exactement :\nLigne 1 : â€œMode Commandeâ€ Ligne 2 : â€œMode Insertionâ€ Ligne 3 : â€œSauvegarder avec :wqâ€ Contrainte : Si vous ouvrez le fichier et quâ€™il y a une faute ou une ligne vide en trop, recommencez.\nCorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)\nVIM câ€™est pour Vi IMproved, soit â€œvi amÃ©liorÃ©â€.Â â†©ï¸",
    "description": "Objectif de la semaine Comprendre les dÃ©pÃ´ts, mises Ã  jour (apt update/upgrade) et installation (apt install vim/htop). ÃŠtre capable de modifier un fichier de configuration sur un serveur distant sans souris. Utiliser le fichier exo-semaine3.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Gestion des paquets 1. La fin des fichiers .exe (Les dÃ©pÃ´ts) Sous Windows, quand vous voulez un logiciel, vous ouvrez le navigateur, vous cherchez un site (parfois douteux), vous tÃ©lÃ©chargez un .exe et vous cliquez sur â€œSuivant, Suivant, Suivantâ€.",
    "tags": [],
    "title": "Gestion de paquets et Ã©dition de texte",
    "uri": "/bloc-1/semaine-3/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "Objectif global Ã€ la fin de ce bloc, vous devez savoir manipuler les entrÃ©es/sorties des commandes pour crÃ©er des chaÃ®nes de traitement complexes, Ãªtre capable dâ€™ajouter, partitionner et monter un nouveau disque dur sur un systÃ¨me Linux et connecter la machine au rÃ©seau. Contenu des semaines 9 Ã  11 Semaine 9 : Redirections et filtres (\u003e, Pipes |, cut, grep, find) Semaine 10 : Disques et partitionnement (fdisk, mkfs, /etc/fstab). Semaine 11 : RÃ©seau (IP, SSH) et services (Systemd).",
    "description": "Objectif global Ã€ la fin de ce bloc, vous devez savoir manipuler les entrÃ©es/sorties des commandes pour crÃ©er des chaÃ®nes de traitement complexes, Ãªtre capable dâ€™ajouter, partitionner et monter un nouveau disque dur sur un systÃ¨me Linux et connecter la machine au rÃ©seau. Contenu des semaines 9 Ã  11 Semaine 9 : Redirections et filtres (\u003e, Pipes |, cut, grep, find) Semaine 10 : Disques et partitionnement (fdisk, mkfs, /etc/fstab). Semaine 11 : RÃ©seau (IP, SSH) et services (Systemd).",
    "tags": [],
    "title": "Redirections \u0026 filtres, disques et rÃ©seau",
    "uri": "/bloc-3/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "Objectif global Ã€ la fin de ce bloc, lâ€™Ã©tudiant doit Ãªtre capable dâ€™Ã©crire des scripts Bash pour automatiser des tÃ¢ches rÃ©pÃ©titives (sauvegardes, gestion dâ€™utilisateurs) et de les planifier dans le temps. Contenu des semaines 11 Ã  15 Semaine 12 : Introduction au scripting Bash Semaine 13 : Logique conditionnelle \u0026 tests sur fichiers Semaine 14 : Boucles (for, while) \u0026 planification (Cron) Semaine 15 : Examen final (35%)",
    "description": "Objectif global Ã€ la fin de ce bloc, lâ€™Ã©tudiant doit Ãªtre capable dâ€™Ã©crire des scripts Bash pour automatiser des tÃ¢ches rÃ©pÃ©titives (sauvegardes, gestion dâ€™utilisateurs) et de les planifier dans le temps. Contenu des semaines 11 Ã  15 Semaine 12 : Introduction au scripting Bash Semaine 13 : Logique conditionnelle \u0026 tests sur fichiers Semaine 14 : Boucles (for, while) \u0026 planification (Cron) Semaine 15 : Examen final (35%)",
    "tags": [],
    "title": "Automatisation \u0026 scripting",
    "uri": "/bloc-4/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Fondations \u0026 installation",
    "content": "Objectif de la semaine Passer de la â€œmanipulation fichier par fichierâ€ Ã  la â€œgÃ©nÃ©ration massive dâ€™argumentsâ€. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine4.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nPourquoi taper quand on peut gÃ©nÃ©rer ? â€œJusquâ€™Ã  prÃ©sent, si je vous demandais de crÃ©er 3 dossiers pour vos projets (projet_A, projet_B, projet_C), vous feriez 3 commandes ou vous taperiez les 3 noms. Câ€™est lent et sujet aux fautes de frappe. Aujourdâ€™hui, on va apprendre Ã  faire travailler le Shell pour nous. On ne va plus Ã©crire les noms de fichiers, on va Ã©crire une rÃ¨gle pour les gÃ©nÃ©rer.â€\nConcept clÃ© : Les accolades {} servent Ã  gÃ©nÃ©rer du texte avant mÃªme que la commande ne sâ€™exÃ©cute.\nLe mÃ©canisme de base : Les Listes Syntaxe : prefixe{terme1,terme2,terme3}suffixe RÃ¨gle dâ€™or : JAMAIS Dâ€™ESPACES aprÃ¨s les virgules ! Exemple : echo Je mange une {pomme,banane,poire} # RÃ©sultat : Je mange une pomme Je mange une banane Je mange une poire ğŸŸ¢ Exercice #1 (en classe) Contexte : Vous prÃ©parez lâ€™arborescence pour lâ€™annÃ©e. TÃ¢che : CrÃ©ez en une seule commande trois rÃ©pertoires nommÃ©s Session_1, Session_2 et Session_3. Commande Ã  trouver : mkdir Session_{1,2,3} Lâ€™automatisation numÃ©rique Au lieu de tout lister, on donne un dÃ©but et une fin. Syntaxe : {dÃ©but..fin} Lâ€™importance du â€œPaddingâ€ (ZÃ©ro non significatif) : Expliquez pourquoi 01 est mieux que 1 pour le tri informatique. ğŸŸ¢ Exercice #2 (en classe) Vous avez besoin de â€œfauxâ€ fichiers pour tester un script de tri.\nTÃ¢che : CrÃ©ez 20 fichiers vides nommÃ©s test_01.log jusquâ€™Ã  test_20.log. Commande Ã  trouver : touch test_{01..20}.log Challenge pour les rapides : CrÃ©ez aussi les fichiers test_A.log Ã  test_F.log ({A..F}). Lâ€™Ã©lÃ©ment vide Si on met une virgule sans rien avant (ou aprÃ¨s), cela gÃ©nÃ¨re â€œrienâ€. {a,} se dÃ©ploie en â€œaâ€ et â€œâ€. Câ€™est lâ€™outil ultime pour ajouter une extension sans retaper le nom dâ€™origine. ğŸŸ¢ Exercice #3 (en classe) Exercice 3 : La sauvegarde Ã©clair\nContexte : Vous allez modifier le fichier critique configuration.conf (crÃ©ez-le dâ€™abord avec touch). Vous devez en faire une copie .bak de sÃ©curitÃ©. Contrainte : Interdiction de retaper â€œconfiguration.confâ€ une deuxiÃ¨me fois. Commande Ã  trouver : cp configuration.conf{,.bak} Explication : Le shell transforme Ã§a en cp configuration.conf configuration.conf.bak Accolades {} vs Wildcards * Warning Câ€™est ici que les Ã©tudiants confondent tout.\nWildcard (*) : â€œJe regarde le disque. Je prends ce qui existe.â€ (Filtre) Accolades ({}) : â€œJe mâ€™en fiche du disque. Je crÃ©e des mots.â€ (GÃ©nÃ©rateur) ğŸŸ¢ Exercice #4 (en classe) CrÃ©ez les fichiers a.txt, b.txt et c.txt. Lancez : ls {a,b,c,d}.txt Lancez : ls [a-d].txt Question : Pourquoi la premiÃ¨re commande affiche-t-elle une erreur sur d.txt et pas la deuxiÃ¨me ? ğŸŸ¢ Exercice #5 (en classe) Contexte : Vous avez un dossier avec 100 images (img_1.jpg â€¦ img_100.jpg). TÃ¢che : Vous devez supprimer uniquement les images 2, 4 et 6. rm img_*.jpg est interdit (trop dangereux). Commande Ã  trouver : rm img_{2,4,6}.jpg Conclusion Pas dâ€™espaces dans les accolades. Utilisez {} pour crÃ©er (mkdir, touch) ou pour des listes prÃ©cises connues dâ€™avance. Utilisez * pour chercher ou sÃ©lectionner lâ€™inconnu. Utiliser le fichier devoir_accolades.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nDevoir maison :\nCrÃ©er la structure de projet web complÃ¨te en une ligne : MonSite/\râ”œâ”€â”€ assets/\râ”‚ â”œâ”€â”€ css/\râ”‚ â”œâ”€â”€ img/\râ”‚ â””â”€â”€ js/\râ”œâ”€â”€ index.html\râ””â”€â”€ contact.html EXAMEN PRATIQUE 1 (1h30) Examen 1 (Bloc 1): Temps allouÃ© : 90 minutes (1h30) PondÃ©ration : 20% Documentation permise : 1 feuille recto-verso manuscrite avec votre nom (Je la ramasserai aprÃ¨s lâ€™examen) Format : Examen pratique Consignes pour lâ€™enseignant :\nLâ€™examen se fait sur lâ€™ordinateur, dans la VM Linux Mint installÃ©e en Semaine 1 . Lâ€™accÃ¨s Internet/IA est interdit, ainsi que toute communication avec un.e autre Ã©tudiant.e. Livrable : Captures dâ€™Ã©cran EXAMEN (Simulation) SECTION A : Arborescence et navigation (15 points) Effectuez toutes les opÃ©rations suivantes comme si vous Ã©tiez en ligne de commande, ce qui veut dire que toutes les commandes doivent Ãªtre complÃ¨tes (commande + option + cible).\nVous Ãªtes Ã  cet emplacement: XXX. Positionnez vous dans votre dossier personnel (/home/etudiant). Quelles commandes (chemins absolu et relatif) permettent de le faire ? (2 points) Ã‰crire les commandes pour crÃ©er la structure de dossiers suivante (9 points: 2+3+4): EXAMEN_1\r|--- Sources\r|--- Backup\r|--- Projets\r|------- Web VÃ©rifiez que la structure est correcte. Quelle commande utiliseriez vous et Pourquoi ? (4 points) SECTION B : Manipulation de fichiers (15 points) Ã‰crire les commandes complÃ¨tes correspondantes. Au dÃ©part pour Ãªtes dans votre dossier personnel. Copiez le fichier systÃ¨me /etc/fstab vers votre dossier EXAMEN_1/Sources. Nommez la copie copie_fstab.(3 points) Copiez le fichier /etc/passwd vers votre dossier EXAMEN_1/Backup. (3 points) Renommez le fichier qui se trouve dans Backup : il doit sâ€™appeler copie_passwd.txt. (3 points) Supprimez le dossier Projets/Web (qui est vide). (3 points) DÃ©placez le fichier copie_fstab (qui est dans Sources) vers le dossier EXAMEN_1. (3 points) SECTION C : Ã‰dition de texte (VI/VIM) (15 points) Vous utilisez VI (ou VIM) pour crÃ©er un nouveau fichier nommÃ© reponses.txt Ã  lâ€™intÃ©rieur du dossier EXAMEN_1. Ã‰crire la commande nÃ©cessaire. Ce fichier doit contenir exactement les informations suivantes (sur 3 lignes). Ã‰crire les commandes : Ligne 1 : Votre Nom et PrÃ©nom Ligne 2 : Le code du cours (420-ZG4-MO) Ligne 3 : â€œJâ€™aime VIâ€ Sauvegardez et quittez lâ€™Ã©diteur proprement. Quelle commande faites-vous ? Vous vous rendez compte que vous avez oubliÃ© dâ€™Ã©crire le numÃ©ro de votre groupe dans le fichier. Quelles commandes faites-vous pour pouvoir lâ€™ajouter sur une 4e ligne ? Ligne 4 : Le numÃ©ro du groupe SECTION D : Question gÃ©nÃ©rale (Recherche) (5 points) Votre collÃ¨ge AndrÃ© Mathieu doit faire des tests pour son patron. Il a tapÃ© la commande ci-dessous sur son terminal Linux (Mint) : $ mkdir /root/mes_projets Cependant, Ã§a ne veut pas fonctionner et pire encore, il a un message qui dit \"Permission denied\" Expliquez pourquoi. (3 points) Que pourriez-vous suggerer Ã  AndrÃ© pour quâ€™il puisse faire ces tests ? (2 points) GRILLE DE CORRECTION (Pour le prof) Total : /50 points (ramenÃ© Ã  20%)\nStructure Dossiers (15 pts) :\nDossier EXAMEN_1 prÃ©sent : 2 pts\nSous-dossiers Sources, Backup, Projets : 6 pts (2 ch.)\nSous-dossier Web absent (car supprimÃ© en C.4) : 2 pts\nFichiers (15 pts) :\nfstab prÃ©sent dans EXAMEN_1 (dÃ©placÃ© de Sources) : 5 pts\nSources est vide : 2 pts\nusers_save.txt prÃ©sent dans Backup : 5 pts\npasswd absent de Backup (car renommÃ©) : 3 pts\nVI (15 pts) :\nFichier reponses.txt existe : 2 pts\nContenu correct (3 lignes) : 5 pts\nPas de fichier .swp (signe dâ€™un crash VI mal fermÃ©) : 3 pts\nGÃ©nÃ©rale (5 pts) :\nMention du rÃ´le (pouvoirs) : 3 pts\nSuggestion sÃ©curitaire (ex: faire les tests sur une copie) : 2 pts",
    "description": "Objectif de la semaine Passer de la â€œmanipulation fichier par fichierâ€ Ã  la â€œgÃ©nÃ©ration massive dâ€™argumentsâ€. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine4.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nPourquoi taper quand on peut gÃ©nÃ©rer ? â€œJusquâ€™Ã  prÃ©sent, si je vous demandais de crÃ©er 3 dossiers pour vos projets (projet_A, projet_B, projet_C), vous feriez 3 commandes ou vous taperiez les 3 noms. Câ€™est lent et sujet aux fautes de frappe. Aujourdâ€™hui, on va apprendre Ã  faire travailler le Shell pour nous. On ne va plus Ã©crire les noms de fichiers, on va Ã©crire une rÃ¨gle pour les gÃ©nÃ©rer.â€",
    "tags": [],
    "title": "L'expansion d'accolades et Examen 1",
    "uri": "/bloc-1/semaine-4/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Administration systÃ¨me \u0026 sÃ©curitÃ©",
    "content": "Objectifs de la semaine Comprendre lâ€™identitÃ© numÃ©rique sous Linux (UID, GID) et le concept de groupe primaire vs secondaire. Auditer les fichiers systÃ¨me (/etc/passwd, /etc/shadow et /etc/group). GÃ©rer le cycle de vie des comptes (crÃ©ation, modification, suppression, verrouillage). Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine5.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Linux est un systÃ¨me multi-utilisateurs strict. Pour le noyau, vous nâ€™Ãªtes pas un nom, mais une sÃ©rie de numÃ©ros.\nLes identifiants (UID \u0026 GID) Chaque utilisateur possÃ¨de un UID (User ID) et appartient Ã  un groupe principal identifiÃ© par un GID (Group ID).\nPlage dâ€™UID RÃ´le Description 0 Root Lâ€™administrateur suprÃªme. AccÃ¨s total et illimitÃ©. 1 Ã  999 SystÃ¨me Comptes pour les services (ex: www-data pour le web). Pas de connexion humaine. 1000+ Humains Utilisateurs rÃ©els. Le premier compte crÃ©Ã© reÃ§oit souvent lâ€™UID 1000. Groupes primaires vs secondaires Câ€™est une distinction cruciale pour la gestion des droits sous Linux.\n1. Le groupe primaire (IdentitÃ© de base) DÃ©finition : Câ€™est le groupe inscrit directement dans le fichier /etc/passwd. RÃ´le : Lorsquâ€™un utilisateur crÃ©e un fichier, ce fichier appartient automatiquement Ã  son groupe primaire. RÃ¨gle : Un utilisateur a exactement un seul groupe primaire. Usage : Sous les distributions modernes (Ubuntu, Debian, CentOS), Linux crÃ©e par dÃ©faut un groupe portant le mÃªme nom que lâ€™utilisateur (ex: lâ€™utilisateur albert a pour groupe primaire albert). 2. Les groupes secondaires (Les permissions) DÃ©finition : Ce sont tous les autres groupes auxquels appartient lâ€™utilisateur (dÃ©finis dans /etc/group). RÃ´le : Ils servent Ã  donner des accÃ¨s supplÃ©mentaires (ex: accÃ¨s au groupe sudo pour administrer, docker pour gÃ©rer des conteneurs, ou comptabilite pour lire des rapports). RÃ¨gle : Un utilisateur peut appartenir Ã  une infinitÃ© de groupes secondaires (ou aucun). Details Les groupes peuvent Ãªtre spÃ©cifiÃ©s par leur GID ou leur nom.\nLe groupe wheel Le groupe wheel permet Ã  ses membres dâ€™utiliser des commandes avec des privilÃ¨ges administratifs grÃ¢ce Ã  sudo. Les fichiers de configuration Linux utilise trois fichiers texte simples pour gÃ©rer la sÃ©curitÃ© :\n1. Le fichier /etc/passwd (Lâ€™annuaire) Tout le monde peut le lire. Il dÃ©finit les comptes.\nFormat : nom:x:UID:GID:Commentaire:Home:Shell Exemple : etudiant:x:1000:1000:Etudiant,,,:/home/etudiant:/bin/bash Le 4Ã¨me champ (1000) est le GID du groupe primaire. 2. Le fichier /etc/shadow (Les secrets) Contient les mots de passe chiffrÃ©s (hashs). Seul root peut y accÃ©der.\nDetails Si vous voyez ! ou * Ã  la place du hash, le compte est verrouillÃ©.\n3. Le fichier /etc/group (Les clubs) DÃ©finit les noms des groupes et liste les membres secondaires.\nFormat : nom_groupe:x:GID:liste_membres_secondaires Exemple : sudo:x:27:albert,nancy (Albert et Nancy sont membres secondaires du groupe sudo). Les commandes de gestion 1. CrÃ©ation (useradd) La syntaxe useradd [options] [nom_utilisateur]\nLa commande useradd est prÃ©cise mais minimaliste. On doit alors lâ€™utiliser avec des options. Voici les plus courantes.\n# -u : SpÃ©cifie un UID. # -c : Ajoute un commentaire pour les archives. # -m : CrÃ©e le dossier personnel. # -g : DÃ©finit le groupe PRIMAIRE (par nom ou GID) # -G : DÃ©finit les groupes SECONDAIRES (sÃ©parÃ©s par des virgules) # -s : DÃ©finit le Shell par dÃ©faut (ex: `/bin/bash`) # -e : DÃ©finit une date d'expiration. sudo useradd -m -g users -G sudo,devs -s /bin/bash alfred Details Lâ€™utilisateur sera ajoutÃ© Ã  la derniÃ¨re ligne du fichier etc/passwd. Vous pouvez ensuite vÃ©rifier lâ€™utilisateur ajoutÃ© dans le fichier:\ntail -1 /etc/passwd Details CrÃ©ation dâ€™un utilisateur avec adduser\nEn rÃ©alitÃ©, adduser est lâ€™implÃ©mentation standard sur les systÃ¨mes Debian et Ubuntu qui agit comme un â€œwrapperâ€ (emballage) autour de lâ€™outil de bas niveau useradd pour offrir cette interface interactive et simplifiÃ©e.\n2. Modification (usermod) Câ€™est ici que lâ€™on gÃ¨re les promotions ou changements de service.\nDetails Le piÃ¨ge classique : Si vous faites usermod -G projet_a alfred, vous Ã©crasez tous ses anciens groupes secondaires. Sâ€™il Ã©tait admin, il ne lâ€™est plus !\nLa rÃ¨gle dâ€™or : Toujours utiliser -a (Append) avec -G.\n# âœ… BONNE PRATIQUE : Ajoute le groupe sans supprimer les anciens sudo usermod -aG comptabilite alfred # Modifier le groupe primaire (rarement utilisÃ©) sudo usermod -g nouveaux_membres alfred 3. VÃ©rification (id et groups) Pour savoir qui appartient Ã  quoi :\nid alfred # Affiche : uid=1001(alfred) gid=100(users) groupes=100(users),27(sudo),1005(comptabilite) ğŸŸ¢ Exercice (en classe) CrÃ©er un groupe nommÃ© direction. CrÃ©er un utilisateur pdg avec /bin/bash et son dossier personnel. Assigner pdg au groupe direction en tant que groupe primaire (utilisez -g). Ajouter pdg au groupe sudo en tant que groupe secondaire (utilisez -aG). VÃ©rifier avec id pdg. Que remarquez-vous sur la position du groupe direction ? 4. Verrouillage et suppression 1. Le piÃ¨ge du Shell vide Si votre utilisateur voit un $ au lieu de utilisateur@machine:~$ et que les flÃ¨ches du clavier ne fonctionnent pas, câ€™est quâ€™il est sur le shell sh (basique).\nCorrection : sudo usermod -s /bin/bash nom_utilisateur\n2. Verrouiller sans supprimer En cas de dÃ©part temporaire ou enquÃªte :\nsudo passwd -l alfred # Lock (verrouille) sudo passwd -u alfred # Unlock (dÃ©verrouille) 3. Suppression propre sudo userdel -r alfred # -r supprime aussi le dossier /home/alfred Laboratoire Objectif : Simuler lâ€™arrivÃ©e de nouveaux employÃ©s dans une entreprise.\nUtiliser le fichier labo5.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nVous Ãªtes administrateur systÃ¨me pour la start-up â€œMomo420â€.\nEmbauche : CrÃ©er les comptes pour les nouveaux dÃ©veloppeurs (avec dossier home). SÃ©curitÃ© : Forcer le changement de mot de passe Ã  la premiÃ¨re connexion. Groupes : CrÃ©er un groupe devs et y ajouter les utilisateurs. DÃ©part : Un stagiaire quitte lâ€™entreprise. Verrouillez son compte sans supprimer ses fichiers. Ã‰tape 1 : Audit Utilisez grep pour trouver votre utilisateur dans /etc/passwd. Essayez de lire /etc/shadow. Que se passe-t-il ?. Utilisez sudo cat /etc/shadow pour voir la diffÃ©rence. Ã‰tape 2 : Recrutement massif Vous Ãªtes lâ€™admin systÃ¨me.\nCrÃ©ez deux groupes:\ncomptabilite informatique CrÃ©ez 3 utilisateurs (avec useradd ou adduser):\nandre (dans le groupe comptabilite). sylvie (dans le groupe informatique). charles (dans le groupe informatique aussi). Assignez leur le mot de passe : Cegep.\nÃ‰tape 3 : Gestion des groupes andre a obtenu une promotion. Ajoutez-le au groupe sudo (ou wheel) pour quâ€™il devienne administrateur. Commande : usermod -aG sudo andre (Attention au -a pour Append, sinon on Ã©crase ses autres groupes !).\nVÃ©rifiez les groupes de Andre avec la commande groups andre. CorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectifs de la semaine Comprendre lâ€™identitÃ© numÃ©rique sous Linux (UID, GID) et le concept de groupe primaire vs secondaire. Auditer les fichiers systÃ¨me (/etc/passwd, /etc/shadow et /etc/group). GÃ©rer le cycle de vie des comptes (crÃ©ation, modification, suppression, verrouillage). Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine5.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx",
    "tags": [],
    "title": "Gestion des Utilisateurs",
    "uri": "/bloc-2/semaine-5/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Administration systÃ¨me \u0026 sÃ©curitÃ©",
    "content": "Objectifs de la semaine DÃ©chiffrer la ligne cryptique drwxr-xr-x commande ls -l. Comprendre la diffÃ©rence entre les droits sur un fichier et sur un dossier. Manipuler les permissions avec chmod (Mode Symbolique et Octal). GÃ©rer les propriÃ©taires avec chown, les groupes avec chgrp. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine6.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Qui a le droit ? (Les 3 identitÃ©s) Sous Linux, chaque fichier appartient Ã  un propriÃ©taire et Ã  un groupe. Quand vous essayez dâ€™ouvrir un fichier, Linux se pose trois questions dans lâ€™ordre :\nEst-ce le propriÃ©taire (User - u) ? â€œCâ€™est mon fichier Ã  moi.â€ Est-ce un membre du Groupe (Group - g) ? â€œCâ€™est un fichier de mon Ã©quipe.â€ Est-ce nâ€™importe qui dâ€™autre (Others - o) ? â€œCâ€™est le reste du monde.â€ Details User (u) : Vous. Vous avez les clÃ©s de votre chambre.\nGroup (g) : Votre famille. Ils ont les clÃ©s de la maison (salon, cuisine), mais pas forcÃ©ment de votre journal intime.\nOthers (o) : Les passants dans la rue. Ils peuvent voir la faÃ§ade (lecture), mais ne peuvent pas entrer.\nQuels sont les pouvoirs ? (R, W, X) Il existe trois permissions fondamentales.\nWarning Attention, elles nâ€™ont pas le mÃªme sens pour un fichier et un dossier !\nLettre Pouvoir Sur un FICHIER ğŸ“„ Sur un DOSSIER ğŸ“ r Read (Lire) Voir le contenu (cat, vim). Lister les fichiers (ls). w Write (Ã‰crire) Modifier ou supprimer le contenu. CrÃ©er ou supprimer des fichiers dans ce dossier. x eXecute (ExÃ©cuter) Lancer le programme (script). Entrer dans le dossier (cd). Details Avoir le droit de lecture (r) sur un dossier permet de voir les noms des fichiers (ls), mais si vous nâ€™avez pas le droit dâ€™exÃ©cution (x), vous ne pouvez pas â€œtraverserâ€ le dossier pour lire les fichiers Ã  lâ€™intÃ©rieur !\nEn rÃ©sumÃ© : Pour un dossier, on donne presque toujours r et x ensemble.\nğŸŸ¢ Exercice 1 (En classe) Traduisez ces lignes en franÃ§ais.\n-rw-r--r-- jean compta rapport.txt RÃ©ponse : Jean peut lire/Ã©crire. Le groupe Compta peut lire. Les autres peuvent lire. Câ€™est un fichier standard. drwxr-x--- marie devs projet_secret RÃ©ponse : Marie a tous les droits. Les devs peuvent entrer et lister. Les autres nâ€™ont aucun accÃ¨s. Câ€™est un dossier. La notation octale (4, 2, 1) Les administrateurs prÃ©fÃ¨rent les chiffres aux lettres. Câ€™est plus rapide. Chaque permission a une valeur :\nRead (r) = 4 Write (w) = 2 Execute (x) = 1 Rien (-) = 0 On additionne ces chiffres pour obtenir un score par identitÃ©.\nExemple : rwx = 4 + 2 + 1 = 7.\nExemple : r-x = 4 + 0 + 1 = 5.\nTableau de conversion binaire â€“\u003e octal (Ã€ apprendre par cÅ“ur) :\nSymbole Binaire Octal Signification rwx 111 7 Tout permis rw- 110 6 Lecture + Ã‰criture r-x 101 5 Lecture + ExÃ©cution r-- 100 4 Lecture seule --- 000 0 Aucun accÃ¨s ğŸŸ¢ Exercice 2 (En classe) Calculez le code octal pour ces situations :\nJe veux lire et Ã©crire, mais pas exÃ©cuter. (4 + 2 + 0) = ? Je veux tout interdire. (0 + 0 + 0) = ? Je veux lire et exÃ©cuter (cas typique script web). (4 + 0 + 1) = ? Le grand classique : Moi jâ€™ai tout (7), mon groupe lit et exÃ©cute (5), les autres ne font rien (0). Code = ? La commande chmod (Change Mode) Maintenant que vous savez calculer les droits, il faut savoir les appliquer. La commande sâ€™appelle chmod. Il existe deux faÃ§ons de lâ€™utiliser : la mÃ©thode â€œMathÃ©matiqueâ€ (octal) et la mÃ©thode â€œSymboliqueâ€ (lettres).\n1. MÃ©thode A : Le mode octal Câ€™est la mÃ©thode la plus rapide. On donne le score total pour chaque identitÃ© dâ€™un seul coup.\nSyntaxe : chmod [User][Group][Other] fichier\n# Exemple 1 : Le classique \"Lecture/ExÃ©cution\" # User(7) = rwx, Group(5) = r-x, Other(5) = r-x chmod 755 script.sh # Exemple 2 : Le fichier \"Top Secret\" # User(6) = rw-, Group(0) = ---, Other(0) = --- chmod 600 secrets.txt 2. MÃ©thode B : Le mode symbolique Parfois, vous ne voulez pas tout recalculer, vous voulez juste ajouter ou enlever un droit prÃ©cis. Syntaxe : chmod [Qui][Action][Quoi] fichier\nQui : u (user), g (group), o (other), a (all/tous). Action : + (ajouter), - (enlever), = (fixer exactement). Quoi : r, w, x. # Ajouter le droit d'exÃ©cution Ã  tout le monde (All + Execute) chmod a+x script.sh # Enlever le droit d'Ã©criture aux \"autres\" (Other - Write) chmod o-w rapport.txt # Donner Ã  mon groupe seulement le droit de lecture (Ã©crase les anciens droits) chmod g=r document.pdf Details Si vous changez les droits dâ€™un dossier, cela ne change pas automatiquement les fichiers Ã  lâ€™intÃ©rieur !\nPour appliquer les droits au dossier ET Ã  tout son contenu (enfants, petits-enfantsâ€¦), utilisez lâ€™option majuscule -R.\nchmod -R 755 /opt/mon_dossier_web La commande chown (Change Owner) Changer les permissions (chmod) est inutile si le fichier nâ€™appartient pas Ã  la bonne personne. La commande chown permet de modifier le propriÃ©taire dâ€™un fichier ou dâ€™un dossier.\nDetails Seul lâ€™administrateur (root) ou un utilisateur avec les droits sudo peut changer le propriÃ©taire dâ€™un fichier pour des raisons de sÃ©curitÃ©.\nSyntaxe : chown [utilisateur] fichier\n# TransfÃ©rer la propriÃ©tÃ© Ã  l'utilisateur \"alice\" sudo chown alice rapport.txt # On peut aussi changer le groupe en mÃªme temps avec le format utilisateur:groupe sudo chown alice:comptabilite rapport.txt ğŸŸ¢ Exercice 3 (En classe) CrÃ©ez un fichier vide : touch test.txt VÃ©rifiez ses droits : ls -l test.txt Interdisez tout Ã  tout le monde : chmod 000 test.txt Essayez de le lire : cat test.txt (Permission denied) Redonnez vous les droits : chmod 700 test.txt La commande chgrp (Change Group) Si vous voulez uniquement modifier le groupe propriÃ©taire dâ€™un fichier sans toucher Ã  lâ€™utilisateur, on utilise la commande chgrp.\nSyntaxe : chgrp [groupe] fichier\n# Changer le groupe du fichier pour \"developpeurs\" sudo chgrp developpeurs code_source.py ğŸŸ¢ Exercice 4 (En classe) Quelle commande utiliseriez vous pour donner la propriÃ©tÃ© dâ€™un fichier nommÃ© â€˜rapport.txtâ€™ Ã  lâ€™utilisateur â€™nicolasâ€™ ?\nA. chmod nicolas rapport.txt\nB. sudo edit owner nicolas rapport.txt\nC. chown nicolas rapport.txt\nD. chgrp nicolas rapport.txt\nRÃ©capitulatif : PropriÃ©tÃ© vs Permissions Il est crucial de comprendre lâ€™ordre logique dâ€™administration Linux :\nchown : â€œÃ€ qui appartient cet objet ?â€ chmod : â€œQuâ€™est-ce que ce propriÃ©taire a le droit de faire ?â€ Commande Action Exemple chmod Modifie les droits (rwx) chmod 644 file.txt chown Modifie le propriÃ©taire (user) chown bob file.txt chgrp Modifie le groupe (group) chgrp staff file.txt RÃ©capitulatif : Le mode rÃ©cursif (-R) Tout comme pour chmod, si vous travaillez sur un dossier contenant des dizaines de sous-fichiers, vous ne voulez pas les modifier un par un. Lâ€™option -R (Recursive) sâ€™applique ici aussi.\n# Donne la propriÃ©tÃ© de tout le site web Ã  l'utilisateur \"www-data\" # ainsi qu'Ã  tous les fichiers et sous-dossiers contenus dedans. sudo chown -R www-data:www-data /var/www/html Warning Soyez prudent avec chown -R ! Une erreur de dossier peut rendre votre systÃ¨me instable si vous changez par erreur le propriÃ©taire de fichiers systÃ¨me critiques.\nLaboratoire Utiliser le fichier labo6.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nVous Ãªtes lâ€™administrateur systÃ¨me. Vous devez mettre en place une structure de dossiers sÃ©curisÃ©e pour deux dÃ©partements.\nÃ‰tape 1 : PrÃ©paration (utilisateurs et groupes) RÃ©vision de la semaine passÃ©e.\nCrÃ©ez deux utilisateurs : valerie et pierre. CrÃ©ez deux groupes : direction et comptabilite. Ajoutez valerie au groupe direction. Ajoutez pierre au groupe comptabilite. Ã‰tape 2 : Le dossier public CrÃ©ez un dossier /opt/public.\nPropriÃ©taire : Root. Groupe : Root. Consigne : Tout le monde doit pouvoir lire, Ã©crire et naviguer dedans. Test : Connectez vous en tant que ValÃ©rie, crÃ©ez un fichier dedans. Connectez vous en Pierre, modifiez le fichier de ValÃ©rie. Ã‰tape 3 : Le dossier confidentiel (Direction) CrÃ©ez un dossier /opt/vip.\nPropriÃ©taire : ValÃ©rie. Groupe : Direction. Consigne : ValÃ©rie a tous les droits. Le groupe direction peut lire et entrer, mais pas modifier. Les autres (Pierre/Comptabilite) ne doivent mÃªme pas pouvoir entrer. DÃ©fi : Trouvez le chmod et le chown nÃ©cessaires. Ã‰tape 4 : Le transfert de propriÃ©tÃ© Pierre a Ã©crit un rapport important bilan.txt dans son dossier personnel. Il quitte lâ€™entreprise.\nEn tant que Pierre, crÃ©ez le fichier. En tant quâ€™Admin (vous), transfÃ©rez la propriÃ©tÃ© du fichier Ã  ValÃ©rie. VÃ©rifiez avec ls -l que ValÃ©rie est bien la nouvelle propriÃ©taire. Ã‰tape 5 : Le dossier temporaire Situation : Dans le dossier /opt/public (crÃ©Ã© Ã  lâ€™Ã©tape 2), Pierre sâ€™amuse Ã  supprimer les fichiers de ValÃ©rie. Câ€™est un problÃ¨me.\nCherchez ce quâ€™est le â€œSticky Bitâ€ sur internet. Appliquez-le sur /opt/public (chmod +t ou 1777). VÃ©rifiez maintenant : Pierre peut Ã©crire, mais peut-il supprimer un fichier qui appartient Ã  ValÃ©rie ? Details Pour ce laboratoire, en plus des captures dâ€™Ã©cran habituelles, vous devez aussi remettre le rÃ©sultat de votre recherche Internet sur le â€œSticky Bitâ€.\nCorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectifs de la semaine DÃ©chiffrer la ligne cryptique drwxr-xr-x commande ls -l. Comprendre la diffÃ©rence entre les droits sur un fichier et sur un dossier. Manipuler les permissions avec chmod (Mode Symbolique et Octal). GÃ©rer les propriÃ©taires avec chown, les groupes avec chgrp. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine6.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx",
    "tags": [],
    "title": "Permissions \u0026 droits d'accÃ¨s",
    "uri": "/bloc-2/semaine-6/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Administration systÃ¨me \u0026 sÃ©curitÃ©",
    "content": "Objectif de la semaine Comprendre comment Linux gÃ¨re les programmes, apprendre Ã  les surveiller, les mettre en pause, et les arrÃªter proprement (ou brutalement) Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine7.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Quâ€™est-ce quâ€™un processus ? Imaginez un livre de cuisine.\nLe Programme (fichier sur le disque), câ€™est la recette Ã©crite dans le livre. Elle est inerte. Le Processus, câ€™est lâ€™action de cuisiner cette recette. Câ€™est vivant, Ã§a utilise des ingrÃ©dients (RAM) et du temps de chef (CPU). DÃ¨s que vous lancez un programme, Linux lui attribue un badge dâ€™identification unique : le PID (Process ID).\nNote importante : Si un programme plante, Linux continue de tourner. Il suffit de retirer le badge (tuer le PID) pour nettoyer la situation.\nSurveillance : Lâ€™art de savoir ce qui tourne Pour agir, il faut dâ€™abord voir. Linux nous offre trois niveaux de vision.\n1. Lâ€™arbre gÃ©nÃ©alogique : pstree Les processus ne naissent pas de nulle part ; ils sont lancÃ©s par des â€œparentsâ€.\nCommande : pstree Ce quâ€™on voit : Lâ€™arbre gÃ©nÃ©alogique. Vous verrez que systemd (PID 1) est lâ€™ancÃªtre commun de tous. 2. La photo : ps Câ€™est une â€œphoto instantanÃ©eâ€ du systÃ¨me.\nLa commande reine : ps aux\na : Tous les utilisateurs (pas juste vous).\nu : Affiche les dÃ©tails utiles (Utilisateur, CPU%, RAM%).\nx : Affiche aussi les processus â€œinvisiblesâ€ (services dâ€™arriÃ¨re-plan).\nLâ€™astuce du dÃ©tective : Souvent, la liste est trop longue. On utilise grep pour filtrer :\nps aux | grep firefox 3. En temps rÃ©el (VidÃ©o) : htop Câ€™est le â€œGestionnaire des tÃ¢chesâ€ dynamique.\nCommande : htop Navigation : Utilisez les flÃ¨ches pour choisir un processus. F9 pour tuer, F10 (ou q) pour quitter. ğŸŸ¢ Exercice 1 (En classe) Objectif : Comprendre les colonnes de ps aux.\nSoit cette fausse ligne de rÃ©sultat ps:\nUSER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND root 1 0.0 0.1 168664 13084 ? Ss 09:21 0:04 /sbin/init etudiant 4021 95.0 2.5 500200 50000 pts/0 R+ 10:00 5:00 ./minage_crypto Quel processus est en train de faire surchauffer le processeur ? Est-ce que ce processus appartient Ã  lâ€™administrateur ? Le processus PID 1 a-t-il un terminal attachÃ© (TTY) ? ArrÃªter des processus Quand un processus ne rÃ©pond plus, on ne redÃ©marre pas le PC. On lui envoie un Signal.\n1. Les deux armes principales Commande Analogie Description kill [PID] Le Sniper Vise un processus prÃ©cis par son numÃ©ro. Ex: kill 4512 | | killall [Nom] | La Grenade | Vise tous les processus ayant ce nom. Ex: killall firefox (Ferme toutes les fenÃªtres). |\n2. La force du signal Par dÃ©faut, kill est gentil. Mais on peut Ãªtre mÃ©chant.\na. Niveau 1 : La demande polie (SIGTERM -15)\nCâ€™est le dÃ©faut (kill 1234). Signification : â€œSâ€™il te plaÃ®t, sauvegarde ton travail et ferme-toi.â€ Le processus peut refuser sâ€™il est plantÃ©. b. Niveau 2 : Lâ€™arrÃªt forcÃ© (SIGKILL -9)\nCommande : kill -9 1234 Signification : â€œLa police tâ€™expulse immÃ©diatement.â€ Le processus disparaÃ®t instantanÃ©ment sans sauvegarder. Ã€ utiliser en dernier recours. ğŸŸ¢ Exercice 2 (En classe) Objectif : Choisir le bon signal (SIGTERM vs SIGKILL).\nâ€œVotre navigateur Firefox (PID 345) est gelÃ©. Il consomme trop de RAM, mais vous aviez des onglets importants ouverts.â€\nQuelle est la premiÃ¨re commande Ã  tenter ? Si elle ne fonctionne pas aprÃ¨s 10 secondes, quelle est la commande de la derniÃ¨re chance ? Processus en avant-plan et en arriÃ¨re-plan (MultitÃ¢che) Par dÃ©faut, si vous lancez une commande longue (ex: une copie de gros fichiers), votre terminal est bloquÃ©. Vous ne pouvez plus rien taper tant que ce nâ€™est pas fini.\n1. La solution : processus en background (\u0026) Pour lancer une commande directement en arriÃ¨re-plan, ajoutez une esperluette \u0026 Ã  la fin.\nsleep 1000 \u0026 # Le terminal vous rend la main tout de suite ! 2. La mÃ©thode â€œOups, jâ€™ai oubliÃ©â€ (Gestion des jobs) Vous avez lancÃ© une commande et elle bloque votre terminal ? Pas de panique.\nMettre en pause : Faites Ctrl + Z. Le processus est figÃ© (Stopped). Envoyer au fond : Tapez bg (Background). Le processus reprend son travail, mais en arriÃ¨re-plan. VÃ©rifier : Tapez jobs pour voir vos tÃ¢ches de fond. RÃ©cupÃ©rer : Tapez fg (Foreground) pour ramener le processus devant vous. La persistance des processus (Survivre Ã  la fermeture) Si vous fermez votre terminal (ou si votre connexion SSH coupe), tous vos processus enfants meurent. Câ€™est la chaÃ®ne de commandement : si le chef part, lâ€™Ã©quipe est dissoute.\n**La solution prÃ©ventive : nohup** nohup (No Hang Up) immunise le processus contre la fermeture du terminal.\nnohup python mon_script_long.py \u0026 Le script continuera de tourner mÃªme si vous fermez la fenÃªtre. Les messages (logs) seront Ã©crits dans un fichier nohup.out. ğŸŸ¢ Exercice 3 (En classe) Objectif : MÃ©moriser la sÃ©quence de mise en arriÃ¨re-plan.\nâ€œVous lancez la commande gedit mon_fichier.txt et zut ! Le terminal est bloquÃ©. Vous ne pouvez plus taper de commandes.â€\nDonnez moi la combinaison de touches et la commande pour rÃ©cupÃ©rer le terminal sans fermer lâ€™Ã©diteur de texte.\nLaboratoire Utiliser le fichier labo7.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nVous Ãªtes administrateur systÃ¨me. Vous devez gÃ©rer plusieurs tÃ¢ches simultanÃ©es et nettoyer des processus rÃ©calcitrants sans redÃ©marrer la machine.\nExercice 1 : Gestion des jobs Objectif : MaÃ®triser le Ctrl+Z, bg et fg.\nLancez une commande qui ne fait rien pendant 500 secondes : sleep 500 (Constatez que votre terminal est bloquÃ©). 2. Utilisez le raccourci clavier pour mettre le processus en Pause. 3. VÃ©rifiez lâ€™Ã©tat avec la commande jobs. 4. Relancez le processus en ArriÃ¨re-plan (sans bloquer le terminal). 5. Ramenez le processus au Premier plan, puis annulez-le dÃ©finitivement avec Ctrl + C.\nExercice 2 : La surveillance Objectif : Trouver un PID spÃ©cifique.\nLancez un Ã©diteur de texte en arriÃ¨re-plan (pour quâ€™il ne bloque pas le terminal) : nano \u0026 (Note : nano va se mettre en pause car il attend une saisie, câ€™est normal). 2. Utilisez ps aux combinÃ© avec un â€œpipeâ€ | et grep pour trouver la ligne correspondant Ã  nano. 3. Notez le PID de nano (le numÃ©ro dans la 2Ã¨me colonne).\nExercice 3 : Les signaux Objectif : Tuer proprement puis salement.\nRelancez trois processus â€œsommeilâ€ en arriÃ¨re-plan : sleep 2000 \u0026 sleep 3000 \u0026 sleep 4000 \u0026 Affichez la liste avec jobs. Tuez le dernier sleep en utilisant kill et son PID (trouvÃ© via ps ou affichÃ© lors du lancement). Utilisez la mÃ©thode â€œGrenadeâ€ pour tuer tous les processus sleep restants dâ€™un seul coup : killall sleep VÃ©rifiez avec jobs quâ€™il ne reste plus rien. Exercice 4 : La persistance Objectif : Lancer un processus qui survit Ã  la fermeture.\nLancez un processus avec nohup : nohup sleep 500 \u0026 Fermez complÃ¨tement votre terminal (ou dÃ©connectez vous). Rouvrez un nouveau terminal. VÃ©rifiez si le processus tourne toujours. Comme ce nâ€™est plus votre enfant â€œdirectâ€ (votre ancien terminal est mort), jobs ne le verra pas. Il faut utiliser le radar global : ps aux | grep sleep Bravo ! Vous avez crÃ©Ã© un processus indÃ©pendant. Tuez-le pour nettoyer le systÃ¨me. CorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectif de la semaine Comprendre comment Linux gÃ¨re les programmes, apprendre Ã  les surveiller, les mettre en pause, et les arrÃªter proprement (ou brutalement) Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine7.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Quâ€™est-ce quâ€™un processus ? Imaginez un livre de cuisine.",
    "tags": [],
    "title": "Gestion des processus",
    "uri": "/bloc-2/semaine-7/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Administration systÃ¨me \u0026 sÃ©curitÃ©",
    "content": "RÃ©vision Aujourdâ€™hui, on nâ€™apprend rien de nouveau. On va juste apprendre Ã  ne pas se tirer dans le pied le jour de lâ€™examen.\nModule 1 : Gestion des Utilisateurs (Le piÃ¨ge du -G) Lâ€™erreur fatale ici est la suppression accidentelle des groupes secondaires (comme sudo).\nğŸ›‘ Lâ€™erreur classique Lâ€™Ã©tudiant veut ajouter lâ€™utilisateur bob au groupe developers. Il tape : usermod -G developers bob\nPourquoi câ€™est grave ? Cette commande remplace tous les groupes secondaires par developers. Si bob Ã©tait dans le groupe sudo ou adm, il vient de perdre ses droits dâ€™administrateur.\nâœ… La Correction Il faut Ajouter (Append). La commande : usermod -aG developers bob\nMoyen mnÃ©motechnique : â€œIl faut ajouter, pas Ã©craser.â€ (Think Append).\nâš¡ Quiz Rapide (Main levÃ©e) Si je tape useradd toto sans options, est-ce que son dossier /home/toto est crÃ©Ã© ? RÃ©ponse : Non ! (Sur la plupart des distros brutes). Il faut lâ€™option -m. Si je ne prÃ©cise pas de shell, quel shell a-t-il par dÃ©faut ? RÃ©ponse : Souvent /bin/sh (beurk) et non /bin/bash. Il faut -s /bin/bash. Module 2 : Permissions (Le paradoxe du â€˜xâ€™) Les Ã©tudiants confondent souvent le droit dâ€™exÃ©cution sur un fichier et sur un dossier.\nğŸ›‘ Lâ€™erreur classique â€œMonsieur, jâ€™ai mis chmod 444 (lecture seule) sur le dossier, mais je ne peux pas faire un ls dedans ni faire cd !â€\nPourquoi câ€™est grave ? Sur un dossier, Lecture (r) permet de lister les noms des fichiers, mais ExÃ©cution (x) permet de â€œtraverserâ€ le dossier (entrer dedans). Sans le x, le r ne sert presque Ã  rien.\nğŸ” Le test de comprÃ©hension (Tableau) Dessinez ceci au tableau et demandez ce qui se passe pour lâ€™utilisateur bob (qui nâ€™est pas propriÃ©taire) :\nFichier : rapport.txt (rw- râ€“ â€”) Dossier : /dossier_secret (rwx rw- â€”) Question : bob fait partie du groupe propriÃ©taire. Peut-il supprimer rapport.txt ?\nRÃ©ponse (PiÃ¨ge) : Ã‡a dÃ©pend des droits du dossier parent ! Pour supprimer un fichier, on modifie le dossier, pas le fichier. Si Bob a w sur le dossier, il peut supprimer le fichier mÃªme sâ€™il est en lecture seule (r--) pour lui. âœ… La RÃ¨gle dâ€™or du chmod -R Ne jamais faire chmod -R 777 /. Jamais. Si on veut donner accÃ¨s au groupe web sur tout un site : chown -R :web /var/www chmod -R 770 /var/www (Beaucoup plus propre que 777).\nModule 3 : Processus (Le tueur en sÃ©rie) Lâ€™erreur ici est la brutalitÃ© inutile et la confusion entre pause et arrÃªt.\nğŸ›‘ Lâ€™erreur classique â€œMon programme ne rÃ©pond pas, je fais Ctrl+Z.â€\nPourquoi câ€™est grave ? Ctrl+Z ne tue pas le processus, il le met en pause (SIGSTOP). Le processus consomme encore de la RAM, il est juste â€œgelÃ©â€. Si vous en faites 10, vous saturez la mÃ©moire sans le savoir.\nIl fallait faire Ctrl+C (SIGINT) pour tuer. ğŸ›‘ Lâ€™abus du kill -9 Lâ€™Ã©tudiant tape systÃ©matiquement kill -9 1234.\nPourquoi câ€™est grave ? Câ€™est le â€œsniperâ€ (SIGKILL). Le processus meurt instantanÃ©ment sans sauvegarder ses donnÃ©es, sans fermer ses connexions rÃ©seau, sans nettoyer ses fichiers temporaires.\nBonne pratique : Toujours essayer kill -15 (SIGTERM) ou juste kill PID dâ€™abord (la demande polie). Nâ€™utiliser -9 quâ€™aprÃ¨s 10 secondes si Ã§a rÃ©siste. ActivitÃ© Finale : â€œLe Jeu du Sabotageâ€ (15 min) Pour finir la sÃ©ance sur une note ludique et active.\nBinÃ´mes : Mettez les Ã©tudiants par deux. Sabotage (5 min) : Lâ€™Ã©tudiant A doit crÃ©er une erreur subtile sur la VM (ex: changer les droits de /tmp pour quâ€™on ne puisse plus Ã©crire, mettre un processus sleep cachÃ©, changer le shell de root en /bin/false). DÃ©bogage (5 min) : Ils Ã©changent de place. Lâ€™Ã©tudiant B doit trouver pourquoi â€œÃ§a marche pasâ€ et rÃ©parer. Debrief : On regarde ensemble les sabotages les plus vicieux. Liste de vÃ©rification ultime pour lâ€™examen (Ã  distribuer) Utilisateurs : Ai-je vÃ©rifiÃ© le fichier /etc/passwd aprÃ¨s avoir crÃ©Ã© un user ? Groupes : Ai-je bien mis -aG et pas -G ? Permissions : Si je crÃ©e un dossier partagÃ©, ai-je pensÃ© au Sticky Bit ou au SGID ? Processus : Ai-je vÃ©rifiÃ© avec jobs que je nâ€™ai pas laissÃ© plein de trucs en pause ? Sudo : Est-ce que mes commandes nÃ©cessitent sudo ? (Erreur bÃªte : taper la commande, se faire rejeter, retaper). Examen 2 Titre de lâ€™examen : â€œMission SysAdmin - Sauvetage du Serveur Alphaâ€ Contexte : Vous Ãªtes le nouvel administrateur systÃ¨me de lâ€™entreprise DataCorp. Lâ€™ancien administrateur est parti prÃ©cipitamment. Il a laissÃ© le serveur dans un Ã©tat instable, des comptes mal configurÃ©s et des processus douteux qui tournent.\nObjectif : Remettre de lâ€™ordre, sÃ©curiser les accÃ¨s et gÃ©rer les ressources.\nPartie 1 : Gestion des Utilisateurs et Groupes (30 min) Lâ€™objectif est de vÃ©rifier la comprÃ©hension de la structure des groupes et des paramÃ¨tres de compte, pas juste la crÃ©ation.\nMise en situation : Le dÃ©partement â€œDÃ©veloppementâ€ accueille deux nouveaux stagiaires, mais lâ€™ancien admin a fait nâ€™importe quoi avec le compte du chef dâ€™Ã©quipe.\nRÃ©paration de compte : Lâ€™utilisateur chef_dev existe dÃ©jÃ  (crÃ©Ã© par le prof au prÃ©alable), mais il ne peut pas se connecter. Diagnostic attendu : Lâ€™Ã©tudiant doit vÃ©rifier /etc/passwd et remarquer que le shell est /bin/false ou /usr/sbin/nologin. Action : Changer le shell pour /bin/bash. Architecture de groupe : CrÃ©ez deux groupes : frontend et backend. CrÃ©ation intelligente : CrÃ©ez lâ€™utilisateur alice. Elle doit appartenir au groupe principal frontend. Elle doit aussi avoir accÃ¨s au groupe backend. Contrainte de sÃ©curitÃ© : Son compte doit expirer automatiquement le 31 dÃ©cembre de lâ€™annÃ©e en cours (fin du stage). Contrainte de confort : Lors de sa premiÃ¨re connexion, elle doit Ãªtre forcÃ©e de changer son mot de passe. Partie 2 : Permissions et Droits dâ€™accÃ¨s (40 min) Lâ€™objectif est de tester les bits spÃ©ciaux (SGID, Sticky) et la logique des droits, car câ€™est lÃ  que rÃ©side la vraie comprÃ©hension.\nMise en situation : Lâ€™Ã©quipe a besoin de collaborer sur des fichiers sensibles, mais la confidentialitÃ© est critique.\nLe Dossier Projet : CrÃ©ez un dossier /opt/projet_secret. PropriÃ©tÃ© : Ce dossier doit appartenir Ã  lâ€™utilisateur chef_dev et au groupe backend. Matrice de droits (Le cÅ“ur du test) : Configurez les permissions pour respecter exactement ces rÃ¨gles : Le propriÃ©taire a tous les droits. Les membres du groupe backend peuvent lire, exÃ©cuter et crÃ©er des fichiers dedans. Les autres (others) ne doivent avoir aucun accÃ¨s (mÃªme pas entrer dans le dossier). Lâ€™hÃ©ritage (SGID) : Faites en sorte que tout fichier crÃ©Ã© dans ce dossier par alice appartienne automatiquement au groupe backend, et non au groupe frontend (son groupe principal). La sÃ©curitÃ© de suppression (Sticky Bit) : CrÃ©ez un dossier /opt/echanges. Tout le monde doit pouvoir Ã©crire dedans, MAIS un utilisateur ne doit pas pouvoir supprimer les fichiers dâ€™un autre utilisateur. Partie 3 : Gestion des Processus (20 min) Lâ€™objectif est de manipuler des processus en temps rÃ©el et de comprendre les prioritÃ©s.\nMise en situation : Le serveur est lent. Un script lancÃ© par lâ€™ancien admin consomme trop de ressources.\nIdentification : Trouvez le processus nommÃ© minage_crypto.sh (lancÃ© par le prof au dÃ©but) qui tourne en arriÃ¨re-plan. Notez son PID dans un fichier reponse_proc.txt. Gestion de prioritÃ© (Nice) : Ne tuez pas le processus tout de suite (il contient des donnÃ©es non sauvegardÃ©es). Changez sa prioritÃ© pour quâ€™il soit le moins prioritaire possible (â€œnicenessâ€ maximale) afin de libÃ©rer le CPU pour les autres. Manipulation : Mettez ce processus en pause (suspend), puis relancez-le en arriÃ¨re-plan (bg). Nettoyage : Finalement, le chef demande lâ€™arrÃªt complet. Envoyez le signal de terminaison propre (SIGTERM) au processus. Sâ€™il ne rÃ©pond pas aprÃ¨s 10 secondes, forcez lâ€™arrÃªt (SIGKILL). Guide pour lâ€™enseignant (Mise en place) Pour que cet examen fonctionne, vous devez exÃ©cuter un petit script de prÃ©paration (â€œseedâ€) sur les VM des Ã©tudiants ou leur fournir une VM prÃ©-configurÃ©e.\nScript de prÃ©paration (Ã  lancer en root avant lâ€™examen) :\n#!/bin/bash # 1. CrÃ©ation du user 'chef_dev' cassÃ© useradd -m -s /bin/false chef_dev echo \"chef_dev:password123\" | chpasswd # 2. CrÃ©ation du script bidon pour la partie Processus cat \u003c\u003c 'EOF' \u003e /usr/local/bin/minage_crypto.sh #!/bin/bash while true; do # Simulation de charge CPU lÃ©gÃ¨re pour ne pas freezer la VM head -n 100 /dev/urandom \u003e /dev/null sleep 1 done EOF chmod +x /usr/local/bin/minage_crypto.sh # Lancer le processus en arriÃ¨re-plan pour qu'il soit \"dÃ©jÃ  lÃ \" /usr/local/bin/minage_crypto.sh \u0026 Grille dâ€™Ã©valuation suggÃ©rÃ©e (Total 25 pts) Utilisateurs (9 pts)\n[2] Diagnostic et correction du shell de chef_dev (grep chef_dev /etc/passwd). [2] CrÃ©ation des groupes. [3] Utilisateur alice (groupes corrects + date dâ€™expiration vÃ©rifiable avec chage -l alice). [2] ForÃ§age changement mdp (chage -d 0 alice). Permissions (10 pts)\n[2] PropriÃ©taire et groupe du dossier corrects. [2] Permissions de base (rwx rwx â€”). [3] Bit SGID fonctionnel (Test : crÃ©er un fichier avec alice, vÃ©rifier le groupe propriÃ©taire). [3] Sticky bit sur /opt/echanges (droits 1777 ou rwt). Processus (6 pts)\n[1] Identification du PID correct. [2] Changement de prioritÃ© vÃ©rifiÃ© (commande top ou ps -l). [3] Distinction entre SIGTERM (-15) et SIGKILL (-9). Pourquoi cet examen teste la comprÃ©hension ? Pas de par cÅ“ur : Lâ€™Ã©tudiant ne peut pas simplement taper useradd bob. Il doit comprendre les options (-e, -G) pour rÃ©pondre aux contraintes temporelles et structurelles. DÃ©bogage : La partie chef_dev oblige Ã  lire les fichiers de configuration pour comprendre pourquoi Ã§a ne marche pas, plutÃ´t que dâ€™appliquer une recette. SGID/Sticky : Ce sont des concepts abstraits. Leur demander de les configurer dans un but prÃ©cis (hÃ©ritage de groupe, protection de suppression) valide quâ€™ils comprennent lâ€™utilitÃ© du mÃ©canisme, pas juste la valeur octale. script de correction automatique Voici le script de correction automatique (correction_examen.sh).\nCe script est conÃ§u pour Ãªtre lancÃ© par vous (lâ€™enseignant) directement sur la VM de lâ€™Ã©tudiant Ã  la fin de lâ€™Ã©preuve. Il vÃ©rifie point par point lâ€™Ã©tat du systÃ¨me et calcule la note finale.\nLe Script de Correction (correction_examen.sh) CrÃ©ez un fichier nommÃ© correction_examen.sh, collez le contenu ci-dessous, et rendez-le exÃ©cutable (chmod +x correction_examen.sh).\n#!/bin/bash # COULEURS POUR L'AFFICHAGE VERT='\\033[0;32m' ROUGE='\\033[0;31m' BLEU='\\033[0;34m' NC='\\033[0m' # No Color # VARIABLES DE SCORE SCORE=0 TOTAL=25 echo -e \"${BLEU}======================================================${NC}\" echo -e \"${BLEU} CORRECTION AUTOMATIQUE - EXAMEN LINUX ${NC}\" echo -e \"${BLEU}======================================================${NC}\" # FONCTION DE VÃ‰RIFICATION check_point() { description=\"$1\" commande=\"$2\" points=\"$3\" # ExÃ©cution de la commande de test if eval \"$commande\"; then echo -e \"[ ${VERT}OK${NC} ] $description (+${points} pts)\" SCORE=$((SCORE + points)) else echo -e \"[ ${ROUGE}ECHEC${NC} ] $description (0 pts)\" fi } echo \"\" echo -e \"${BLEU}--- PARTIE 1 : GESTION UTILISATEURS (9 pts) ---${NC}\" # 1. VÃ©rif rÃ©paration chef_dev (shell bash) check_point \"Shell de chef_dev corrigÃ© (/bin/bash)\" \\ \"grep '^chef_dev:' /etc/passwd | grep -q '/bin/bash'\" 2 # 2. VÃ©rif existence groupes check_point \"Groupe 'frontend' existe\" \"getent group frontend \u003e /dev/null\" 1 check_point \"Groupe 'backend' existe\" \"getent group backend \u003e /dev/null\" 1 # 3. VÃ©rif Alice (Groupes) # On vÃ©rifie que le GID principal correspond Ã  frontend et qu'elle est dans backend GID_FRONTEND=$(getent group frontend | cut -d: -f3) check_point \"Alice : Groupe principal 'frontend' + secondaire 'backend'\" \\ \"id alice | grep -q 'gid=$GID_FRONTEND(frontend)' \u0026\u0026 id alice | grep -q 'backend'\" 2 # 4. VÃ©rif Alice (Expiration fin d'annÃ©e) ANNEE_COURANTE=$(date +%Y) check_point \"Alice : Compte expire fin $ANNEE_COURANTE\" \\ \"chage -l alice | grep 'Account expires' | grep -q '$ANNEE_COURANTE'\" 1 # 5. VÃ©rif Alice (Changement MDP forcÃ©) # Le champ 'Last password change' doit Ãªtre Ã  0 ou 'password must be changed' check_point \"Alice : Changement MDP forcÃ© Ã  la prochaine connexion\" \\ \"chage -l alice | grep 'Last password change' | grep -q 'password must be changed'\" 2 echo \"\" echo -e \"${BLEU}--- PARTIE 2 : PERMISSIONS \u0026 ACCÃˆS (10 pts) ---${NC}\" DIR_SECRET=\"/opt/projet_secret\" DIR_ECHANGE=\"/opt/echanges\" # 1. Dossier existe check_point \"Dossier $DIR_SECRET crÃ©Ã©\" \"[ -d $DIR_SECRET ]\" 1 # 2. PropriÃ©taire et Groupe check_point \"PropriÃ©taire chef_dev et Groupe backend\" \\ \"[ $(stat -c '%U' $DIR_SECRET) == 'chef_dev' ] \u0026\u0026 [ $(stat -c '%G' $DIR_SECRET) == 'backend' ]\" 2 # 3. Permissions (2770 ou rwxrws---) # 2770 = SGID (2) + User rwx (7) + Group rwx (7) + Others --- (0) PERMS=$(stat -c '%a' $DIR_SECRET) check_point \"Permissions SGID et restrictions (2770)\" \\ \"[ '$PERMS' == '2770' ]\" 4 # 4. Sticky Bit sur Echanges # 1777 = Sticky (1) + rwx partout (777) if [ -d $DIR_ECHANGE ]; then PERMS_ECH=$(stat -c '%a' $DIR_ECHANGE) check_point \"Sticky Bit sur $DIR_ECHANGE (1777)\" \"[ '$PERMS_ECH' == '1777' ]\" 3 else echo -e \"[ ${ROUGE}ECHEC${NC} ] Dossier $DIR_ECHANGE inexistant (0 pts)\" fi echo \"\" echo -e \"${BLEU}--- PARTIE 3 : PROCESSUS (6 pts) ---${NC}\" # 1. VÃ©rification du fichier rÃ©ponse PID FILE_PID=\"reponse_proc.txt\" # On cherche le fichier n'importe oÃ¹ dans le home de l'Ã©tudiant ou root, ou dossier courant # Pour simplifier, on suppose qu'il est dans le dossier courant ou /root if [ -f \"$FILE_PID\" ]; then PID_NOTE=$(head -n 1 $FILE_PID) # On vÃ©rifie si c'est un nombre if [[ \"$PID_NOTE\" =~ ^[0-9]+$ ]]; then echo -e \"[ ${VERT}OK${NC} ] PID notÃ© dans $FILE_PID ($PID_NOTE) (+1 pts)\" SCORE=$((SCORE + 1)) else echo -e \"[ ${ROUGE}ECHEC${NC} ] Fichier trouvÃ© mais contenu invalide\" fi else echo -e \"[ ${ROUGE}ECHEC${NC} ] Fichier $FILE_PID introuvable\" fi # 2. VÃ©rification que le processus est bien TUÃ‰ # Comme l'Ã©tudiant devait le tuer Ã  la fin, le processus NE DOIT PLUS exister. if pgrep -f \"minage_crypto.sh\" \u003e /dev/null; then echo -e \"[ ${ROUGE}ECHEC${NC} ] Le processus tourne encore (SIGKILL non effectuÃ©)\" else check_point \"Processus correctement arrÃªtÃ©\" \"true\" 3 fi # Note: Pour la prioritÃ© (Nice), c'est difficile Ã  vÃ©rifier post-mortem si le processus est tuÃ©. # On accorde les points \"de confiance\" ou on vÃ©rifie l'historique bash si disponible. # Ici, pour l'automatisation, je propose de vÃ©rifier si l'Ã©tudiant a laissÃ© une trace dans .bash_history # C'est imparfait, mais mieux que rien pour un script auto. check_point \"Trace de la commande 'renice' ou 'nice' dans l'historique\" \\ \"grep -E 'renice|nice' ~/.bash_history \u003e /dev/null 2\u003e\u00261 || grep -E 'renice|nice' /home/*/.bash_history \u003e /dev/null 2\u003e\u00261\" 2 echo \"\" echo -e \"${BLEU}======================================================${NC}\" echo -e \"NOTE FINALE : ${SCORE} / ${TOTAL}\" echo -e \"${BLEU}======================================================${NC}\" Comment utiliser ce systÃ¨me en classe Pour que tout se dÃ©roule sans accroc le jour de lâ€™examen, voici la procÃ©dure idÃ©ale :\nPrÃ©paration (Avant le cours) : PrÃ©parez le script de mise en place (le â€œseedâ€ donnÃ© dans ma rÃ©ponse prÃ©cÃ©dente) et ce script de correction. Mettez-les sur une clÃ© USB ou un partage rÃ©seau accessible (mais cachÃ©). Lancement (DÃ©but de lâ€™examen) : Les Ã©tudiants dÃ©marrent leur VM. Vous (ou lâ€™Ã©tudiant) lancez le script de mise en place : sudo ./setup_exam.sh. Cela crÃ©e le dÃ©sordre (le user cassÃ©, le processus qui tourne). Lâ€™Examen : Lâ€™Ã©tudiant travaille. Rappel important : Dites aux Ã©tudiants de lancer la commande history -a (append) avant la fin de lâ€™examen pour sâ€™assurer que leurs commandes sont bien sauvegardÃ©es pour la vÃ©rification de la partie â€œreniceâ€. Correction (Fin de lâ€™examen) : Passez sur chaque poste (ou demandez aux Ã©tudiants de le faire si vous avez confiance). Copiez le fichier correction_examen.sh sur la machine. ExÃ©cutez : sudo ./correction_examen.sh. La note sâ€™affiche instantanÃ©ment. Une astuce pÃ©dagogique pour le QuÃ©bec (CÃ©gep) Comme vous enseignez au niveau collÃ©gial, vous pouvez ajouter une petite Ã©tape â€œauto-Ã©valuationâ€ : Donnez ce script aux Ã©tudiants en mode â€œauditâ€ (sans afficher la note, juste OK/ECHEC) lors dâ€™un laboratoire formatif la semaine dâ€™avant. Cela leur apprend Ã  utiliser des scripts de test unitaire sur leur propre infrastructure (â€œTest Driven Infrastructureâ€), une compÃ©tence trÃ¨s prisÃ©e en DevOps aujourdâ€™hui.\nVoulez-vous que je gÃ©nÃ¨re le fichier PDF de lâ€™Ã©noncÃ© de lâ€™examen prÃªt Ã  imprimer ?",
    "description": "RÃ©vision Aujourdâ€™hui, on nâ€™apprend rien de nouveau. On va juste apprendre Ã  ne pas se tirer dans le pied le jour de lâ€™examen.\nModule 1 : Gestion des Utilisateurs (Le piÃ¨ge du -G) Lâ€™erreur fatale ici est la suppression accidentelle des groupes secondaires (comme sudo).",
    "tags": [],
    "title": "RÃ©vision? \u0026 Examen #2",
    "uri": "/bloc-2/semaine-8/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Redirections \u0026 filtres, disques et rÃ©seau",
    "content": "Objectif de la semaine Comprendre comment manipuler les flux de donnÃ©es pour combiner des commandes simples et rÃ©aliser des tÃ¢ches complexes. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine9.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Imaginez quâ€™une commande Linux est une machine industrielle. Elle a besoin de matiÃ¨res premiÃ¨res pour fonctionner et elle produit quelque chose en sortie.\nIl existe trois â€œtuyauxâ€ connectÃ©s par dÃ©faut Ã  chaque commande :\nCanal Nom technique ID Description Direction par dÃ©faut EntrÃ©e stdin 0 Les donnÃ©es brutes Votre Clavier Sortie stdout 1 Le bon rÃ©sultat Votre Ã‰cran Erreur stderr 2 Les messages de panne Votre Ã‰cran Analogie : Câ€™est comme une crÃ©ature qui mange (stdin), parle (stdout) et parfois crie quand elle a mal (stderr).\nLes redirections Par dÃ©faut, la â€œriviÃ¨reâ€ de donnÃ©es coule vers lâ€™Ã©cran. Nous pouvons utiliser des chevrons pour dÃ©tourner ce flux vers un fichier.\n1. Le destructeur (\u003e) Le chevron simple redirige la sortie vers un fichier.\nAttention : Si le fichier existe, il est Ã©crasÃ© (vidÃ© et remplacÃ©). Moyen mnÃ©motechnique : Le fichier est remis Ã  zÃ©ro. echo \"Liste de courses\" \u003e courses.txt # Le fichier courses.txt contient maintenant uniquement : Liste de courses 2. Le constructeur (\u003e\u003e) Le double chevron ajoute les donnÃ©es Ã  la fin du fichier existant.\nSÃ©curitÃ© : Il ne dÃ©truit pas lâ€™ancien contenu. echo \"- Pommes\" \u003e\u003e courses.txt echo \"- Bananes\" \u003e\u003e courses.txt # Le fichier contient maintenant le titre ET les fruits. ğŸŸ¢ Exercice #1 (En classe) Objectif : Visualiser la diffÃ©rence entre Ã©craser et ajouter.\nDemandez aux Ã©tudiants de taper : echo \"Bonjour\" \u003e test.txt Puis : echo \"Monde\" \u003e test.txt VÃ©rifiez le contenu (cat test.txt). Que sâ€™est-il passÃ© ? (RÃ©ponse : â€œBonjourâ€ a disparu). Corrigez le tir : echo \"Bonjour\" \u003e\u003e test.txt (Pour avoir Monde et Bonjour). Le Tube (Pipe |) : Lâ€™Assemblage Câ€™est le super-pouvoir de Linux. Le caractÃ¨re | (Alt Gr + 6) connecte la sortie de la commande de gauche Ã  lâ€™entrÃ©e de la commande de droite.\nLa rÃ¨gle dâ€™or : Pas de fichier intermÃ©diaire. Tout se passe en mÃ©moire vive (RAM).\nAnalogie de lâ€™usine : Machine A (Fabrique le biscuit) | Machine B (Met le chocolat) | Machine C (Emballe)\n1. Les filtres indispensables Le Pipe sert Ã  envoyer des donnÃ©es vers des filtres. Voici les plus utilisÃ©s :\nsort : Trie les lignes par ordre alphabÃ©tique ou numÃ©rique. uniq : Supprime les doublons adjacents (il faut souvent trier avant !). grep \"mot\" : Ne garde que les lignes contenant â€œmotâ€. wc -l : Compte le nombre de lignes (Word Count -lines). **head / tail** : Affiche les premiÃ¨res ou derniÃ¨res lignes. ğŸŸ¢ Exercice #2 (En classe) Le dossier /etc contient des centaines de fichiers de configuration. Afficher uniquement les fichiers contenant â€œconfâ€ dans leur nom, et les trier Ã  lâ€™envers. Discussion : Que se passe si on enlÃ¨ve le grep?\nğŸŸ¢ Exercice #3 (En classe) On veut savoir combien dâ€™objets se trouvent dans le dossier /bin (lÃ  oÃ¹ sont stockÃ©es les commandes comme ls, cp, etc.). Compter les fichiers. Discussion : Pourquoi ne pas simplement faire ls /bin et compter Ã  la main ?\nLaboratoire Utiliser le fichier labo9.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nVous Ãªtes administrateur systÃ¨me. On vous donne une liste brute dâ€™utilisateurs suspects et de tentatives de connexion. Votre but est de nettoyer ces donnÃ©es pour en extraire des statistiques utiles.\nÃ‰tape 1 : CrÃ©ation des donnÃ©es (Setup) CrÃ©ez un fichier sale avec des doublons et des donnÃ©es dÃ©sordonnÃ©es. Copiez/collez ces commandes :\necho \"Martin\" \u003e utilisateurs.txt echo \"Julie\" \u003e\u003e utilisateurs.txt echo \"Martin\" \u003e\u003e utilisateurs.txt echo \"Alain\" \u003e\u003e utilisateurs.txt echo \"Julie\" \u003e\u003e utilisateurs.txt echo \"Zoe\" \u003e\u003e utilisateurs.txt echo \"Martin\" \u003e\u003e utilisateurs.txt Ã‰tape 2 : Le nettoyage (Sort \u0026 Uniq) Si vous faites uniq utilisateurs.txt, cela ne fonctionnera pas parfaitement car uniq ne voit que les doublons qui se touchent.\nAffichez le contenu brut Triez le fichier et affichez le rÃ©sultat Ã  lâ€™Ã©cran Utilisez le pipe pour trier PUIS supprimer les doublons DÃ©fi : Redirigez cette liste propre vers un nouveau fichier nommÃ© utilisateurs_propres.txt. Ã‰tape 3 : Lâ€™enquÃªte (Grep \u0026 Wc) Nous allons simuler un fichier de journal systÃ¨me (log).\n# CrÃ©ation du fichier log (copiez tout le bloc) echo \"[INFO] Connexion rÃ©ussie : Martin\" \u003e system.log echo \"[ERREUR] Ã‰chec de connexion : Hacker\" \u003e\u003e system.log echo \"[INFO] Connexion rÃ©ussie : Julie\" \u003e\u003e system.log echo \"[ERREUR] Ã‰chec de connexion : Hacker\" \u003e\u003e system.log echo \"[INFO] Connexion rÃ©ussie : Alain\" \u003e\u003e system.log echo \"[ERREUR] Ã‰chec de connexion : Hacker\" \u003e\u003e system.log Utilisez grep pour nâ€™afficher que les lignes contenant â€œERREURâ€. Utilisez un pipe et wc -l pour compter combien de fois le mot â€œERREURâ€ apparaÃ®t. Ã‰tape 4 : Le grand final (History) Lâ€™historique de votre terminal garde tout ce que vous avez tapÃ©.\nUtilisez la commande history. Utilisez un pipe pour trouver combien de fois vous avez utilisÃ© la commande echo aujourdâ€™hui. ==============================================\nLABORATOIRE Objectif : Manipuler des logs et extraire de lâ€™information prÃ©cise.\nÃ‰tape 1 : Dompter les fichiers (Redirections) Pas dâ€™Ã©diteur de texte autorisÃ© ici !\nUtilisez echo et \u003e pour crÃ©er un fichier mes_films.txt avec le titre â€œStar Warsâ€. Utilisez \u003e\u003e pour ajouter â€œLe Seigneur des Anneauxâ€ et â€œMatrixâ€ (3 commandes distinctes). VÃ©rifiez avec cat. Lancez une commande qui plante (ex: ls /root en tant quâ€™Ã©tudiant). Relancez-la en cachant lâ€™erreur : ls /root 2\u003e /dev/null. Le terminal doit rester muet. Ã‰tape 2 : Lâ€™aiguille dans la botte de foin (grep) Le fichier /etc/passwd est parfait pour sâ€™exercer.\nAffichez le fichier /etc/passwd. Câ€™est illisible ? Utilisez un Pipe et head pour voir seulement les 5 premiers utilisateurs. Utilisez grep pour trouver la ligne correspondant Ã  votre utilisateur (etudiant). Utilisez grep pour trouver tous les utilisateurs qui nâ€™ont pas de shell de connexion (cherchez /usr/sbin/nologin). DÃ©fi : Comptez combien il y en a en ajoutant | wc -l Ã  la fin. Ã‰tape 3 : Le dÃ©tective (find) La commande find est diffÃ©rente, elle cherche des FICHIERS, pas du texte.\nTrouvez tous les fichiers qui se terminent par .conf dans /etc : find /etc -name \"*.conf\" (Vous aurez plein dâ€™erreurs â€œPermission deniedâ€. Câ€™est normal !) Refaites la commande en envoyant les erreurs dans le nÃ©ant pour avoir une liste propre : find /etc -name \"*.conf\" 2\u003e /dev/null Trouvez tous les fichiers modifiÃ©s dans les derniÃ¨res 24 heures dans votre dossier home : find ~ -mtime -1 Ã‰tape 4 : Le â€œCSI Linuxâ€ (ProblÃ¨me complexe) (15 min) ScÃ©nario : Vous devez lister les 3 derniers utilisateurs crÃ©Ã©s sur le systÃ¨me, triÃ©s par ordre alphabÃ©tique. Indice : /etc/passwd contient les infos, tail prend la fin, sort trie, cut dÃ©coupe.\nğŸ’¡ Astuces de la semaine Les 3 commandes en or :\ngrep \"mot\" : Garde seulement les lignes avec â€œmotâ€. wc -l : Compte les lignes. sort : Met en ordre.",
    "description": "Objectif de la semaine Comprendre comment manipuler les flux de donnÃ©es pour combiner des commandes simples et rÃ©aliser des tÃ¢ches complexes. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine9.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Imaginez quâ€™une commande Linux est une machine industrielle. Elle a besoin de matiÃ¨res premiÃ¨res pour fonctionner et elle produit quelque chose en sortie.",
    "tags": [],
    "title": "Redirections, Pipes et filtres",
    "uri": "/bloc-3/semaine-9/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Redirections \u0026 filtres, disques et rÃ©seau",
    "content": "Warning Cette semaine est critique : on touche Ã  lâ€™infrastructure physique. Câ€™est lâ€™une des rares opÃ©rations oÃ¹ une erreur de frappe peut dÃ©truire des donnÃ©es de maniÃ¨re irrÃ©versible. Le ton doit Ãªtre mÃ©thodique.\nObjectif Ajouter un nouveau disque dur, le prÃ©parer et lâ€™intÃ©grer au systÃ¨me de fichiers de maniÃ¨re permanente. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine10.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Linux vs Windows Sous Windows, vous avez lâ€™habitude des lettres de lecteurs (C:, D:, E:). Si vous branchez une clÃ© USB, elle reÃ§oit une nouvelle lettre. Sous Linux, ce concept nâ€™existe pas. Tout est intÃ©grÃ© dans une seule et unique structure : lâ€™arborescence de fichiers (la racine /).\nPour utiliser un disque, il faut lâ€™attacher (le â€œmonterâ€) manuellement Ã  un dossier existant.\nLe matÃ©riel : Tout est fichier Linux communique avec le matÃ©riel via des fichiers spÃ©ciaux situÃ©s dans le dossier /dev (Devices).\nLa nomenclature Ã  connaÃ®tre :\nNom Signification /dev/sda SCSI Disk A (1er disque physique - SATA/SSD). /dev/sdb SCSI Disk B (2e disque physique). /dev/nvme0n1 Disque moderne NVMe (souvent le disque principal sur les laptops rÃ©cents). /dev/sr0 Lecteur CD/DVD (ou lâ€™image ISO montÃ©e). Les partitions : Un disque est dÃ©coupÃ© en tranches. On ajoute un chiffre aprÃ¨s le nom du disque.\n/dev/sda1 : 1Ã¨re partition du disque A. /dev/sda2 : 2e partition du disque A. Details Lâ€™outil indispensable : lsblk\nLa commande lsblk (List Block Devices) affiche lâ€™arbre de vos disques. Câ€™est la premiÃ¨re commande Ã  taper pour ne pas se tromper de cible !\nğŸŸ¢ Exercice 1 (En classe) Voici la sortie dâ€™une commande lsblk. RÃ©pondez aux questions.\nNAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS sda 8:0 0 100G 0 disk â”œâ”€sda1 8:1 0 512M 0 part /boot/efi â””â”€sda2 8:2 0 99.5G 0 part / sdb 8:16 1 16G 0 disk â””â”€sdb1 8:17 1 16G 0 part /media/etudiant/USB_KEY sr0 11:0 1 1024M 0 rom Combien y a-t-il de disques physiques connectÃ©s ? Lequel de ces disques est probablement une clÃ© USB ? Pourquoi ? OÃ¹ se trouvent les fichiers du systÃ¨me dâ€™exploitation (la racine) ? Quâ€™est-ce que le pÃ©riphÃ©rique sr0 ? Le cycle de vie dâ€™un disque Pour rendre un disque utilisable, il faut suivre 3 Ã©tapes obligatoires.\nImaginez que vous achetez un immense entrepÃ´t vide (Le disque dur).\nPartitionner (Les murs) : Vous ne pouvez pas stocker des dossiers en vrac dans un hangar vide. Vous construisez des murs pour crÃ©er des locaux sÃ©curisÃ©s. Outil : fdisk\nFormater (Les Ã©tagÃ¨res) : Une fois les murs posÃ©s, la piÃ¨ce est vide. Il faut installer un systÃ¨me de rangement (Ã©tagÃ¨res, armoires). Sans cela, les donnÃ©es sont jetÃ©es par terre. Câ€™est le SystÃ¨me de Fichiers (Filesystem). Outil : mkfs (Make FileSystem)\nMonter (La porte) : Votre piÃ¨ce est prÃªte, mais elle est murÃ©e ! Pour y entrer, vous devez percer une porte et lui donner un nom (ex: â€œSalle des Archivesâ€). Outil : mount\nÃ‰tape 1 : Partitionner (fdisk) Câ€™est lâ€™action de dÃ©couper le disque.\nAttention : fdisk est un outil interactif, il vous pose des questions.\n# SÃ©lectionner le disque B (attention Ã  ne pas choisir sda !) sudo fdisk /dev/sdb Les touches magiques dans fdisk :\nm : Afficher le menu dâ€™aide. n : CrÃ©er une Nouvelle partition. p : Partition Primaire. d : Delete (supprimer) une partition. w : Write (Ã‰crire les changements sur le disque et quitter). Rien nâ€™est fait tant que vous ne tapez pas w ! q : Quit (Quitter sans rien faire en cas de panique). Ã‰tape 2 : Formater (mkfs) Câ€™est lâ€™action dâ€™installer le systÃ¨me de fichiers. Sous Linux, le standard est ext4 (Ã©quivalent du NTFS de Windows).\n# Formater la 1Ã¨re partition du disque B sudo mkfs.ext4 /dev/sdb1 Ã‰tape 3 : Monter (mount) Linux ne â€œvoitâ€ pas le contenu du disque tant quâ€™il nâ€™est pas greffÃ© Ã  un dossier.\n# 1. On crÃ©e le point d'ancrage (un dossier vide) sudo mkdir /mnt/disque_data # 2. On accroche la partition sur ce dossier sudo mount /dev/sdb1 /mnt/disque_data Ã€ partir de maintenant, tout fichier copiÃ© dans /mnt/disque_data atterrit physiquement sur le disque B.\nğŸŸ¢ Exercice 2 (En classe) Au tableau/projecteur. Montrez une capture dâ€™Ã©cran de lsblk avec un disque de 100 Go (sda) et un disque de 5 Go (sdb).\nQuestion : â€œJe veux formater le nouveau petit disque. Jâ€™Ã©cris mkfs.ext4 /dev/sda1. Quâ€™est-ce qui se passe ?â€\nLa persistance (Le danger du fstab) La commande mount est temporaire. Au redÃ©marrage, Linux â€œoublieâ€ le montage. Pour le rendre permanent, il faut lâ€™inscrire dans le fichier de configuration /etc/fstab (File System Table).\n1. Pourquoi utiliser lâ€™UUID ? Les noms /dev/sdb1 changent si vous changez le branchement des cÃ¢bles. Lâ€™UUID (Universally Unique IDentifier) est lâ€™empreinte digitale du disque. Elle ne change jamais.\n# RÃ©cupÃ©rer l'UUID sudo blkid Warning Le fichier /etc/fstab est lu au dÃ©marrage du noyau.\nSi vous faites une faute de frappe dans ce fichierâ€¦ Le systÃ¨me ne pourra pas monter le disqueâ€¦ Et Linux refusera de dÃ©marrer (Emergency Mode). RÃ¨gle de survie : AprÃ¨s avoir modifiÃ© /etc/fstab, ne redÃ©marrez JAMAIS tout de suite. Testez votre configuration :\nsudo mount -a Si la commande ne dit rien : Câ€™est bon. Si la commande affiche une erreur : Corrigez le fichier immÃ©diatement ! ğŸŸ¢ Exercice 3 (En classe) Un Ã©tudiant veut monter son disque de sauvegarde automatiquement dans /mnt/backup. Il a Ã©crit cette ligne dans /etc/fstab.\nTrouvez les 3 erreurs qui vont empÃªcher le systÃ¨me de dÃ©marrer.\n# Fichier /etc/fstab UUID=a1b2-c3d4 /mnt/backup ntfs default 0 0 (Indices : Le systÃ¨me de fichiers Linux standard nâ€™est pas ntfs, il manque un â€™sâ€™ quelque part, et la syntaxe des options est souvent au pluriel).\nLaboratoire Utiliser le fichier labo10.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nVotre serveur manque dâ€™espace. Votre patron a insÃ©rÃ© physiquement un nouveau disque dur de 5 Go. Votre mission est de le rendre opÃ©rationnel pour que le dÃ©partement comptabilitÃ© puisse y stocker des archives.\nPrÃ©requis VM : Assurez-vous dâ€™avoir ajoutÃ© un second Disque Dur Virtuel (VDI) de 2 Go ou 5 Go dans les paramÃ¨tres de votre machine virtuelle (Storage \u003e Controller: SATA \u003e Add Hard Disk).\nÃ‰tape 1 : Reconnaissance Allumez votre VM. Ouvrez un terminal et identifiez le nouveau disque : lsblk RepÃ©rez le disque qui nâ€™a pas de partitions (probablement sdb). Quelle est sa taille exacte ? Ã‰tape 2 : Construction des murs (Partitionnement) Nous allons crÃ©er une partition unique qui occupe tout le disque.\nLancez lâ€™utilitaire : sudo fdisk /dev/sdb Tapez n (Nouvelle partition). Tapez p (Primaire). NumÃ©ro de partition : Appuyez sur EntrÃ©e (Par dÃ©faut : 1). Premier secteur : Appuyez sur EntrÃ©e (Par dÃ©faut : dÃ©but du disque). Dernier secteur : Appuyez sur EntrÃ©e (Par dÃ©faut : fin du disque). VÃ©rifiez votre travail en tapant p (Print). Vous devriez voir /dev/sdb1. Sauvegardez en tapant w (Write). Ã‰tape 3 : DÃ©coration (Formatage) Nous allons formater cette nouvelle partition en ext4.\nLancez la commande : sudo mkfs.ext4 /dev/sdb1 Notez lâ€™UUID qui sâ€™affiche Ã  lâ€™Ã©cran (ou retrouvez-le plus tard avec blkid). Ã‰tape 4 : EmmÃ©nagement (Montage manuel) CrÃ©ez le dossier dâ€™accueil : sudo mkdir /mnt/archives Montez le disque : sudo mount /dev/sdb1 /mnt/archives VÃ©rifiez que le disque est bien lÃ  avec la commande df -h (Disk Free -human readable). Vous devriez voir votre disque associÃ© Ã  /mnt/archives.\nCrÃ©ez un fichier test pour prouver que Ã§a marche :\nsudo touch /mnt/archives/test.txt Ã‰tape 5 : Ancrage dÃ©finitif (Configuration fstab) Câ€™est le moment critique.\nRÃ©cupÃ©rez lâ€™UUID de sdb1 : sudo blkid (Copiez la suite de caractÃ¨res sans les guillemets).\nOuvrez le fichier fstab : sudo nano /etc/fstab Allez tout en bas du fichier et ajoutez cette ligne (remplacez les X par votre UUID) : UUID=XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX /mnt/archives ext4 defaults 0 0 Utilisez la touche Tabulation pour espacer les colonnes. 4. Sauvegardez (Ctrl+O, EntrÃ©e) et quittez (Ctrl+X).\nTEST DE SURVIE : Tapez : sudo mount -a Si aucun message ne sâ€™affiche : Bravo ! Vous pouvez redÃ©marrer. Si un message dâ€™erreur apparaÃ®t : STOP ! Rouvrez le fichier et corrigez lâ€™erreur. Ã‰tape 6 : Validation finale RedÃ©marrez votre VM (sudo reboot). Une fois reconnectÃ©, tapez df -h. Si /mnt/archives est prÃ©sent, fÃ©licitations : vous Ãªtes un administrateur systÃ¨me capable de gÃ©rer le stockage.\n=============================== ThÃ©orie Â« Aujourdâ€™hui, on agrandit la maison. On ne va pas juste copier des fichiers, on va construire lâ€™Ã©tagÃ¨re sur laquelle ils seront posÃ©s. Â»\n1. Le matÃ©riel sous Linux : Tout est fichier Contrairement Ã  Windows, il nâ€™y a pas de â€œPoste de travailâ€ avec des icÃ´nes de disques. Les pÃ©riphÃ©riques sont des fichiers dans le dossier /dev (Devices) .\nNomenclature SATA/SCSI (La norme actuelle) :\n/dev/sda : SCSI Disk A (1er disque physique). /dev/sdb : SCSI Disk B (2e disque physique). Les partitions (Les tranches du gÃ¢teau) :\n/dev/sda1 : 1Ã¨re partition du 1er disque. /dev/sdb1 : 1Ã¨re partition du 2e disque. La commande de visualisation :\nlsblk (LiSt BLock devices) : Affiche lâ€™arbre des disques. Câ€™est votre meilleur ami pour ne pas formater le mauvais disque. 2. Le cycle de vie : Partitionner, formater, monter Pour quâ€™un disque neuf soit utilisable, il faut obligatoirement passer par 3 Ã©tapes :\nPartitionner (fdisk ou gdisk) :\nCâ€™est tracer les frontiÃ¨res. MBR (Master Boot Record) : Lâ€™ancien standard (max 2 To, max 4 partitions primaires). UtilisÃ© par fdisk. GPT (GUID Partition Table) : Le standard moderne (Disques immenses, illimitÃ©). UtilisÃ© par gdisk. Formater (mkfs) :\nCâ€™est peindre les cases pour que lâ€™OS puisse Ã©crire dedans. On crÃ©e le SystÃ¨me de Fichiers (Filesystem) . ext4 : Le standard Linux (robuste, journalisÃ©). xfs : TrÃ¨s performant pour les gros serveurs (RedHat). swap : MÃ©moire virtuelle (RAM de secours sur disque). Monter (mount) :\nCâ€™est accrocher le disque Ã  lâ€™arborescence. On crÃ©e un dossier vide (ex: /mnt/data) et on â€œcolleâ€ le disque dessus. 3. La persistance (/etc/fstab) La commande mount est temporaire. Au redÃ©marrage, Linux â€œoublieâ€ tout ce qui nâ€™est pas Ã©crit dans le fichier de configuration /etc/fstab (File System TABle).\nLe danger des noms (/dev/sdb) : Si vous changez les cÃ¢bles, sdb peut devenir sdc. Le systÃ¨me ne dÃ©marrera plus. La solution UUID (Universally Unique IDentifier) : Une empreinte digitale unique pour chaque partition (ex: a1b2-c3d4...). Câ€™est ce quâ€™on utilise dans fstab pour Ãªtre sÃ»r. LABORATOIRE Objectif : Ajouter un disque de 5 Go Ã  la VM pour simuler un disque de sauvegarde.\nÃ‰tape 0 : Ajout du matÃ©riel (Hors Linux) (15 min) Ã‰teignez proprement votre VM (poweroff). Dans VirtualBox : Configuration -\u003e Stockage -\u003e ContrÃ´leur SATA -\u003e IcÃ´ne â€œAjouter un disque durâ€. CrÃ©er -\u003e VDI -\u003e Dynamique -\u003e Taille : 5,00 Go. Rallumez la VM. Ã‰tape 1 : Identification et partitionnement (30 min) Ouvrez un terminal et tapez lsblk. RepÃ©rez le disque de 5 Go (probablement sdb).\nLancez lâ€™outil de partitionnement : sudo fdisk /dev/sdb (Attention Ã  la lettre !).\nDans lâ€™interface interactive de fdisk :\nTapez n (New partition). Tapez p (Primary). Tapez 1 (NumÃ©ro 1). EntrÃ©e (Premier secteur par dÃ©faut). EntrÃ©e (Dernier secteur par dÃ©faut = tout le disque). Tapez w (Write) pour sauvegarder et quitter. Refaites lsblk. Vous devriez voir sdb1 apparaÃ®tre sous sdb.\nÃ‰tape 2 : Formatage (Construction du systÃ¨me de fichiers) (30 min) Appliquez le systÃ¨me de fichiers ext4 sur la partition : sudo mkfs.ext4 /dev/sdb1 (Cela prend quelques secondes). Ã‰tape 3 : Montage manuel (Test) (15 min) CrÃ©ez le point dâ€™ancrage (le dossier) : sudo mkdir /mnt/backup Montez le disque : sudo mount /dev/sdb1 /mnt/backup VÃ©rifiez lâ€™espace disque disponible : df -h (Vous devez voir une ligne /dev/sdb1 avec une taille dâ€™environ 4.9G). Testez lâ€™Ã©criture : sudo touch /mnt/backup/test.txt Ã‰tape 4 : Automatisation (Persistance) (30 min) Le moment de vÃ©ritÃ©.\nTrouvez lâ€™UUID de votre nouvelle partition : sudo blkid (Copiez la longue chaÃ®ne de caractÃ¨res sans les guillemets pour /dev/sdb1). Ã‰ditez le fichier fstab : sudo nano /etc/fstab Ajoutez une ligne Ã  la fin (Attention Ã  la syntaxe !) : UUID=votre-uuid-ici /mnt/backup ext4 defaults 0 2 Sauvegardez (Ctrl+X, Y). TEST DE SÃ‰CURITÃ‰ : Tapez sudo mount -a. Si rien ne sâ€™affiche : Câ€™est parfait, pas dâ€™erreurs. Si un message dâ€™erreur sâ€™affiche : CORRIGEZ TOUT DE SUITE. Si vous redÃ©marrez avec une erreur dans fstab, la VM ne dÃ©marrera plus (Mode Urgence). Ã‰tape 5 : Le redÃ©marrage (15 min) RedÃ©marrez la VM (reboot). Une fois revenu, tapez df -h. Si /mnt/backup est lÃ , fÃ©licitations : vous Ãªtes un admin systÃ¨me capable de gÃ©rer le stockage. CorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)\nğŸ’¡ Astuces de la semaine âš ï¸ ATTENTION : La zone de danger FSTAB Le fichier /etc/fstab est lu au dÃ©marrage du noyau. Sâ€™il contient une faute de frappe, le dÃ©marrage Ã©choue. La RÃ¨gle dâ€™Or : AprÃ¨s avoir modifiÃ© ce fichier, lancez toujours la commande sudo mount -a avant dâ€™Ã©teindre lâ€™ordinateur.\nPas de nouvelle = Bonne nouvelle (Tout va bien). Message dâ€™erreur = Ne redÃ©marrez pas ! Rouvrez le fichier et corrigez. Structure de la ligne fstab : QUOI (UUID) OÃ™ (/dossier) COMMENT (ext4) OPTIONS (defaults) DUMP (0) PASS (2)",
    "description": "Warning Cette semaine est critique : on touche Ã  lâ€™infrastructure physique. Câ€™est lâ€™une des rares opÃ©rations oÃ¹ une erreur de frappe peut dÃ©truire des donnÃ©es de maniÃ¨re irrÃ©versible. Le ton doit Ãªtre mÃ©thodique.\nObjectif Ajouter un nouveau disque dur, le prÃ©parer et lâ€™intÃ©grer au systÃ¨me de fichiers de maniÃ¨re permanente. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine10.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx",
    "tags": [],
    "title": "Gestion de disques",
    "uri": "/bloc-3/semaine-10/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Redirections \u0026 filtres, disques et rÃ©seau",
    "content": "Objectif de la semaine Comprendre comment une machine Linux communique, comment gÃ©rer les programmes qui tournent en arriÃ¨re-plan (services) et comment sÃ©curiser ces Ã©changes. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine11.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nWarning Cette semaine est critique : on touche Ã  lâ€™infrastructure physique. Câ€™est lâ€™une des rares opÃ©rations oÃ¹ une erreur de frappe peut dÃ©truire des donnÃ©es de maniÃ¨re irrÃ©versible. Le ton doit Ãªtre mÃ©thodique.\nThÃ©orie Interfaces et connexions Analogie : Avant de passer un appel, il faut vÃ©rifier si le tÃ©lÃ©phone est branchÃ© et connaÃ®tre son propre numÃ©ro.\nLa commande ifconfig est obsolÃ¨te. Aujourdâ€™hui, nous utilisons la suite iproute2 (commandes commenÃ§ant par ip).\n1. Identifier ses cartes (Le matÃ©riel) Chaque carte rÃ©seau possÃ¨de un nom unique. Commande : ip link show\nlo (Loopback) : Lâ€™adresse de bouclage (127.0.0.1). Câ€™est lâ€™ordinateur qui se parle Ã  lui-mÃªme. RÃ¨gle dâ€™or : On ne touche jamais Ã  lo. eth0 / enp3s0 : La carte Ethernet (cÃ¢ble). wlan0 / wlp2s0 : La carte Wi-Fi. 2. Voir les adresses (Lâ€™identitÃ©) Pour savoir â€œquiâ€ vous Ãªtes sur le rÃ©seau. Commande : ip addr show\nCherchez la ligne inet pour voir votre IPv4 (ex: 192.168.1.50). Cherchez le mot UP dans la premiÃ¨re ligne pour savoir si la carte est active. 3. Ã‰teindre et allumer Parfois, pour relancer une connexion buggÃ©e, il faut virtuellement â€œdÃ©brancher le cÃ¢bleâ€.\nsudo ip link set enp3s0 down # Ã‰teindre sudo ip link set enp3s0 up # Rallumer ğŸŸ¢ Exercice #1 (En classe) Lancez ip addr show. Quelle est votre adresse IP (inet) ? Quel est le nom de votre interface principale (eth0, enpâ€¦, wlanâ€¦) ? Votre interface est-elle marquÃ©e comme UP ou DOWN ? Le carnet dâ€™adresses : DNS et Hosts Les ordinateurs prÃ©fÃ¨rent les chiffres (IP), les humains prÃ©fÃ¨rent les noms (google.com).\n1. /etc/hosts : Le post-it local Câ€™est un fichier texte simple qui force une correspondance Nom \u003c-\u003e IP. Linux regarde ce fichier avant de demander Ã  Internet.\nUtilitÃ© : Bloquer des sites ou nommer vos propres serveurs locaux. 2. /etc/resolv.conf : Lâ€™annuaire (DNS) Câ€™est ici que votre ordinateur sait Ã  qui demander le chemin quand il ne connaÃ®t pas une adresse. Il contient les adresses des serveurs DNS (ex: 8.8.8.8 pour Google).\nLe gestionnaire : NetworkManager Sur les distributions modernes (comme Mint ou Ubuntu), on ne configure plus tout Ã  la main. On utilise un â€œchef de chantierâ€ : NetworkManager.\nLâ€™outil en ligne de commande : nmcli\nnmcli general status : Tout va bien ? nmcli connection show : Quelles sont mes connexions ? Lâ€™outil visuel : nmtui\nTapez nmtui dans le terminal. Vous obtenez une interface graphiqueâ€¦ en texte ! IdÃ©al pour configurer le Wi-Fi sans souris. Le chef dâ€™orchestre : Systemd Un serveur Web (Apache) ou SSH tourne en arriÃ¨re-plan sans fenÃªtre ouverte. On appelle cela un Service (ou DÃ©mon). Le programme qui les gÃ¨re sâ€™appelle systemd.\nAnalogie : Le concierge dâ€™hÃ´tel Vous ne parlez pas aux employÃ©s, vous donnez vos ordres au concierge (Systemd).\nImmÃ©diat (â€œFais-le maintenantâ€) :\nsudo systemctl start apache2 (DÃ©marre le service)\nsudo systemctl stop apache2 (ArrÃªte le service) Futur (â€œFais-le Ã  chaque dÃ©marrageâ€) :\nsudo systemctl enable apache2 (Lance le service automatiquement au boot)\nsudo systemctl disable apache2 (EmpÃªche le lancement automatique) Lâ€™inspection :\nsudo systemctl status apache2 (Le service est-il actif ? A-t-il plantÃ© ?) ğŸŸ¢ Exercice #2 (En classe) Le service cron gÃ¨re les tÃ¢ches planifiÃ©es et est prÃ©sent sur tous les Linux.\nVÃ©rifiez le statut de cron : systemctl status cron. Est-il active (running) ? Regardez la ligne â€œLoadedâ€ : est-il enabled (activÃ© au dÃ©marrage) ? SÃ©curitÃ© : SSH et Pare-feu (UFW) 1. SSH (Secure Shell) Le cordon ombilical pour administrer un serveur Ã  distance. ssh utilisateur@192.168.1.50\n2. UFW (Uncomplicated Firewall) Le pare-feu est votre portier. Par dÃ©faut, il devrait refuser tout le monde, sauf ceux qui sont sur la liste dâ€™invitÃ©s.\nsudo ufw status verbose # Voir l'Ã©tat sudo ufw enable # Activer le douanier sudo ufw allow ssh # Ouvrir le port 22 (IMPORTANT sinon vous Ãªtes bloquÃ© dehors !) sudo ufw allow http # Ouvrir le port 80 (Web) ğŸŸ¢ Exercice #3 (En classe) Tapez sudo ufw status. Si câ€™est â€œinactifâ€, ne lâ€™activez pas encore. Listez les applications connues par le pare-feu avec : sudo ufw app list. Voyez-vous OpenSSH ? Laboratoire Utiliser le fichier labo11.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nVous Ãªtes administrateur systÃ¨me. On vous demande de prÃ©parer un petit serveur web qui doit dÃ©marrer automatiquement et Ãªtre protÃ©gÃ© par un pare-feu.\nÃ‰tape 1 : Reconnaissance rÃ©seau Identifiez lâ€™adresse IP de votre machine. Notez-la. Utilisez ping pour vÃ©rifier que vous avez accÃ¨s Ã  internet (ex: ping -c 3 google.com). Ã‰tape 2 : Manipulation de lâ€™annuaire local Ouvrez le fichier /etc/hosts avec nano (en sudo). Ajoutez une ligne Ã  la fin : 127.0.0.1 monsite.local. Enregistrez et quittez. Testez avec la commande ping -c 3 monsite.local. (Cela doit rÃ©pondre depuis 127.0.0.1). Ã‰tape 3 : Gestion du service Web *Note : Si Apache nâ€™est pas installÃ©, installez-le : sudo apt install apache2 -y*\nDemandez au â€œConciergeâ€ (systemctl) si Apache est dÃ©marrÃ©. Sâ€™il est Ã©teint, dÃ©marrez-le. Assurez-vous quâ€™il redÃ©marrera automatiquement si on reboote le serveur (enable). VÃ©rifiez que le serveur fonctionne : ouvrez votre navigateur et tapez votre adresse IP (trouvÃ©e Ã  lâ€™Ã©tape 1) ou localhost. Vous devriez voir la page â€œIt Works!â€. Ã‰tape 4 : SÃ©curisation VÃ©rifiez le statut actuel de UFW. Ajoutez une rÃ¨gle pour autoriser le trafic Web (Port 80 ou â€œApacheâ€). Ajoutez une rÃ¨gle pour autoriser le SSH (Port 22 ou â€œOpenSSHâ€) trÃ¨s important. Activez le pare-feu (enable). Affichez le statut final numÃ©rotÃ© (sudo ufw status numbered). Validation Appelez le professeur pour montrer :\nVotre page web qui sâ€™affiche. Le rÃ©sultat de la commande systemctl status apache2. Le rÃ©sultat de sudo ufw status montrant que le pare-feu est actif et filtre les ports. CorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectif de la semaine Comprendre comment une machine Linux communique, comment gÃ©rer les programmes qui tournent en arriÃ¨re-plan (services) et comment sÃ©curiser ces Ã©changes. Fichier pour les exercices (en classe) Utiliser le fichier exo-semaine11.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nWarning Cette semaine est critique : on touche Ã  lâ€™infrastructure physique. Câ€™est lâ€™une des rares opÃ©rations oÃ¹ une erreur de frappe peut dÃ©truire des donnÃ©es de maniÃ¨re irrÃ©versible. Le ton doit Ãªtre mÃ©thodique.",
    "tags": [],
    "title": "RÃ©seau et services \u0026 Examen #3",
    "uri": "/bloc-3/semaine-11/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Automatisation \u0026 scripting",
    "content": "Objectif de la semaine Comprendre comment automatiser des tÃ¢ches simples en transformant des commandes manuelles en un programme exÃ©cutable. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine12.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nQuâ€™est-ce quâ€™un script Bash ? Imaginez que Linux est un orchestre rempli dâ€™instruments (les commandes ls, cd, mkdir, etc.).\nEn ligne de commande, vous jouez dâ€™un instrument Ã  la fois. Un script Bash, câ€™est le chef dâ€™orchestre. Il a une partition (le fichier texte) et il dit Ã  chaque instrument quand jouer, combien de temps attendre, et comment jouer ensemble. Un script nâ€™est rien de magique. Câ€™est simplement un fichier texte avec lâ€™extension .sh qui contient une liste de commandes que vous auriez tapÃ©es Ã  la main, lâ€™une aprÃ¨s lâ€™autre.\nLâ€™anatomie dâ€™un script Un script a besoin de deux choses pour exister :\nLe Shebang (#!/bin/bash) : La premiÃ¨re ligne qui dit â€œCeci est un script Bashâ€. La permission (chmod +x) : Le droit dâ€™Ãªtre exÃ©cutÃ©. 1. Le Shebang (#!) Câ€™est la ligne la plus importante. Elle doit Ãªtre tout en haut, sur la ligne 1.\n#! : â€œHey Linux, voici le chemin vers lâ€™interprÃ¨te pour ce codeâ€. /bin/bash : â€œUtilise le langage Bash standardâ€. 2. Le droit dâ€™Ãªtre exÃ©cutÃ© Si vous essayez de lancer un script directement (ex.: taper juste mon_script.sh), cela Ã©chouera. Il y a deux rÃ¨gles de sÃ©curitÃ© Ã  respecter.\nÃ‰tape 1 : Donner la permission (chmod) Par dÃ©faut, Linux empÃªche lâ€™exÃ©cution de fichiers textes pour Ã©viter les virus ou les erreurs. Vous devez donner le â€œDroit dâ€™exÃ©cutionâ€ (x pour eXecute).\nchmod +x mon_script.sh Ã‰tape 2 : Lâ€™appel explicite (./) Si vous tapez juste mon_script.sh, Linux rÃ©pondra â€œCommande introuvableâ€ ou â€œPermission deniedâ€. Par sÃ©curitÃ©, Linux ne cherche jamais dans le dossier actuel. Il faut lui dire : â€œLance le script qui est ici (.) dans ce dossier (/)â€.\n./mon_script.sh 3. Les commentaires (#) Tout ce qui suit un # est pour vous, les humains. Lâ€™ordinateur lâ€™ignore. Utilisez-les pour expliquer votre code Ã  votre futur vous (qui aura tout oubliÃ© dans 2 semaines).\nğŸŸ¢ Exercice 1 (En classe) But : CrÃ©er un fichier, comprendre le Shebang et utiliser echo.\nOuvrez votre Ã©diteur de texte. Ã‰crivez un script qui : A le bon Shebang. Contient le commentaire â€œCâ€™est mon premier script Bashâ€ Affiche la phrase : â€œAujourdâ€™hui, nous sommes le :â€. ExÃ©cute la commande date juste aprÃ¨s. Sauvegardez le fichier sous le nom bonjour.sh. Details Utiliser echo pour afficher des messages Ã  lâ€™Ã©cran.\nLes variables En programmation, une variable est une boÃ®te avec une Ã©tiquette. On peut y mettre de lâ€™information pour la rÃ©utiliser plus tard.\n1. Les espaces (Erreur #1 des dÃ©butants) En Bash, la syntaxe est impitoyable. Il ne faut JAMAIS mettre dâ€™espaces autour du signe Ã©gal.\nâŒ PRENOM = \"Mario\" (Linux cherche la commande â€œPRENOMâ€). âœ… PRENOM=\"Mario\" (Linux stocke â€œMarioâ€ dans la boÃ®te PRENOM). 2. Initialisation vs lecture dâ€™une variable Pour remplir la boÃ®te : On utilise le nom seul (COURS=\"Linux\"). Pour voir le contenu : On utilise le symbole dollar $ (echo $COURS). #!/bin/bash FRUIT=\"Pomme\" # Je mets \"Pomme\" dans la boÃ®te echo \"J'aime la $FRUIT\" # J'affiche le contenu ğŸŸ¢ Exercice 2 (En classe) But : Manipuler des variables sans faire dâ€™erreurs dâ€™espaces.\nCrÃ©ez un nouveau script identite.sh. CrÃ©ez deux variables : NOM (avec votre nom) et AGE (avec votre Ã¢ge). Faites afficher une phrase complÃ¨te en utilisant ces variables : Exemple de rÃ©sultat attendu : â€œJe mâ€™appelle Patrick et jâ€™ai 25 ans.â€ Nâ€™oubliez pas le rituel dâ€™exÃ©cution (chmod + ./) ! Rendre le script intelligent (InteractivitÃ©) Un script statique est ennuyeux. Rendons-le dynamique.\n1. MÃ©thode A : Poser une question (read) Le script sâ€™arrÃªte et attend que lâ€™utilisateur tape quelque chose.\nread -p \"Quel est ton film prÃ©fÃ©rÃ© ? \" FILM echo \"Ah oui ? J'adore aussi $FILM !\" Details Lâ€™option -p de la commande read permet dâ€™afficher un message avant la saisie de lâ€™utilisateur. Elle sert Ã  guider lâ€™utilisateur en lui indiquant quoi entrer.\n2. MÃ©thode B : Les arguments ($1, $2â€¦) Au lieu de poser une question pendant lâ€™exÃ©cution, on donne lâ€™info au lancement. Exemple : ./mon_script.sh Toto\nCe que Bash comprend automatiquement :\n$0 : Le nom du script (./mon_script.sh) $1 : Le premier mot (argument) aprÃ¨s le script (Toto) $2 : Le deuxiÃ¨me mot, etc. $# : Le nombre total dâ€™arguments donnÃ©s. Exemple concret : script.sh\n#!/bin/bash echo \"CrÃ©ation du dossier $1 pour le projet.\" mkdir $1 Si je lance ./script.sh SiteWeb, il crÃ©era le dossier â€œSiteWebâ€ et affichera la phrase â€œCrÃ©ation du dossier SiteWeb pour le projet.â€.\nğŸŸ¢ Exercice 3 (En classe) But : Combiner read ou les arguments $1 avec une vraie commande systÃ¨me (mkdir).\nCrÃ©ez un script archive.sh. Le script doit demander Ã  lâ€™utilisateur : â€œQuel est le nom du dossier Ã  crÃ©er ?â€. RÃ©cupÃ©rez la rÃ©ponse dans une variable. CrÃ©ez ce dossier avec la commande mkdir. Ensuite, entrez dans ce dossier (cd) et crÃ©ez un fichier vide nommÃ© info.txt (touch info.txt). Affichez â€œOpÃ©ration terminÃ©e !â€ Ã  la fin. ContrÃ´ler le temps : sleep et wait Parfois, lâ€™exÃ©cution du script doit marquer une pause.\n1. La sieste (sleep) La commande sleep suspend lâ€™exÃ©cution. Utile pour attendre quâ€™un tÃ©lÃ©chargement finisse ou pour laisser le temps Ã  lâ€™utilisateur de lire.\necho \"Attention, fermeture dans 3 secondes...\" sleep 1 echo \"2...\" sleep 1 echo \"1...\" sleep 1 echo \"Bye !\" 2. La synchronisation (wait) Si vous lancez des tÃ¢ches lourdes en arriÃ¨re-plan (avec le symbole \u0026 Ã  la fin de la ligne), le script risque de se terminer avant elles. wait dit au script : â€œNe quitte pas tant que les tÃ¢ches lancÃ©es ne sont pas finiesâ€.\n./gros_calcul.sh \u0026 # Je lance Ã§a en arriÃ¨re-plan echo \"Je fais autre chose pendant ce temps...\" wait # J'attends que le gros calcul finisse echo \"Tout est fini.\" Laboratoire Vous Ãªtes administrateur systÃ¨me. Vous en avez assez de demander les informations manuellement aux nouveaux employÃ©s. Vous allez crÃ©er un script dâ€™accueil automatisÃ©.\nÃ‰tape 1 : Le squelette CrÃ©ez un script nommÃ© setup_user.sh.\nIl doit commencer par le bon Shebang. Il doit afficher â€œBienvenue dans lâ€™assistant de configurationâ€. Rendez-le exÃ©cutable et testez-le. Ã‰tape 2 : Collecte dâ€™informations (Mode interactif) Modifiez le script pour quâ€™il demande (avec read) :\nLe nom de lâ€™utilisateur (stockÃ© dans NOM). Le dÃ©partement de travail (stockÃ© dans DEPT). Ã‰tape 3 : Simulation dâ€™installation (Sleep) Affichez un message â€œCrÃ©ation du compte pour $NOM dans le dÃ©partement $DEPTâ€¦â€.\nAjoutez une pause de 3 secondes (sleep 3) pour faire â€œstyleâ€ que lâ€™ordinateur travaille fort. Affichez â€œConfiguration terminÃ©e !â€. Ã‰tape 4 : Les arguments (Mode expert) Modifiez votre script pour quâ€™il puisse aussi accepter le nom et le dÃ©partement directement en arguments au lancement du script (ex: ./setup_user.sh FrÃ©dÃ©ric ComptabilitÃ©).\nIndice : Affichez simplement les variables $1 et $2 au dÃ©but pour vÃ©rifier si elles existent.\nÃ‰tape 5 : Le fichier journal Faites en sorte que votre script Ã©crive le rÃ©sultat (Nom et DÃ©partement) dans un fichier texte nommÃ© log.txt au lieu de (ou en plus de) lâ€™afficher Ã  lâ€™Ã©cran.\nIndice : Utilisez les chevrons de redirection \u003e\u003e.\nCorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectif de la semaine Comprendre comment automatiser des tÃ¢ches simples en transformant des commandes manuelles en un programme exÃ©cutable. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine12.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nQuâ€™est-ce quâ€™un script Bash ? Imaginez que Linux est un orchestre rempli dâ€™instruments (les commandes ls, cd, mkdir, etc.).",
    "tags": [],
    "title": "Introduction au Scripting Bash",
    "uri": "/bloc-4/semaine-12/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Automatisation \u0026 scripting",
    "content": "Objectif la semaine CrÃ©er des scripts dynamiques qui sâ€™adaptent aux paramÃ¨tres donnÃ©s et Ã  lâ€™Ã©tat du systÃ¨me. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine2.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Le flux de contrÃ´le (if/else/fi) Jusquâ€™Ã  prÃ©sent, vos scripts Ã©taient comme des robots aveugles : ils exÃ©cutaient une liste dâ€™ordres lâ€™un aprÃ¨s lâ€™autre, sans se soucier de savoir si lâ€™ordre prÃ©cÃ©dent avait fonctionnÃ©.\nAvec le flux de contrÃ´le, nous allons leur donner une intelligence. Ils pourront dire : â€œSi la copie Ã©choue, je mâ€™arrÃªteâ€ ou â€œSi le dossier nâ€™existe pas, je le crÃ©eâ€.\n1. Le code de retour ($?) et exit Comment le script sait-il si une commande a rÃ©ussi ? GrÃ¢ce Ã  un petit numÃ©ro invisible quâ€™on appelle le Code de Retour (Exit Code).\nChaque fois quâ€™une commande se termine, elle laisse un message au systÃ¨me, stockÃ© dans la variable spÃ©ciale $?.\nDetails LA LOGIQUE INVERSÃ‰E DE LINUX\nOubliez la logique scolaire oÃ¹ 100% ou 1 est le meilleur score. En informatique systÃ¨me :\n0 (ZÃ©ro) = SUCCÃˆS (â€œZÃ©ro erreurâ€, tout sâ€™est bien passÃ©). 1 Ã  255 = Ã‰CHEC (Il y a eu un problÃ¨me). Exemples :\nls /home echo $? # Affiche 0 (SuccÃ¨s : le dossier existe) ls /dossier_qui_n_existe_pas echo $? # Affiche 2 (ou autre chiffre \u003e 0 : Ã‰chec) Details ArrÃªter le script : exit 1 (ArrÃªt dâ€™urgence avec code dâ€™erreur). 2. Les opÃ©rateurs de combinaison (\u0026\u0026, ||, ;) On peut enchaÃ®ner des commandes â€œÃ  la suiteâ€ sur une seule ligne. Le choix du symbole dicte le comportement du script.\nOpÃ©rateur Nom Logique (Le â€œSiâ€) ; Point-virgule Fais A puis fais B (Peu importe si A explose) \u0026\u0026 ET (AND) Si A rÃ©ussit, fais B (ArrÃªt immÃ©diat si A Ã©choue) || OU (OR) Si A Ã©choue, fais B (ArrÃªt immÃ©diat si A rÃ©ussit) Exemple concret :\n# CrÃ©er un dossier ET entrer dedans immÃ©diatement (si la crÃ©ation a marchÃ©) mkdir projet \u0026\u0026 cd projet # Tenter une copie, OU afficher une alerte si elle rate cp rapport.txt /backup/ || echo \" Erreur : Sauvegarde Ã©chouÃ©e !\" 3. La structure IF-THEN / ELSE / FI Les opÃ©rateurs \u0026\u0026 et || sont parfaits pour des actions courtes. Mais pour des scÃ©narios complexes, on utilise le bloc if.\nLa syntaxe La structure commence par if (si) et se termine obligatoirement par fi (if Ã  lâ€™envers).\nif [ condition ]; then # Commandes exÃ©cutÃ©es si c'est VRAI (Code de retour 0) echo \"C'est vrai !\" else # Commandes exÃ©cutÃ©es si c'est FAUX (Code de retour \u003e 0) echo \"C'est faux !\" fi Details LE PIÃˆGE MORTEL DES ESPACES\nEn Bash, le crochet [ nâ€™est pas une simple dÃ©coration. Câ€™est une commande (un alias de la commande test). Comme toute commande, elle a besoin dâ€™espaces autour dâ€™elle.\nâŒ if [$a=\"non\"] : ERREUR (Bash cherche une commande nommÃ©e [$a=\"non\"] qui nâ€™existe pas). âœ… if [ \"$a\" = \"non\" ] : SUCCÃˆS (Il y a un espace aprÃ¨s [ et avant ]). 4. Les tests Bash ne teste pas un fichier comme il teste un nombre. Il faut utiliser les bons â€œdrapeauxâ€ (flags).\nPour les FICHIERS -e : Existe (que ce soit un fichier ou un dossier). -f : Est un Fichier (File) standard. -d : Est un Dossier (Directory). Pour les NOMBRES (Entiers) -eq : Equal (Ã‰gal Ã ). -gt : Greater Than (Plus grand que). -lt : Less Than (Plus petit que). -ne : Not Equal (DiffÃ©rent de). Pour le TEXTE (ChaÃ®nes de caractÃ¨res) = : Est identique Ã . != : Est diffÃ©rent de. -z : La chaÃ®ne est vide (Zero length). Lâ€™astuce de lâ€™inverse (!) On peut inverser nâ€™importe quel test avec le point dâ€™exclamation (le â€œNOTâ€). if [ ! -d \"/tmp\" ] signifie â€œSi le dossier /tmp Nâ€™EXISTE PASâ€.\nVoici des petits exercices pour tester votre comprÃ©hension immÃ©diate.\nğŸŸ¢ Exercice 1 (en classe) Quâ€™est-ce qui va sâ€™afficher si on lance ./script.sh 5.\n#!/bin/bash VALEUR=$1 if [ $VALEUR -gt 10 ]; then echo \"Grand\" else echo \"Petit\" fi ğŸŸ¢ Exercice 2 (en classe) Sans utiliser if, Ã©crivez une seule ligne de commande qui :\nCrÃ©e un dossier nommÃ© Archives. Si la crÃ©ation rÃ©ussit, affiche le message â€œDossier crÃ©Ã©â€. Si la crÃ©ation Ã©choue (car il existe dÃ©jÃ ), affiche â€œLe dossier existe dÃ©jÃ â€. Indice : Utilisez mkdir, \u0026\u0026 et ||.\nğŸŸ¢ Exercice 3 (en classe) Le script suivant contient 3 erreurs qui lâ€™empÃªchent de fonctionner. Trouvez-les et corrigez-les.\n#!/bin/bash NOM=\"Batman\" if [$NOM = \"Batman\"] echo \"Je suis la nuit.\" else echo \"Tu n'es pas le hÃ©ros.\" fi ğŸŸ¢ Exercice 4 (en classe) CrÃ©ez un script nommÃ© verif_age.sh.\nDÃ©clarez une variable AGE=15. Utilisez un if pour vÃ©rifier si lâ€™Ã¢ge est plus grand ou Ã©gal (-ge) Ã  18. Si oui, affichez â€œMajeurâ€. Sinon, affichez â€œMineurâ€. LABORATOIRE Objectif : CrÃ©er des outils dâ€™administration robustes qui ne plantent pas Ã  la moindre erreur.\nUtiliser le fichier labo13.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nÃ‰tape 1 : Les arguments Comprendre $1, $2 etc.\nCrÃ©ez analyse.sh.\nIl doit afficher :\nâ€œLe nom du script est : [nom]â€ â€œTu mâ€™as donnÃ© [nombre] arguments.â€ â€œLe premier est : [arg1]â€ â€œLe deuxiÃ¨me est : [arg2]â€ Testez avec : ./analyse.sh banane pomme et ./analyse.sh.\nÃ‰tape 2 : Conditions fichiers ScÃ©nario : CrÃ©er un dossier de projet, mais afficher un message informant lâ€™utilisateur sâ€™il existe dÃ©jÃ .\nCrÃ©ez creer_projet.sh. Il prend un nom de dossier en argument ($1). Logique : VÃ©rifier si $1 est vide (sÃ©curitÃ©). VÃ©rifier si le dossier existe dÃ©jÃ  (if [ -d \"$1\" ]). SI OUI : Afficher â€œErreur : Le projet $1 existe dÃ©jÃ  !â€ et quitter (exit 1). SI NON : Le crÃ©er (mkdir \"$1\") et afficher â€œProjet $1 crÃ©Ã© avec succÃ¨s.â€. Ã‰tape 3 : UID et Exit ScÃ©nario : Un script de maintenance qui DOIT Ãªtre lancÃ© en root.\nCrÃ©ez maintenance.sh. Le script doit vÃ©rifier qui le lance. Astuce : La variable $UID vaut 0 pour root. Logique : if [ \"$UID\" -ne 0 ]; then Afficher â€œSTOP ! Vous devez Ãªtre root (sudo) pour lancer ce script.â€ exit 1 fi Afficher â€œLancement de la mise Ã  jourâ€¦â€ (et faire un faux sleep 2). Testez-le en tant quâ€™Ã©tudiant (Ã‰chec) et avec sudo (SuccÃ¨s). Ã‰tape 4 : SynthÃ¨se Combiner grep, variables, arguments et conditions.\nCrÃ©ez check_user.sh. Il prend un nom dâ€™utilisateur en argument. Il cherche cet utilisateur dans /etc/passwd (utilisez grep -q pour le mode silencieux). Si grep trouve (code retour $? Ã©gal Ã  0) : Affichez â€œLâ€™utilisateur existe.â€ Sinon : Affichez â€œUtilisateur inconnu.â€ CorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectif la semaine CrÃ©er des scripts dynamiques qui sâ€™adaptent aux paramÃ¨tres donnÃ©s et Ã  lâ€™Ã©tat du systÃ¨me. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine2.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nThÃ©orie Le flux de contrÃ´le (if/else/fi) Jusquâ€™Ã  prÃ©sent, vos scripts Ã©taient comme des robots aveugles : ils exÃ©cutaient une liste dâ€™ordres lâ€™un aprÃ¨s lâ€™autre, sans se soucier de savoir si lâ€™ordre prÃ©cÃ©dent avait fonctionnÃ©.",
    "tags": [],
    "title": "Logique conditionnelle \u0026 tests sur fichiers",
    "uri": "/bloc-4/semaine-13/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Automatisation \u0026 scripting",
    "content": "Objectif de la semaine Traiter des centaines de fichiers en une seconde et programmer des tÃ¢ches rÃ©pÃ©titives dans le temps. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine14.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nLâ€™automatisation et les boucles La paresse est la premiÃ¨re qualitÃ© de lâ€™administrateur systÃ¨me. Si vous devez rÃ©pÃ©ter une tÃ¢che plus de trois fois, ne le faites pas Ã  la main.\nLâ€™automatisation repose sur le concept de Boucle (Loop). Une boucle permet de rÃ©pÃ©ter un bloc de commandes sans avoir Ã  les rÃ©Ã©crire.\n1. La boucle for La boucle for est idÃ©ale quand vous connaissez Ã  lâ€™avance la liste des Ã©lÃ©ments Ã  traiter (une liste de fichiers, une liste de prÃ©noms, une sÃ©quence de nombres).\nSyntaxe et fonctionnement for VARIABLE in LISTE ...; do COMMANDES; done La structure se lit : â€œPour chaque VARIABLE trouvÃ©e dans la LISTE, faire les COMMANDES suivantes.â€\nExemple :\n# 1. variable 2. Liste # â†“ â†“ for fichier in *.txt do # 3. L'action (qui utilise le contenant) echo \"Je traite le fichier : $fichier\" done Ce qui se passe sous le capot :\nBash regarde la liste (tous les fichiers .txt). Il prend le premier fichier et met son nom dans la variable $fichier. Il exÃ©cute les commandes entre do et done. Il remonte, prend le deuxiÃ¨me fichier, met son nom dans $fichier (lâ€™ancien est oubliÃ©). Il recommence jusquâ€™Ã  ce que la liste soit vide. ğŸŸ¢ Exercice 1 (En classe) Objectif : CrÃ©er plusieurs dossiers dâ€™un seul coup sans taper mkdir 3 fois.\nOuvrez votre terminal. Ã‰crivez (ou copiez) la commande suivante et validez : for dossier in Projet_A Projet_B Projet_C do echo \"CrÃ©ation du dossier $dossier...\" mkdir \"$dossier\" done VÃ©rifiez le rÃ©sultat avec la commande ls. Vous devriez voir vos trois dossiers crÃ©Ã©s. 2. La boucle while La boucle while (Tant que) est utilisÃ©e quand on ne sait pas combien de temps cela va durer. Elle continue tant quâ€™une condition prÃ©cise reste VRAIE.\nSyntaxe et fonctionnement # Tant que la condition entre crochets est VRAIE while [ condition ]; do # ExÃ©cuter ces commandes commande_1 commande_2 done Exemple : Le compte Ã  rebours Pour quâ€™une boucle while sâ€™arrÃªte, il faut absolument que quelque chose change Ã  lâ€™intÃ©rieur de la boucle (sinon, la condition restera toujours vraie !).\ncompteur=5 while [ $compteur -gt 0 ]; do # Tant que compteur \u003e 0 echo \"Explosion dans $compteur...\" sleep 1 # Attendre 1 seconde ((compteur--)) # Enlever 1 au compteur done echo \"BOUM !\" Details Note : ((...)) est une syntaxe spÃ©ciale pour faire des calculs mathÃ©matiques rapides en Bash.\nğŸŸ¢ Exercice 2 (En classe) Objectif : CrÃ©er un script interactif qui\nCrÃ©ez un petit script nommÃ© voyage.sh (avec vim voyage.sh). Le script doit : demander Ã  lâ€™utilisateur de rÃ©pondre Ã  la question â€œSommes nous arrivÃ©s ?â€, tant quâ€™il nâ€™entre pas â€œouiâ€. Lancez le script. Testez le avec les rÃ©ponses: â€œnonâ€, â€œbientÃ´tâ€, â€œjamaisâ€. Le script devrait sâ€™arrÃªter que si vous tapez â€œouiâ€. 3. La boucle infinie Que se passe-t-il si la condition reste toujours VRAIE ? Le script ne sâ€™arrÃªtera jamais. Le processeur va continuer Ã  travailler indÃ©finiment.\nCâ€™est souvent une erreur de programmation (oublier de modifier la variable), mais câ€™est parfois voulu (pour un serveur web qui doit Ã©couter 24h/24).\nWarning Ne lancez pas ce script sans lire la suite !\n# Exemple de boucle infinie while true; do echo \"Je tourne en rond...\" sleep 1 done Details KIT DE SURVIE (Ã€ mÃ©moriser) Si vous lancez un script et quâ€™il part en boucle infinie (il dÃ©file sans sâ€™arrÃªter) : Appuyez simultanÃ©ment sur : **Ctrl + C** Cette combinaison envoie le signal SIGINT (Signal Interrupt) qui ordonne au programme de sâ€™arrÃªter immÃ©diatement.\nğŸŸ¢ Exercice 3 (En classe) Objectif : Apprendre Ã  tuer un processus fou.\nDans le terminal, tapez cette commande qui ne sâ€™arrÃªtera jamais : while true; do echo \"Au secours !\"; sleep 1; done Regardez le texte dÃ©filer pendant quelques secondes. ExÃ©cutez la combinaison de touches **Ctrl + C** pour reprendre le contrÃ´le de votre terminal. Planification de tÃ¢ches (Cron) Imaginez que vous ayez un assistant personnel virtuel capable dâ€™effectuer des tÃ¢ches rÃ©pÃ©titives pour vous, mÃªme lorsque vous dormez. Sous Linux, cet assistant sâ€™appelle le dÃ©mon Cron.\nÃ€ quoi Ã§a sert ?\nLancer des sauvegardes (backups) la nuit. Envoyer des rapports par courriel tous les lundis matin. Vider les fichiers temporaires toutes les heures. 1. Lâ€™Ã©dition de votre agenda (crontab) Chaque utilisateur possÃ¨de son propre fichier de planification, appelÃ© la Â« crontab Â» (Cron Table).\nPour modifier votre agenda, utilisez la commande suivante :\ncrontab -e (Le e signifie â€œeditâ€).\nNote importante : Si câ€™est la premiÃ¨re fois, Linux vous demandera de choisir un Ã©diteur de texte. Choisissez Vim.\n2. La syntaxe des 5 Ã©toiles Câ€™est le cÅ“ur du systÃ¨me. Une tÃ¢che Cron est dÃ©finie par une ligne unique composÃ©e de 5 champs temporels suivis de la commande.\nIl faut lire la ligne de gauche Ã  droite. Pour quâ€™une commande se lance, toutes les conditions de temps doivent Ãªtre validÃ©es.\nPosition Champ Valeurs possibles Ce que Ã§a signifie 1 Minutes 0 - 59 Ã€ quelle minute ? 2 Heures 0 - 23 Ã€ quelle heure ? 3 Jour du mois 1 - 31 Le combien du mois ? 4 Mois 1 - 12 En quel mois ? 5 Jour semaine 0 - 6 Quel jour ? (0 = Dimanche) Les caractÃ¨res spÃ©ciaux Ã  connaÃ®tre * (Lâ€™astÃ©risque) : Signifie â€œTOUSâ€ (ex: toutes les heures, tous les jours). / (Le slash) : Signifie â€œCHAQUEâ€ (ex: */5 dans les minutes = toutes les 5 minutes). , (La virgule) : Pour faire une liste (ex: 1,15 = le 1er et le 15 du mois). 3. Exemples traduits en langage humain Analysons ensemble ces exemples pour comprendre la logique :\nLâ€™Ã©vÃ©nement quotidien : 0 3 * * * /home/etudiant/backup.sh Â« Ã€ la minute 0, de la 3Ã¨me heure, peu importe le jour du mois, peu importe le mois, peu importe le jour de la semaine. Â» â¡ Tous les jours Ã  03h00 du matin.\nLe dÃ©but de semaine : 0 8 * * 1 /home/etudiant/script.sh Â« Ã€ 08h00 pile, nâ€™importe quel jour du mois, mais OBLIGATOIREMENT si câ€™est le jour 1 (Lundi). Â» â¡ Tous les lundis Ã  08h00.\nLa rÃ©pÃ©tition frÃ©quente : */5 * * * * /home/etudiant/check_ping.sh Â« Toutes les tranches de 5 minutes, Ã  toutes les heuresâ€¦ Â» â¡ Toutes les 5 minutes (00:05, 00:10, 00:15, etc.).\n4. Les chemins absolus Câ€™est lâ€™erreur qui fait Ã©chouer 99% des scripts dÃ©butants.\nLorsque Cron lance votre script, il ne connaÃ®t pas votre dossier actuel, ni vos raccourcis. Il est â€œaveugleâ€.\nâŒ python script.py (Cron ne sait pas oÃ¹ est script.py ni oÃ¹ est python). âœ… /usr/bin/python3 /home/etudiant/projets/script.py (Chemins absolus). RÃ¨gle dâ€™or : Utilisez toujours le chemin complet, depuis la racine /. Aidez-vous de la commande pwd pour connaÃ®tre le chemin de vos fichiers.\n5. OÃ¹ va la sortie ? (Les Logs) Si votre script affiche un message (print ou echo), vous ne le verrez jamais car le script tourne en arriÃ¨re-plan. Pour garder une trace (â€œLogâ€), on utilise les redirections.\n# Syntaxe complÃ¨te recommandÃ©e * * * * * /home/user/mon_script.sh \u003e\u003e /home/user/journal.log 2\u003e\u00261 \u003e\u003e : Ajoute le rÃ©sultat Ã  la fin du fichier journal.log sans lâ€™Ã©craser. 2\u003e\u00261 : Redirige aussi les messages dâ€™erreurs (2) vers la mÃªme sortie standard (1). TrÃ¨s utile pour comprendre pourquoi un script a plantÃ© ! ğŸŸ¢ Exercice 1 (En classe) Sans utiliser le terminal pour lâ€™instant, Ã©crivez la ligne Cron correspondant aux demandes suivantes :\nExÃ©cuter script.sh tous les mercredis Ã  14h30. ExÃ©cuter backup.sh le 1er de chaque mois Ã  minuit. ExÃ©cuter ping.sh toutes les 15 minutes. ğŸŸ¢ Exercice 2 (En classe) Nous allons crÃ©er une tÃ¢che qui laisse une trace chaque minute.\nOuvrez votre crontab : crontab -e Ajoutez la ligne suivante Ã  la fin du fichier (attention aux chemins !) : * * * * * echo \"Cron fonctionne : $(date)\" \u003e\u003e /home/votre_nom/cron_test.txt (Remplacez votre_nom par votre vrai dossier utilisateur). 3. Sauvegardez et quittez (Ctrl+X, Y, Enter). 4. Attendez une minute, puis vÃ©rifiez si le fichier se crÃ©e :\ncat /home/votre_nom/cron_test.txt ğŸŸ¢ Exercice 3 (En classe) CrÃ©ez un petit script bonjour.sh dans votre dossier personnel : #!/bin/bash echo \"Bonjour, je suis un script !\" Rendez-le exÃ©cutable (chmod +x bonjour.sh). Programmez-le dans Cron pour quâ€™il sâ€™exÃ©cute dans 2 minutes (regardez lâ€™heure actuelle avec date). Redirigez la sortie vers un fichier resultat.log. Le piÃ¨ge : Si le fichier resultat.log est vide ou nâ€™existe pas, câ€™est probablement un problÃ¨me de chemin. DÃ©boguez ! Laboratoire Objectifs :\nUtiliser la boucle for pour traiter des fichiers en lot. Utiliser la boucle while pour crÃ©er un script de surveillance continue. Planifier lâ€™exÃ©cution automatique de scripts avec Cron. Utiliser le fichier labo14.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nPartie 0 : Mise en place de lâ€™environnement Avant de commencer lâ€™automatisation, nous devons crÃ©er un environnement de travail qui simule des fichiers de logs (journaux) gÃ©nÃ©rÃ©s par une application.\nOuvrez votre terminal. CrÃ©ez un dossier nommÃ© labo_automation dans votre dossier personnel. Ã€ lâ€™intÃ©rieur, crÃ©ez deux sous-dossiers : logs et archives. Dans le dossier logs, crÃ©ez 5 fichiers vides nommÃ©s app1.log, app2.log, app3.log, system.log, error.log. Astuce : Utilisez une commande unique avec touch et les accolades {}.* Partie 1 : Archivage avec la boucle for Les fichiers de logs sâ€™accumulent. Votre responsable vous demande un script pour les dÃ©placer vers le dossier dâ€™archives en leur ajoutant la date du jour, afin de libÃ©rer le dossier de logs actifs.\nCrÃ©ez un script nommÃ© archiveur.sh Ã  la racine de labo_automation. Nâ€™oubliez pas le Shebang (#!/bin/bash) au dÃ©but. Le script doit : Afficher le message â€œDÃ©but de lâ€™archivageâ€¦â€. Utiliser une boucle for pour parcourir tous les fichiers finissant par .log dans le dossier logs/. Pour chaque fichier trouvÃ© : DÃ©terminer le nom de base du fichier (ex: app1.log). DÃ©placer ce fichier vers le dossier archives/ en le renommant avec le format : nom_original-DATE.bak. Format de la date : Utilisez $(date +%F) (AnnÃ©e-Mois-Jour). Afficher un message : â€œArchivage de [fichier] terminÃ©.â€ Rendez le script exÃ©cutable. Testez le script. VÃ©rifiez que le dossier logs est vide et que archives contient les fichiers renommÃ©s. Partie 2 : Surveillance avec la boucle while (30 min) Vous devez surveiller la crÃ©ation de nouveaux fichiers dans le dossier logs en temps rÃ©el pendant une intervention de maintenance.\nCrÃ©ez un script nommÃ© moniteur.sh. Ce script doit utiliser une boucle while infinie (true). Ã€ lâ€™intÃ©rieur de la boucle : Comptez le nombre de fichiers prÃ©sents dans le dossier logs. Affichez : â€œSurveillance active : X fichiers prÃ©sents dans logsâ€ (oÃ¹ X est le nombre). Si le nombre de fichiers est Ã©gal Ã  0, affichez â€œTout est propre.â€. Si le nombre est supÃ©rieur Ã  0, affichez â€œAttention : Nouveaux logs dÃ©tectÃ©s !â€. Mettez le script en pause pendant 5 secondes avant de recommencer la boucle (commande sleep). Lancez ce script dans un terminal. Test : Ouvrez un deuxiÃ¨me terminal. CrÃ©ez un nouveau fichier dans logs (touch logs/test.log) et observez la rÃ©action de votre script moniteur.sh. ArrÃªtez le script avec Ctrl + C. Partie 3 : Automatisation avec Cron (20 min) Votre script dâ€™archivage fonctionne bien, mais vous ne voulez pas le lancer manuellement tous les jours. Vous allez le planifier.\nAssurez-vous dâ€™avoir remis quelques fichiers .log dans le dossier logs pour le test. Ouvrez lâ€™Ã©diteur de tÃ¢ches cron (crontab -e). Ajoutez une tÃ¢che planifiÃ©e qui exÃ©cute votre script archiveur.sh toutes les minutes. Note importante : Cron ne voit pas votre Ã©cran. Pour vÃ©rifier que cela fonctionne, vous devez rediriger la sortie du script vers un fichier journal, par exemple : \u003e\u003e /home/votre_user/labo_automation/cron_history.txt 2\u003e\u00261. Sauvegardez et quittez. Attendez 2 minutes. VÃ©rifiez : Si les fichiers dans logs ont disparu. Si le fichier cron_history.txt contient bien les messages â€œDÃ©but de lâ€™archivageâ€¦â€. Partie 4 : Nettoyage AprÃ¨s avoir pris toutes vos captures dâ€™Ã©cran :\nModifiez le crontab pour supprimer la tÃ¢che planifiÃ©e (pour Ã©viter de remplir votre disque dur inutilement aprÃ¨s le cours !). Modifiez le script archiveur.sh pour quâ€™il vÃ©rifie dâ€™abord si le dossier logs est vide. Sâ€™il est vide, il doit afficher â€œRien Ã  archiverâ€ et sâ€™arrÃªter. CorrigÃ© du laboratoire Ã€ venir (samedi ou dimanche)",
    "description": "Objectif de la semaine Traiter des centaines de fichiers en une seconde et programmer des tÃ¢ches rÃ©pÃ©titives dans le temps. Fichier pour les exercices (en classe)\nUtiliser le fichier exo-semaine14.docx pour y mettre vos rÃ©ponses et captures dâ€™Ã©cran.\nTÃ©lÃ©charger le fichier docx\nLâ€™automatisation et les boucles La paresse est la premiÃ¨re qualitÃ© de lâ€™administrateur systÃ¨me. Si vous devez rÃ©pÃ©ter une tÃ¢che plus de trois fois, ne le faites pas Ã  la main.",
    "tags": [],
    "title": "Boucles \u0026 planification (Cron)",
    "uri": "/bloc-4/semaine-14/index.html"
  },
  {
    "breadcrumb": "Accueil du coursÂ \u003eÂ Automatisation \u0026 scripting",
    "content": "Objectif de la semaine DÃ©montrer une autonomie complÃ¨te sur lâ€™administration, la sÃ©curisation et lâ€™automatisation dâ€™un systÃ¨me Linux. Plan de la sÃ©ance #1 Il nâ€™y a plus de nouvelle matiÃ¨re. Câ€™est le moment de consolider tout ce qui a Ã©tÃ© vu depuis 15 semaines et de prouver que vous Ãªtes prÃªts pour le prochain cours dans vos Ã©tudes.\nLa â€œBig Pictureâ€ (Vue dâ€™ensemble) (30 min) Les 5 piÃ¨ges de lâ€™examen (30 min) FAQ et dÃ©pannage (45 min) PrÃ©paration mentale (15 min) Plan de la sÃ©ance #2 RÃ‰VISION \u0026 CLÃ”TURE Â« Aujourdâ€™hui, câ€™est le â€œBoss Battleâ€. Vous avez tous les outils en main. On va juste sâ€™assurer quâ€™ils sont bien acquis. Â»\n15.1 La â€œBig Pictureâ€ (Vue dâ€™ensemble) On retrace le chemin parcouru pour connecter les points :\nLe MatÃ©riel (Sem 10) : On a ajoutÃ© des disques (/dev/sdb). Le SystÃ¨me (Sem 1-4) : On a installÃ© lâ€™OS et appris Ã  bouger dedans. Les Humains (Sem 5-8) : On a crÃ©Ã© des portes (rwx) et des clÃ©s (utilisateurs). Lâ€™Intelligence (Sem 11-14) : On a crÃ©Ã© des robots (scripts) pour gÃ©rer tout Ã§a Ã  notre place. 15.2 Les 5 piÃ¨ges de lâ€™examen Rappel des erreurs qui coÃ»tent 0/100 Ã  une question :\nLe FSTAB brisÃ© : Oublier de faire mount -a aprÃ¨s avoir Ã©ditÃ© /etc/fstab. RÃ©sultat : La VM ne redÃ©marre pas. Lâ€™espace fatal : Ã‰crire NOM = Toto dans un script. (Pas dâ€™espaces autour du Ã©gal !). Le script muet : Oublier chmod +x script.sh. Le Cron ne pourra jamais le lancer. La mauvaise partition : Formater sda1 (le systÃ¨me) au lieu de sdb1 (le nouveau disque). Le Slash de trop : mv /dossier vs mv dossier. (Absolu vs Relatif). 15.3 FAQ et dÃ©pannage Atelier libre. Les Ã©tudiants testent leurs scripts de sauvegarde une derniÃ¨re fois. Le prof passe voir ceux qui ont encore des problÃ¨mes avec les boucles for. 15.4 PrÃ©paration mentale Nettoyage des VM (ou dÃ©ploiement dâ€™une VM dâ€™examen fraÃ®che). Consigne : â€œÃ€ lâ€™examen, lisez TOUT lâ€™Ã©noncÃ© avant de taper la premiÃ¨re commande.â€ EXAMEN FINAL (1h30) Mise en situation : Vous Ãªtes lâ€™administrateur systÃ¨me junior de la compagnie â€œTechCÃ©gepâ€. Votre superviseur est absent et vous laisse une liste de tÃ¢ches critiques Ã  effectuer sur le serveur. Vous devez livrer un systÃ¨me fonctionnel, sÃ©curisÃ© et automatisÃ©.\nğŸ“„ FEUILLE Dâ€™EXAMEN Consignes :\nConnectez-vous en tant que etudiant. Toutes les tÃ¢ches doivent Ãªtre vÃ©rifiables. Lâ€™accÃ¨s Ã  vos notes de cours (PDF/Blackbook) est permis. Internet est interdit. SECTION A : Infrastructure \u0026 stockage (10 points) Votre serveur manque dâ€™espace. Vous devez ajouter un disque dÃ©diÃ© aux archives.\nAjoutez un disque dur virtuel de 2 Go Ã  votre VM. Partitionnez ce disque pour utiliser tout lâ€™espace disponible (Une seule partition primaire). Formatez cette partition en ext4. CrÃ©ez le rÃ©pertoire de montage /mnt/archives. Montez la partition de maniÃ¨re permanente (via /etc/fstab) dans /mnt/archives. Preuve : RedÃ©marrez la VM. Si elle remonte avec le disque accessible, vous avez les points. SECTION B : Gestion Utilisateurs \u0026 SÃ©curitÃ© (10 points) Vous devez configurer lâ€™environnement pour lâ€™Ã©quipe de dÃ©veloppement.\nCrÃ©ez un groupe nommÃ© developpeurs. CrÃ©ez deux utilisateurs : dave et anna. Ajoutez dave et anna au groupe developpeurs. CrÃ©ez un dossier /mnt/archives/projet_web. Configurez les permissions de ce dossier pour que : dave et anna puissent lire et Ã©crire dedans. Les autres utilisateurs (non-membres du groupe) nâ€™aient aucun accÃ¨s. (Indice : Pensez au chown et au chmod en octal). SECTION C : Scripting \u0026 Automatisation (15 points) La compagnie a besoin dâ€™une sauvegarde automatique des configurations.\nCrÃ©ez un script nommÃ© backup_config.sh dans /home/etudiant/Scripts. Le script doit : VÃ©rifier si lâ€™utilisateur qui lance le script est root. Sinon, afficher une erreur et quitter. DÃ©finir une variable DATE au format AAAA-MM-JJ. CrÃ©er une archive compressÃ©e (.tar.gz) du dossier /etc. Nommer lâ€™archive : config_backup_$DATE.tar.gz. Enregistrer lâ€™archive dans /mnt/archives. Si lâ€™archivage rÃ©ussit, Ã©crire â€œSuccÃ¨s : Sauvegarde du $DATEâ€ dans un fichier /var/log/backup.log. Rendez ce script exÃ©cutable. Programmez ce script (via Cron) pour quâ€™il sâ€™exÃ©cute tous les jours Ã  23h30. ğŸ“ GRILLE DE CORRECTION (Total /35) Section A : Stockage (10 pts) Points Partitionnement correct (fdisk) 3 Formatage ext4 rÃ©ussi 2 Montage manuel fonctionnel 2 Persistance fstab (Le systÃ¨me redÃ©marre sans erreur et le disque est lÃ ) 3 Section B : SÃ©curitÃ© (10 pts) Points Utilisateurs et Groupe crÃ©Ã©s correctement 3 Dossier crÃ©Ã© au bon endroit 1 PropriÃ©taire Groupe changÃ© (chown :developpeurs) 3 Permissions restrictives (770 ou 2770) 3 Section C : Scripting (15 pts) Points Shebang et syntaxe de base corrects 2 VÃ©rification Root (if [ $UID -ne 0 ]) 3 Variable Date correcte 2 Commande tar fonctionnelle (compression) 3 Logique de succÃ¨s (vÃ©rification ou suite logique) et Log 2 TÃ¢che Cron correctement configurÃ©e (Syntaxe 30 23 * * *) 3 ğŸ’¡ Astuces de survie Rappelez-vous toujours :\nBackup : On ne pleure pas des donnÃ©es perdues, on restaure un backup. Logs : La rÃ©ponse Ã  â€œPourquoi Ã§a marche pas ?â€ est toujours dans /var/log. Root : Un grand pouvoir implique de grandes responsabilitÃ©s. Ne restez pas en root pour rien. Veille dâ€™examen : On se repose. Les Ã©tudes scientifiques montrent quâ€™Ã©tudier Ã  la derniÃ¨re minute crÃ©e un faux sentiment de compÃ©tence (on croit apprendre, mais en fait on ne fait que bourrer son cerveau, ce qui le rend moins efficace) Bonne chance pour la suite de votre technique ! - Votre prof dâ€™info.\n==========================\nVoici une proposition de conversion de lâ€™examen final en Test Moodle.\nJâ€™ai structurÃ© lâ€™examen pour respecter votre ratio de difficultÃ© :\n75% IntermÃ©diaire/Standard : Questions de syntaxe, ordre des opÃ©rations, commandes courantes (QCM et RÃ©ponses courtes). 25% Difficile/Expert : ScÃ©narios complexes, dÃ©bogage de script et syntaxe prÃ©cise (Composition et RÃ©ponses courtes strictes). Test Moodle : Examen Final - Administration Linux (35%) Consignes pour lâ€™Ã©tudiant :\nCe test Ã©value lâ€™ensemble des compÃ©tences acquises durant les 15 semaines. Soyez prÃ©cis sur la syntaxe (espaces, casse). Aucune documentation externe nâ€™est autorisÃ©e. PARTIE 1 : Infrastructure et Stockage (Questions 1 Ã  4) Cette section vÃ©rifie la comprÃ©hension du cycle de vie des disques durs.\nQuestion 1 (QCM - IntermÃ©diaire) Ã‰noncÃ© : Vous venez de brancher un nouveau disque dur physique dans le serveur. Quelle est lâ€™ordre chronologique obligatoire des opÃ©rations pour le rendre utilisable pour stocker des fichiers ?\nFormater -\u003e Partitionner -\u003e Monter Partitionner -\u003e Monter -\u003e Formater Partitionner -\u003e Formater -\u003e Monter (Bonne rÃ©ponse) Monter -\u003e Partitionner -\u003e Formater Question 2 (RÃ©ponse Courte - Facile) Ã‰noncÃ© : Vous tapez la commande lsblk. Vous voyez votre disque systÃ¨me sur sda. Quel sera le nom du fichier de pÃ©riphÃ©rique (device file) correspondant au deuxiÃ¨me disque physique SATA branchÃ© sur la machine ? (RÃ©pondez uniquement par le chemin absolu, ex: /dev/xyz).\nRÃ©ponse : /dev/sdb Question 3 (RÃ©ponse Courte - IntermÃ©diaire) Ã‰noncÃ© : Vous avez crÃ©Ã© une partition /dev/sdb1. Ã‰crivez la commande exacte pour la formater avec le systÃ¨me de fichiers standard de Linux (ext4).\nRÃ©ponse : mkfs.ext4 /dev/sdb1 (Accepter aussi sudo mkfs.ext4 /dev/sdb1) Question 4 (Composition - Difficile/Expert) Ã‰noncÃ© : Vous devez rendre le montage permanent. Voici les informations :\nPartition : /dev/sdb1 Point de montage : /mnt/archives SystÃ¨me de fichiers : ext4 Options : par dÃ©faut UUID : 550e8400-e29b RÃ©digez la ligne exacte que vous devez ajouter dans le fichier /etc/fstab. Utilisez lâ€™UUID pour identifier le disque. Correction suggÃ©rÃ©e : UUID=550e8400-e29b /mnt/archives ext4 defaults 0 2 Note au prof : Cette question sÃ©pare ceux qui comprennent la syntaxe fstab de ceux qui improvisent. PARTIE 2 : Utilisateurs et SÃ©curitÃ© (Questions 5 Ã  8) Cette section vÃ©rifie la gestion des droits selon le principe du moindre privilÃ¨ge.\nQuestion 5 (QCM - IntermÃ©diaire) Ã‰noncÃ© : Vous devez ajouter lâ€™utilisateur existant dave au groupe developpeurs sans lui retirer ses autres groupes actuels. Quelle commande est correcte ?\nusermod -G developpeurs dave (PiÃ¨ge : Ã§a Ã©crase les autres groupes) usermod -aG developpeurs dave (Bonne rÃ©ponse) groupadd dave developpeurs chown dave:developpeurs Question 6 (RÃ©ponse Courte - IntermÃ©diaire) Ã‰noncÃ© : Traduisez les permissions symboliques rwxr-x--- en notation octale (chiffre).\nRÃ©ponse : 750 Question 7 (Composition - Difficile/Expert) Ã‰noncÃ© : Mise en situation : Vous avez un dossier /projets/web.\nLe propriÃ©taire doit Ãªtre anna. Le groupe propriÃ©taire doit Ãªtre developpeurs. Anna doit pouvoir tout faire. Les membres du groupe developpeurs doivent pouvoir lire et modifier les fichiers, mais pas les supprimer (pas dâ€™exÃ©cution non plus). Les autres ne doivent rien voir. Ã‰crivez les deux commandes nÃ©cessaires pour appliquer cette configuration. Correction suggÃ©rÃ©e : chown anna:developpeurs /projets/web chmod 760 /projets/web Question 8 (QCM - IntermÃ©diaire) Ã‰noncÃ© : Un utilisateur ne peut pas accÃ©der Ã  un dossier alors que les permissions semblent correctes (777). Quel fichier de configuration devriez-vous vÃ©rifier pour voir si son compte est verrouillÃ© ou sâ€™il nâ€™a pas le bon shell ?\n/etc/group /etc/shadow /etc/passwd (Bonne rÃ©ponse) /etc/fstab PARTIE 3 : Scripting et Automatisation (Questions 9 Ã  13) Cette section est la plus technique et discrimine les Ã©tudiants avancÃ©s.\nQuestion 9 (RÃ©ponse Courte - Facile) Ã‰noncÃ© : Quelle est la toute premiÃ¨re ligne obligatoire dâ€™un script Bash (le Shebang) ?\nRÃ©ponse : #!/bin/bash Question 10 (QCM - IntermÃ©diaire) Ã‰noncÃ© : Dans un script, quelle condition if permet de vÃ©rifier correctement si le dossier /mnt/backup existe ?\nif [ -f \"/mnt/backup\" ]; then if [ -d \"/mnt/backup\" ]; then (Bonne rÃ©ponse) if [ exist \"/mnt/backup\" ]; then if [ -e \"/mnt/backup\" ]; then (Accepte aussi, mais -d est plus prÃ©cis pour un dossier. Moodle permet de mettre 100% Ã  la rÃ©ponse 2 et 80% Ã  la rÃ©ponse 4 si dÃ©sirÃ©). Question 11 (RÃ©ponse Courte - IntermÃ©diaire) Ã‰noncÃ© : Vous voulez crÃ©er une archive compressÃ©e du dossier /etc. ComplÃ©tez la commande tar avec les bons drapeaux (flags) pour crÃ©er une archive gzippÃ©e. Commande : tar _____ backup.tar.gz /etc\nRÃ©ponse : -czf (ou -zcf, -fcz tant que â€˜fâ€™ est suivi du nom). Question 12 (RÃ©ponse Courte - Difficile/Expert) Ã‰noncÃ© : Vous devez programmer une tÃ¢che Cron pour quâ€™elle sâ€™exÃ©cute tous les jours Ã  23h30. Ã‰crivez uniquement les 5 champs de temps (ne mettez pas la commande).\nRÃ©ponse : 30 23 * * * Question 13 (Composition - Difficile/Expert) Ã‰noncÃ© : Analyse de script. Le script ci-dessous a pour but de vÃ©rifier si lâ€™utilisateur est root avant de continuer. Sâ€™il nâ€™est pas root, il doit sâ€™arrÃªter avec un code dâ€™erreur. Cependant, ce script contient 2 erreurs fatales qui lâ€™empÃªchent de fonctionner. Identifiez les erreurs et rÃ©Ã©crivez le bloc de code corrigÃ©.\nScript buggÃ© :\nif [ $UID -ne 0 ] then echo \"Erreur : Il faut Ãªtre root\" exit fi Correction attendue : Erreur 1 : Manque le ; aprÃ¨s le crochet ou le retour Ã  la ligne avant then (souvent tolÃ©rÃ© par bash moderne mais mauvaise pratique), mais surtout manque dâ€™espaces si lâ€™Ã©tudiant le mentionne. Erreur 2 (Critique) : exit tout seul renvoie le code 0 (succÃ¨s). Il faut exit 1 pour signaler une erreur. RÃ©ponse idÃ©ale : if [ \"$UID\" -ne 0 ]; then echo \"Erreur : Il faut Ãªtre root\" exit 1 fi RÃ©sumÃ© de la distribution Facile / IntermÃ©diaire (~75%) :\nQ1 (Ordre partition)\nQ2 (Nom du disque sdb)\nQ3 (Formatage mkfs)\nQ5 (Ajout groupe)\nQ6 (Conversion Octale)\nQ8 (Fichier passwd)\nQ9 (Shebang)\nQ10 (Condition If -d)\nQ11 (Tar flags)\nDifficile / Expert (~25%) :\nQ4 (Syntaxe FSTAB complÃ¨te)\nQ7 (ScÃ©nario double Chown/Chmod)\nQ12 (Syntaxe Cron prÃ©cise)\nQ13 (Logique de script et code dâ€™erreur)",
    "description": "Objectif de la semaine DÃ©montrer une autonomie complÃ¨te sur lâ€™administration, la sÃ©curisation et lâ€™automatisation dâ€™un systÃ¨me Linux. Plan de la sÃ©ance #1 Il nâ€™y a plus de nouvelle matiÃ¨re. Câ€™est le moment de consolider tout ce qui a Ã©tÃ© vu depuis 15 semaines et de prouver que vous Ãªtes prÃªts pour le prochain cours dans vos Ã©tudes.",
    "tags": [],
    "title": "RÃ©vision \u0026 Examen Final",
    "uri": "/bloc-4/semaine-15/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "",
    "description": "",
    "tags": [],
    "title": "Categories",
    "uri": "/categories/index.html"
  },
  {
    "breadcrumb": "Accueil du cours",
    "content": "",
    "description": "",
    "tags": [],
    "title": "Tags",
    "uri": "/tags/index.html"
  }
]
