<!DOCTYPE html>
<html lang="fr-ca" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="html">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.152.2">
    <meta name="generator" content="Relearn 8.3.0+187e41ae8f27979cda87bfe489e34e07e5b6cbcd">
    <meta name="description" content="Objectifs de la s√©ance Comprendre l‚Äôidentit√© num√©rique sous Linux (UID, GID) et le concept de groupe primaire vs secondaire. Auditer les fichiers syst√®me (/etc/passwd, /etc/shadow et /etc/group). G√©rer le cycle de vie des comptes (cr√©ation, modification, suppression, verrouillage). Th√©orie Linux est un syst√®me multi-utilisateurs strict. Pour le noyau, vous n‚Äô√™tes pas un nom, mais une s√©rie de num√©ros.">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Gestion des Utilisateurs et des groupes :: ZG4-Linux">
    <meta name="twitter:description" content="Objectifs de la s√©ance Comprendre l‚Äôidentit√© num√©rique sous Linux (UID, GID) et le concept de groupe primaire vs secondaire. Auditer les fichiers syst√®me (/etc/passwd, /etc/shadow et /etc/group). G√©rer le cycle de vie des comptes (cr√©ation, modification, suppression, verrouillage). Th√©orie Linux est un syst√®me multi-utilisateurs strict. Pour le noyau, vous n‚Äô√™tes pas un nom, mais une s√©rie de num√©ros.">
    <meta property="og:url" content="http://localhost:1313/bloc-1/semaine-3a/index.html">
    <meta property="og:site_name" content="ZG4-Linux">
    <meta property="og:title" content="Gestion des Utilisateurs et des groupes :: ZG4-Linux">
    <meta property="og:description" content="Objectifs de la s√©ance Comprendre l‚Äôidentit√© num√©rique sous Linux (UID, GID) et le concept de groupe primaire vs secondaire. Auditer les fichiers syst√®me (/etc/passwd, /etc/shadow et /etc/group). G√©rer le cycle de vie des comptes (cr√©ation, modification, suppression, verrouillage). Th√©orie Linux est un syst√®me multi-utilisateurs strict. Pour le noyau, vous n‚Äô√™tes pas un nom, mais une s√©rie de num√©ros.">
    <meta property="og:locale" content="fr_ca">
    <meta property="og:type" content="article">
    <meta property="article:section" content="Fondations & installation">
    <meta itemprop="name" content="Gestion des Utilisateurs et des groupes :: ZG4-Linux">
    <meta itemprop="description" content="Objectifs de la s√©ance Comprendre l‚Äôidentit√© num√©rique sous Linux (UID, GID) et le concept de groupe primaire vs secondaire. Auditer les fichiers syst√®me (/etc/passwd, /etc/shadow et /etc/group). G√©rer le cycle de vie des comptes (cr√©ation, modification, suppression, verrouillage). Th√©orie Linux est un syst√®me multi-utilisateurs strict. Pour le noyau, vous n‚Äô√™tes pas un nom, mais une s√©rie de num√©ros.">
    <meta itemprop="wordCount" content="816">
    <title>Gestion des Utilisateurs et des groupes :: ZG4-Linux</title>
    <link href="/images/logo.png?1768792296" rel="icon" type="image/png">
    <link href="/css/auto-complete/auto-complete.min.css?1768792296" rel="stylesheet">
    <script src="/js/auto-complete/auto-complete.min.js?1768792296" defer></script>
    <script src="/js/search-lunr.js?1768792296" defer></script>
    <script src="/js/search.js?1768792296" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.index_js_url="/searchindex.en.js?1768792296";
    </script>
    <script src="/js/lunr/lunr.min.js?1768792296" defer></script>
    <script src="/js/lunr/lunr.stemmer.support.min.js?1768792296" defer></script>
    <script src="/js/lunr/lunr.multi.min.js?1768792296" defer></script>
    <script src="/js/lunr/lunr.fr.min.js?1768792296" defer></script>
    <script>
      window.relearn = window.relearn || {};
      window.relearn.contentLangs=['fr'];
    </script>
    <link href="/fonts/fontawesome/css/fontawesome-all.min.css?1768792296" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="/fonts/fontawesome/css/fontawesome-all.min.css?1768792296" rel="stylesheet"></noscript>
    <link href="/css/perfect-scrollbar/perfect-scrollbar.min.css?1768792296" rel="stylesheet">
    <link href="/css/theme.css?1768792296" rel="stylesheet">
    <link href="/css/format-html.css?1768792296" rel="stylesheet" id="R-format-style">
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = ``;
      window.relearn.path='\/bloc-1\/semaine-3a\/index.html';
      window.relearn.relBasePath='..\/..';
      window.relearn.relBaseUri='..\/..';
      window.relearn.absBaseUri='http:\/\/localhost:1313';
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // translations
      window.T_Copy_to_clipboard = `Copy text to clipboard`;
      window.T_Copied_to_clipboard = `Text copied to clipboard!`;
      window.T_Link_copied_to_clipboard = `Link copied to clipboard!`;
      window.T_Reset_view = `Reset view`;
      window.T_View_reset = `View reset!`;
      window.T_No_results_found = `No results found for "{0}"`;
      window.T_N_results_found = `{1} results found for "{0}"`;
      window.T_Browser_unsupported_feature = `This browser doesn't support this feature`;
      // variant stuff
      window.relearn.themevariants = [ 'auto' ];
      window.relearn.customvariantprefix = "my-custom-";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( !variant ||
            (!variant.startsWith(window.relearn.customvariantprefix) && !window.relearn.themevariants.includes(variant)) ||
            (variant.startsWith(window.relearn.customvariantprefix) && !window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variantstylesheet-" + variant)) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
    </script>
    <link href="/css/custom.css?1768792296" rel="stylesheet">
  </head>
  <body class="mobile-support html" data-url="/bloc-1/semaine-3a/index.html">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar" class="default-animation">
        <div class="topbar-wrapper default-animation">
          <div class="topbar-sidebar-divider default-animation"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar default-animation" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleNav()" type="button" title="Menu (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button></span>
            </div>
            <div class="topbar-button topbar-button-toc default-animation" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="Table of Contents (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
<nav class="TableOfContents">
  <ul>
    <li><a href="#objectifs-de-la-s√©ance">Objectifs de la s√©ance</a></li>
  </ul>

  <ul>
    <li><a href="#les-identifiants-uid--gid">Les identifiants (UID &amp; GID)</a></li>
    <li><a href="#groupes-primaires-vs-secondaires">Groupes primaires vs secondaires</a>
      <ul>
        <li><a href="#1-le-groupe-primaire-identit√©-de-base">1. Le groupe primaire (Identit√© de base)</a></li>
        <li><a href="#2-les-groupes-secondaires-les-permissions">2. Les groupes secondaires (Les permissions)</a></li>
      </ul>
    </li>
    <li><a href="#les-fichiers-de-configuration">Les fichiers de configuration</a>
      <ul>
        <li><a href="#1-le-fichier-etcpasswd-lannuaire">1. Le fichier <em><strong>/etc/passwd</strong></em> (L‚Äôannuaire)</a></li>
        <li><a href="#2-le-fichier-etcshadow-les-secrets">2. Le fichier <em><strong>/etc/shadow</strong></em> (Les secrets)</a></li>
        <li><a href="#3-le-fichier-etcgroup-les-clubs">3. Le fichier <em><strong>/etc/group</strong></em> (Les clubs)</a></li>
      </ul>
    </li>
    <li><a href="#les-commandes-de-gestion">Les commandes de gestion</a>
      <ul>
        <li><a href="#1-cr√©ation-useradd">1. Cr√©ation (<code>useradd</code>)</a></li>
        <li><a href="#2-modification-usermod">2. Modification (<code>usermod</code>)</a></li>
        <li><a href="#3-v√©rification-id-et-groups">3. V√©rification (<code>id</code> et <code>groups</code>)</a></li>
        <li><a href="#-exercice-en-classe">üü¢ Exercice (en classe)</a></li>
      </ul>
    </li>
    <li><a href="#4-verrouillage-et-suppression">4. Verrouillage et suppression</a>
      <ul>
        <li><a href="#1-le-pi√®ge-du-shell-vide">1. Le pi√®ge du Shell vide</a></li>
        <li><a href="#2-verrouiller-sans-supprimer">2. Verrouiller sans supprimer</a></li>
        <li><a href="#3-suppression-propre">3. Suppression propre</a></li>
      </ul>
    </li>
  </ul>
</nav>
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList"><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/index.html"><span itemprop="name">Accueil du cours</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="/bloc-1/index.html"><span itemprop="name">Fondations &amp; installation</span></a><meta itemprop="position" content="2">&nbsp;>&nbsp;</li><li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">Gestion des Utilisateurs et des groupes</span><meta itemprop="position" content="3"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-prev default-animation" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/bloc-1/semaine-2/index.html" title="Laboratoires #1 & #2 (ü°ê)"><i class="fa-fw fas fa-chevron-left"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-next default-animation" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><a href="/bloc-1/semaine-3b/index.html" title="Permissions & droits d'acc√®s (ü°í)"><i class="fa-fw fas fa-chevron-right"></i></a></span>
            </div>
            <div class="topbar-button topbar-button-more default-animation" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show">
<span class="btn cstyle button link noborder notitle interactive"><button onclick="toggleTopbarFlyout(this)" type="button" title="More"><i class="fa-fw fas fa-ellipsis-v"></i></button></span>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable bloc-1" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="gestion-des-utilisateurs-et-des-groupes">Gestion des Utilisateurs et des groupes</h1>

<h2 id="objectifs-de-la-s√©ance">Objectifs de la s√©ance<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<ul>
<li><strong>Comprendre</strong> l&rsquo;identit√© num√©rique sous Linux (UID, GID) et le concept de groupe primaire vs secondaire.</li>
<li><strong>Auditer</strong> les fichiers syst√®me (<code>/etc/passwd</code>, <code>/etc/shadow</code> et <code>/etc/group</code>).</li>
<li><strong>G√©rer</strong> le cycle de vie des comptes (cr√©ation, modification, suppression, verrouillage).</li>
</ul>
<hr>
<h1 id="th√©orie">Th√©orie<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h1>
<p>Linux est un syst√®me multi-utilisateurs strict. Pour le noyau, vous n&rsquo;√™tes pas un nom, mais une s√©rie de num√©ros.</p>
<h2 id="les-identifiants-uid--gid">Les identifiants (UID &amp; GID)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>Chaque utilisateur poss√®de un <strong>UID</strong> (<em>User ID</em>) et appartient √† un groupe principal identifi√© par un <strong>GID</strong> (<em>Group ID</em>).</p>
<table>
  <thead>
      <tr>
          <th>Plage d&rsquo;UID</th>
          <th>R√¥le</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>0</strong></td>
          <td><strong>Root</strong></td>
          <td>L&rsquo;administrateur supr√™me. Acc√®s total et illimit√©.</td>
      </tr>
      <tr>
          <td><strong>1 √† 999</strong></td>
          <td><strong>Syst√®me</strong></td>
          <td>Comptes pour les services (ex: <code>www-data</code> pour le web). Pas de connexion humaine.</td>
      </tr>
      <tr>
          <td><strong>1000+</strong></td>
          <td><strong>Humains</strong></td>
          <td>Utilisateurs r√©els. Le premier compte cr√©√© re√ßoit souvent l&rsquo;UID 1000.</td>
      </tr>
  </tbody>
</table>
<h2 id="groupes-primaires-vs-secondaires">Groupes primaires vs secondaires<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>C&rsquo;est une distinction cruciale pour la gestion des droits sous Linux.</p>
<h3 id="1-le-groupe-primaire-identit√©-de-base">1. Le groupe primaire (Identit√© de base)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<ul>
<li><strong>D√©finition :</strong> C&rsquo;est le groupe inscrit directement dans le fichier <code>/etc/passwd</code>.</li>
<li><strong>R√¥le :</strong> Lorsqu&rsquo;un utilisateur cr√©e un fichier, ce fichier appartient automatiquement √† son groupe primaire.</li>
<li><strong>R√®gle :</strong> Un utilisateur a <strong>exactement un seul</strong> groupe primaire.</li>
<li><strong>Usage :</strong> Sous les distributions modernes (Ubuntu, Debian, CentOS), Linux cr√©e par d√©faut un groupe portant le m√™me nom que l&rsquo;utilisateur (ex: l&rsquo;utilisateur <code>albert</code> a pour groupe primaire <code>albert</code>).</li>
</ul>
<h3 id="2-les-groupes-secondaires-les-permissions">2. Les groupes secondaires (Les permissions)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<ul>
<li><strong>D√©finition :</strong> Ce sont tous les autres groupes auxquels appartient l&rsquo;utilisateur (d√©finis dans <code>/etc/group</code>).</li>
<li><strong>R√¥le :</strong> Ils servent √† donner des acc√®s suppl√©mentaires (ex: acc√®s au groupe <code>sudo</code> pour administrer, <code>docker</code> pour g√©rer des conteneurs, ou <code>comptabilite</code> pour lire des rapports).</li>
<li><strong>R√®gle :</strong> Un utilisateur peut appartenir √† <strong>une infinit√©</strong> de groupes secondaires (ou aucun).</li>
</ul>

<details open class="box cstyle notices primary">
  <summary class="box-label a11y-only" tabindex="-1">
    <span class="a11y-only">Details</span>
  </summary>
  <div class="box-content">
<p>Les groupes peuvent √™tre sp√©cifi√©s par leur <strong>GID</strong> ou leur <strong>nom</strong>.</p>
  </div>
</details>
<h4 id="le-groupe-wheel">Le groupe <em>wheel</em><span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h4>
<ul>
<li>Le groupe wheel permet √† ses membres d‚Äôutiliser des commandes avec des privil√®ges administratifs gr√¢ce √† <code>sudo</code>.</li>
</ul>
<h2 id="les-fichiers-de-configuration">Les fichiers de configuration<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<p>Linux utilise trois fichiers texte simples pour g√©rer la s√©curit√© :</p>
<h3 id="1-le-fichier-etcpasswd-lannuaire">1. Le fichier <em><strong>/etc/passwd</strong></em> (L&rsquo;annuaire)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Tout le monde peut le lire. Il d√©finit les comptes.</p>
<ul>
<li><strong>Format :</strong> <code>nom:x:UID:GID:Commentaire:Home:Shell</code></li>
<li><strong>Exemple :</strong> <code>etudiant:x:1000:1000:Etudiant,,,:/home/etudiant:/bin/bash</code></li>
<li><em>Le 4√®me champ (<code>1000</code>) est le GID du groupe primaire.</em></li>
</ul>
<h3 id="2-le-fichier-etcshadow-les-secrets">2. Le fichier <em><strong>/etc/shadow</strong></em> (Les secrets)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Contient les mots de passe chiffr√©s (<em>hashs</em>). Seul <strong>root</strong> peut y acc√©der.</p>

<details open class="box cstyle notices primary">
  <summary class="box-label a11y-only" tabindex="-1">
    <span class="a11y-only">Details</span>
  </summary>
  <div class="box-content">
<p>Si vous voyez <code>!</code> ou <code>*</code> √† la place du hash, le compte est verrouill√©.</p>
  </div>
</details>
<h3 id="3-le-fichier-etcgroup-les-clubs">3. Le fichier <em><strong>/etc/group</strong></em> (Les clubs)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>D√©finit les noms des groupes et liste les membres <strong>secondaires</strong>.</p>
<ul>
<li><strong>Format :</strong> <code>nom_groupe:x:GID:liste_membres_secondaires</code></li>
<li><strong>Exemple :</strong> <code>sudo:x:27:albert,nancy</code> (Albert et Nancy sont membres secondaires du groupe sudo).</li>
</ul>
<h2 id="les-commandes-de-gestion">Les commandes de gestion<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<h3 id="1-cr√©ation-useradd">1. Cr√©ation (<code>useradd</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>La syntaxe <code>useradd [options] [nom_utilisateur]</code></p>
<p>La commande <code>useradd</code> est pr√©cise mais minimaliste. On doit alors l&rsquo;utiliser avec des <strong>options</strong>. Voici les plus courantes.</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># -u : Sp√©cifie un UID.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -c : Ajoute un commentaire pour les archives.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -m : Cr√©e le dossier personnel.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -g : D√©finit le groupe PRIMAIRE (par nom ou GID)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -G : D√©finit les groupes SECONDAIRES (s√©par√©s par des virgules)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -s : D√©finit le Shell par d√©faut (ex: `/bin/bash`)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -e : D√©finit une date d&#39;expiration.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo useradd -m -g users -G sudo,devs -s /bin/bash alfred</span></span></code></pre></div>

<details open class="box cstyle notices primary">
  <summary class="box-label a11y-only" tabindex="-1">
    <span class="a11y-only">Details</span>
  </summary>
  <div class="box-content">
<p>L&rsquo;utilisateur sera ajout√© √† la <strong>derni√®re ligne</strong> du fichier <code>etc/passwd</code>. Vous pouvez ensuite v√©rifier l‚Äôutilisateur ajout√© dans le fichier:</p>
  </div>
</details>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>tail -1 /etc/passwd</span></span></code></pre></div>

<details open class="box cstyle notices primary">
  <summary class="box-label a11y-only" tabindex="-1">
    <span class="a11y-only">Details</span>
  </summary>
  <div class="box-content">
<p><strong>Cr√©ation d&rsquo;un utilisateur avec <code>adduser</code></strong><br>
En r√©alit√©, <code>adduser</code> est l&rsquo;impl√©mentation standard sur les syst√®mes Debian et Ubuntu qui agit comme un &ldquo;wrapper&rdquo; (emballage) autour de l&rsquo;outil de bas niveau <code>useradd</code> pour offrir cette interface interactive et simplifi√©e.</p>
  </div>
</details>
<h3 id="2-modification-usermod">2. Modification (<code>usermod</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>C&rsquo;est ici que l&rsquo;on g√®re les promotions ou changements de service.</p>

<details open class="box cstyle notices primary">
  <summary class="box-label a11y-only" tabindex="-1">
    <span class="a11y-only">Details</span>
  </summary>
  <div class="box-content">
<p><strong>Le pi√®ge classique :</strong> Si vous faites <code>usermod -G projet_a alfred</code>, vous <strong>√©crasez</strong> tous ses anciens groupes secondaires. S&rsquo;il √©tait admin, il ne l&rsquo;est plus !<br>
<strong>La r√®gle d&rsquo;or :</strong> Toujours utiliser <code>-a</code> (Append) avec <code>-G</code>.</p>
  </div>
</details>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># ‚úÖ BONNE PRATIQUE : Ajoute le groupe sans supprimer les anciens</span>
</span></span><span style="display:flex;"><span>sudo usermod -aG comptabilite alfred
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Modifier le groupe primaire (rarement utilis√©)</span>
</span></span><span style="display:flex;"><span>sudo usermod -g nouveaux_membres alfred</span></span></code></pre></div>
<h3 id="3-v√©rification-id-et-groups">3. V√©rification (<code>id</code> et <code>groups</code>)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Pour savoir qui appartient √† quoi :</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>id alfred
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Affiche : uid=1001(alfred) gid=100(users) groupes=100(users),27(sudo),1005(comptabilite)</span></span></span></code></pre></div>
<h3 id="-exercice-en-classe">üü¢ Exercice (en classe)<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<ol>
<li>Cr√©er un groupe nomm√© <code>direction</code>.</li>
<li>Cr√©er un utilisateur <code>pdg</code> avec <code>/bin/bash</code> et son dossier personnel.</li>
<li>Assigner <code>pdg</code> au groupe <code>direction</code> en tant que <strong>groupe primaire</strong> (utilisez <code>-g</code>).</li>
<li>Ajouter <code>pdg</code> au groupe <code>sudo</code> en tant que <strong>groupe secondaire</strong> (utilisez <code>-aG</code>).</li>
<li>V√©rifier avec <code>id pdg</code>. Que remarquez-vous sur la position du groupe <code>direction</code> ?</li>
</ol>
<!--
SOLUTION

```bash
# 1. Cr√©ation du groupe direction
sudo groupadd direction

# 2 & 3. Cr√©ation de l'utilisateur avec son groupe primaire (-g)
# Note : On combine la cr√©ation du home (-m) et du shell (-s)
sudo useradd -m -s /bin/bash -g direction pdg

# 4. Ajout au groupe secondaire sudo (-aG)
sudo usermod -aG sudo pdg

# 5. V√©rification de l'identit√©
id pdg
```

### Analyse du r√©sultat de la commande `id`

Le r√©sultat devrait ressembler √† ceci :
`uid=1001(pdg) gid=1002(direction) groupes=1002(direction),27(sudo)`

**Ce que l'on remarque sur la position du groupe `direction` :**

1. **Champ `gid=` :** Le groupe `direction` appara√Æt en premier juste apr√®s l'UID. C'est ici qu'est d√©fini le **groupe primaire**. Tous les fichiers cr√©√©s par le PDG appartiendront par d√©faut √† ce groupe.
2. **Champ `groupes=` :** On remarque que `direction` est list√© √† nouveau dans la liste globale des groupes, suivi de `sudo`.
3. **Absence du groupe "pdg" :** Contrairement √† une cr√©ation standard, Linux n'a pas cr√©√© de groupe nomm√© `pdg` car nous avons explicitement forc√© l'utilisation de `direction` comme groupe principal avec l'option `-g`.

-->
<h2 id="4-verrouillage-et-suppression">4. Verrouillage et suppression<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2>
<h3 id="1-le-pi√®ge-du-shell-vide">1. Le pi√®ge du Shell vide<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>Si votre utilisateur voit un <code>$</code> au lieu de <code>utilisateur@machine:~$</code> et que les fl√®ches du clavier ne fonctionnent pas, c&rsquo;est qu&rsquo;il est sur le shell <code>sh</code> (basique).<br>
<strong>Correction :</strong> <code>sudo usermod -s /bin/bash nom_utilisateur</code></p>
<h3 id="2-verrouiller-sans-supprimer">2. Verrouiller sans supprimer<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<p>En cas de d√©part temporaire ou enqu√™te :</p>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo passwd -l alfred  <span style="color:#75715e"># Lock (verrouille)</span>
</span></span><span style="display:flex;"><span>sudo passwd -u alfred  <span style="color:#75715e"># Unlock (d√©verrouille)</span></span></span></code></pre></div>
<h3 id="3-suppression-propre">3. Suppression propre<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type="button" title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3>
<div class="highlight actionbar-wrapper wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo userdel -r alfred <span style="color:#75715e"># -r supprime aussi le dossier /home/alfred</span></span></span></code></pre></div>
<!--
---

# Laboratoire

**Objectif :** Simuler l'arriv√©e de nouveaux employ√©s dans une entreprise.

Utiliser le fichier **labo5.docx** pour y mettre vos r√©ponses et captures d'√©cran.  
<span class="btn cstyle button transparent interactive"><a href="/docs/Labos/labo5.docx"><i class="fa-fw fas fa-download"></i> <span class="title">T√©l√©charger le fichier docx</span></a></span>

Vous √™tes administrateur syst√®me pour la start-up "Momo420".

1. **Embauche :** Cr√©er les comptes pour les nouveaux d√©veloppeurs (avec dossier home).
2. **S√©curit√© :** Forcer le changement de mot de passe √† la premi√®re connexion.
3. **Groupes :** Cr√©er un groupe `devs` et y ajouter les utilisateurs.
4. **D√©part :** Un stagiaire quitte l'entreprise. Verrouillez son compte sans supprimer ses fichiers.

### √âtape 1 : Audit 

1. Utilisez `grep` pour trouver votre utilisateur dans `/etc/passwd`.
2. Essayez de lire `/etc/shadow`. Que se passe-t-il ?.
3. Utilisez `sudo cat /etc/shadow` pour voir la diff√©rence.


### √âtape 2 : Recrutement massif 

*Vous √™tes l'admin syst√®me.*

1. Cr√©ez deux groupes:

   * `comptabilite`
   * `informatique`

2. Cr√©ez 3 utilisateurs (avec `useradd` ou `adduser`):

   * `andre` (dans le groupe `comptabilite`).
   * `sylvie` (dans le groupe `informatique`).
   * `charles` (dans le groupe `informatique` aussi).

3. Assignez leur le mot de passe : `Cegep`.


### √âtape 3 : Gestion des groupes 

1. `andre` a obtenu une promotion. Ajoutez-le au groupe `sudo` (ou `wheel`) pour qu'il devienne administrateur.

**Commande** : `usermod -aG sudo andre` (Attention au `-a` pour Append, sinon on √©crase ses autres groupes !).


2. V√©rifiez les groupes de Andre avec la commande `groups andre`.

-->
<!--
## Corrig√© du laboratoire

> √Ä venir (samedi ou dimanche)


## Solution du laboratoire

### √âtape 1 : Audit

1. **Trouver son utilisateur :**
```bash
grep "$USER" /etc/passwd
```


2. **Lire `/etc/shadow` sans privil√®ges :**
* *R√©sultat :* "Permission non accord√©e". C'est normal, ce fichier contient les empreintes des mots de passe et seul l'utilisateur **root** y a acc√®s pour garantir la s√©curit√© du syst√®me.


3. **Lire avec `sudo` :**
```bash
sudo cat /etc/shadow
```


* *Observation :* Vous voyez maintenant les hashs (caract√®res cryptiques entre les `:`).


### √âtape 2 : Recrutement massif

**1. Cr√©ation des groupes :**

```bash
sudo groupadd comptabilite
sudo groupadd informatique
```

**2. Cr√©ation des utilisateurs :**
Ici, nous utilisons `useradd` avec les options n√©cessaires pour que les comptes soient fonctionnels imm√©diatement.

```bash
# Andr√© (Comptabilit√©)
sudo useradd -m -s /bin/bash -g comptabilite andre

# Sylvie (Informatique)
sudo useradd -m -s /bin/bash -g informatique sylvie

# Charles (Informatique)
sudo useradd -m -s /bin/bash -g informatique charles
```

**3. Assignation des mots de passe :**

```bash
echo "andre:Cegep" | sudo passwd andre
echo "sylvie:Cegep" | sudo passwd sylvie
echo "charles:Cegep" | sudo passwd charles
```

*(Note : `chpasswd` est plus rapide pour les cr√©ations en lot, mais `sudo passwd andre` fonctionne aussi individuellement).*



### √âtape 3 : Gestion des groupes et S√©curit√©

**1. Promotion d'Andr√© :**
Andr√© garde son groupe primaire `comptabilite` mais re√ßoit les pouvoirs d'administration en devenant membre secondaire de `sudo`.

```bash
sudo usermod -aG sudo andre
```

**2. V√©rification :**

```bash
groups andre
# Sortie attendue : andre : comptabilite sudo
```

**3. S√©curit√© : Forcer le changement de mot de passe**
Pour l'objectif de s√©curit√© mentionn√© en d√©but de labo, on utilise la commande `chage` (Change Age) :

```bash
# Force le changement √† la prochaine connexion pour tous
sudo chage -d 0 andre
sudo chage -d 0 sylvie
sudo chage -d 0 charles
```



### √âtape 4 : D√©part (Gestion du cycle de vie)

Un stagiaire (appelons-le `stagiaire1`) quitte l'entreprise. On veut emp√™cher toute connexion sans supprimer ses donn√©es pour pouvoir les auditer plus tard.

```bash
# Verrouiller le mot de passe (met un ! devant le hash dans /etc/shadow)
sudo passwd -l stagiaire1

# Alternative : Expire le compte compl√®tement
sudo usermod -e 1 stagiaire1
```

---

### üí° Synth√®se pour l'examen

| Action | Commande cl√© | Pourquoi ? |
| --- | --- | --- |
| **Cr√©er** | `useradd -m -g [G_PRIMAIRE]` | Le `-m` cr√©e la maison de l'utilisateur. |
| **Ajouter un droit** | `usermod -aG [G_SECONDAIRE]` | Le `-a` √©vite de supprimer les autres acc√®s. |
| **V√©rifier** | `id [USER]` | Donne l'UID et TOUS les groupes d'un coup. |
| **D√©sactiver** | `passwd -l [USER]` | S√©curise le d√©part d'un employ√© sans perte de donn√©es. |

-->

  <footer class="footline">
  </footer>
</article>
        </div>
      </main>
    </div>
    <aside id="R-sidebar" class="default-animation">
      <div id="R-header-topbar" class="default-animation"></div>
      <div id="R-header-wrapper" class="default-animation">

<a id="logo" href="http://localhost:1313/">
  <img src="/images/logo.png" alt="Logo du site" style="height: 100px; width: auto;">
</a>


        <search><form action="/search/index.html" method="get">
          <div class="searchbox default-animation">
            <button class="search-detail" type="submit" title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
            <label class="a11y-only" for="R-search-by">Search</label>
            <input data-search-input id="R-search-by" name="search-by" class="search-by" type="search" placeholder="Search...">
            <button class="search-clear" type="button" data-search-clear="" title="Clear search"><i class="fas fa-times" title="Clear search"></i></button>
          </div>
        </form></search>
      </div>
      <div id="R-homelinks" class="default-animation homelinks">
        <div class="R-menu-divider default-animation">
          <hr class="padding default-animation">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-homelinks default-animation">
          <ul class="space collapsible-menu">
            <li class="" data-nav-url="/index.html"><a class="padding" href="/index.html"><i class="fa-fw fas fa-home"></i> Home</a></li>
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding default-animation">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-headercontrols default-animation">
          <ul class="">
          </ul>
        </div>
        <div class="R-menu-divider default-animation">
          <hr class="padding default-animation">
        </div>
      </div>
      <div id="R-content-wrapper" class="highlightable">
        <div class="R-sidebarmenu R-shortcutmenu-main default-animation">
          <ul class="enlarge morespace collapsible-menu">
            <li class="" data-nav-url="/remises/index.html"><a class="padding" href="/remises/index.html">Protocole de remise des exos et labos<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-url="/regles/index.html"><a class="padding" href="/regles/index.html">R√®gles de survie au cours<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="parent " data-nav-url="/bloc-1/index.html"><input type="checkbox" id="R-section-0b942f9b9b2d065455b2a863f4d7995c" aria-controls="R-subsections-0b942f9b9b2d065455b2a863f4d7995c" checked><label for="R-section-0b942f9b9b2d065455b2a863f4d7995c"><i class="fa-fw fas fa-chevron-right"></i><span class="a11y-only">Submenu Fondations &amp; installation</span></label><a class="padding default-animation" href="/bloc-1/index.html">BLOC 1 : Fondations &amp; installation<i class="fa-fw fas fa-check read-icon"></i></a><ul id="R-subsections-0b942f9b9b2d065455b2a863f4d7995c" class="collapsible-menu">
            <li class="" data-nav-url="/bloc-1/semaine-1a/index.html"><a class="padding" href="/bloc-1/semaine-1a/index.html">Semaine 1.1: Pr√©sentation du cours et introduction √† Linux<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-url="/bloc-1/semaine-1b/index.html"><a class="padding" href="/bloc-1/semaine-1b/index.html">Semaine 1.2 : Le syst√®me de fichiers de Linux<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-url="/bloc-1/semaine-2/index.html"><a class="padding" href="/bloc-1/semaine-2/index.html">Semaine 2 : Laboratoires #1 &amp; #2<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="active " data-nav-url="/bloc-1/semaine-3a/index.html"><a class="padding" href="/bloc-1/semaine-3a/index.html">Semaine 3.1 : Gestion des Utilisateurs et des groupes<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-url="/bloc-1/semaine-3b/index.html"><a class="padding" href="/bloc-1/semaine-3b/index.html">Semaine 3.2 : Permissions &amp; droits d&#39;acc√®s<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-url="/bloc-1/semaine-4/index.html"><a class="padding" href="/bloc-1/semaine-4/index.html">Semaine 4 : Laboratoires #3 &amp; Test #1<i class="fa-fw fas fa-check read-icon"></i></a></li></ul></li>
            <li class="" data-nav-url="/bloc-2/index.html"><a class="padding" href="/bloc-2/index.html">BLOC 2 : Redirections, Pipe, recherche &amp; filtres<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-url="/bloc-3/index.html"><a class="padding" href="/bloc-3/index.html">BLOC 3 : RegExp, VIM &amp; fichiers de configuration<i class="fa-fw fas fa-check read-icon"></i></a></li>
            <li class="" data-nav-url="/bloc-4/index.html"><a class="padding" href="/bloc-4/index.html">BLOC 4 : Automatisation, script &amp; r√©seau<i class="fa-fw fas fa-check read-icon"></i></a></li>
          </ul>
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-shortcuts default-animation">
          <ul class="space collapsible-menu">
          </ul>
        </div>
        <div id="R-footer-margin" class="default-animation"></div>
        <div class="R-menu-divider default-animation">
          <hr class="padding default-animation">
        </div>
        <div class="R-sidebarmenu R-shortcutmenu-footercontrols default-animation">
          <ul class="">
            <li class="R-historyclearer">
              <div class="padding menu-control">
                <i class="fa-fw fas fa-history"></i>
                <span>&nbsp;</span>
                <div class="control-style">
                  <button>Clear History</button>
                </div>
                <div class="clear"></div>
              </div>
            </li>
          </ul>
        </div>
<div id="R-footer" class="default-animation"><p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn" title="love"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p></div>
      </div>
    </aside>
    <script src="/js/perfect-scrollbar/perfect-scrollbar.min.js?1768792296" defer></script>
    <script src="/js/theme.js?1768792296" defer></script>
    <div id="toast-container" role="status" aria-live="polite" aria-atomic="false"></div>
  </body>
</html>
